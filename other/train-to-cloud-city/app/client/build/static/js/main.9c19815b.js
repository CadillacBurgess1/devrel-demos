/*! For license information please see main.9c19815b.js.LICENSE.txt */
(()=>{"use strict";var e={463:(e,t,n)=>{var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,F=Object.assign;function V(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case x:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,Ie=null;function xe(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),_e(e.stateNode,e.type,t))}}function Te(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Ie)&&(Ae(),ke())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Oe=!1}function Me(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Fe=null,Ve=!1,je=null,ze={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Ue(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,_t,Et,It,xt,Tt=!1,kt=[],Ct=null,At=null,Nt=null,Dt=new Map,Pt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Vt(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Nt&&Vt(Nt)&&(Nt=null),Dt.forEach(jt),Pt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Qt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&St(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Ht,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if(Ht=null,null!==(e=vi(e=Se(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return In}var Tn=F({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Nn=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Dn),On=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Mn,Fn=c&&(!Rn||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Wn=null;function Hn(e){Vr(e,0)}function Yn(e){if(W(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Wn=Qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,Se(e)),De(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==H(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Er={},Ir={};function xr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=xr("animationend"),kr=xr("animationiteration"),Cr=xr("animationstart"),Ar=xr("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Rr=Dr[Or];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Fe;Le=!1,Fe=null,Ve||(Ve=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(Ve)throw e=je,Ve=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}De((function(){var r=s,i=Se(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case kr:case Cr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&c.push(Gr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==u?a:wi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Hr(o,a,l,c,!1),null!==u&&null!==h&&Hr(o,h,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Kn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(v=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Un=!0)),0<(y=Qr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Vn);case"textInput":return(e=t.data)===Vn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),$t=Zt=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Pe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[fi]||null}var _i=[],Ei=-1;function Ii(e){return{current:e}}function xi(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ti(e,t){Ei++,_i[Ei]=e.current,e.current=t}var ki={},Ci=Ii(ki),Ai=Ii(!1),Ni=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){xi(Ai),xi(Ci)}function Ri(e,t,n){if(Ci.current!==ki)throw Error(s(168));Ti(Ci,t),Ti(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,xi(Ai),xi(Ci),Ti(Ci,e)):xi(Ai),Ti(Ai,n)}var Vi=null,ji=!1,zi=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function Ui(){if(!zi&&null!==Vi){zi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,ji=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We($e,Ui),i}finally{bt=t,zi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Wi=[],Hi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function $i(e,t,n){Wi[Hi++]=Xi,Wi[Hi++]=Ji,Wi[Hi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Hi],Wi[Hi]=null,Ji=Wi[--Hi],Wi[Hi]=null,Xi=Wi[--Hi],Wi[Hi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,bs=null,ws=null;function Ss(){ws=bs=vs=null}function _s(e){var t=ys.current;xi(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,ws=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===vs)throw Error(s(308));bs=e,vs.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Ts=null;function ks(e){null===Ts?Ts=[e]:Ts.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(ru(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(ru(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Rs(e,i,r))&&(ru(t,e,r,n),Ms(t,e,r))}};function Us(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Pi(t)?Ni:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Pi(t)?Ni:Ci.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Hs(s)===t.type)?((r=i(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case _:return(t=ju(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lu(t,e.mode,n,null)).return=e,t;Ws(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Ws(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Ws(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),is&&Zi(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return is&&Zi(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Zi(i,m),u}function g(i,a,l,u){var c=M(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),is&&Zi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return is&&Zi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Zi(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Hs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Qs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((s=Lu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mu(o.type,o.key,o.props,null,r.mode,l)).ref=Qs(r,s,o),l.return=r,r=l)}return a(r);case _:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=ju(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);Ws(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Xs=Ys(!0),Js=Ys(!1),Zs={},$s=Ii(Zs),eo=Ii(Zs),to=Ii(Zs);function no(e){if(e===Zs)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($s,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi($s),Ti($s,t)}function io(){xi($s),xi(eo),xi(to)}function so(e){no(to.current);var t=no($s.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti($s,n))}function oo(e){eo.current===e&&(xi($s),xi(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,bo=!1,wo=0,So=0;function _o(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(bo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function xo(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function ko(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,mo.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=mo,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Ko(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&ru(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return ko().memoizedState}function Bo(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return Uo(2048,8,e,t)}function Go(e,t){return Uo(4,2,e,t)}function Qo(e,t){return Uo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function ea(){return ko().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){ru(n,e,r,tu()),sa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Cs(e,t,i,r))&&(ru(n,e,r,i=tu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){bo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:xs,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},aa={readContext:xs,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=So++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:xs,useCallback:Xo,useContext:xs,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(ko(),go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ua={readContext:xs,useCallback:Xo,useContext:xs,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=ko();return null===go?t.memoizedState=e:Zo(t,go.memoizedState,e)},useTransition:function(){return[No(Co)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),da(0,t)},n}function ma(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function Sa(e,t,n,r){t.child=null===e?Js(t,null,n,r):Xs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=xo(),null===e||wa?(is&&n&&es(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Ru(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Rl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Rl,Ol),Ol|=r;return Sa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Pi(n)?Ni:Ci.current;return s=Di(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=xo(),null===e||wa?(is&&r&&es(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xs(u):u=Di(t,u=Pi(n)?Ni:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ks(t,o,r,u),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ns?("function"===typeof c&&(zs(t,n,c,r),l=t.memoizedState),(a=Ns||Us(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gs(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Di(t,l=Pi(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ks(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(u=Ns||Us(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):Sa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,Sa(e,t,n,r),t.child}var Pa,Oa,Ra,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),e=Lu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),ru(r,e,i,-1))}return gu(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Hi++]=Xi,Wi[Hi++]=Ji,Wi[Hi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ru(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ru(r,a):(a=Lu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Ru(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Xs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ua(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,s);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ha(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,io(),xi(Ai),xi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Oa(e,t),Wa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=no($s.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":Q(r),$(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":Q(e),$(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no($s.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(xi(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ml&&(Ml=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return io(),Oa(e,t),null===e&&Ur(t.stateNode.containerInfo),Wa(t),null;case 10:return _s(t.type._context),Wa(t),null;case 19:if(xi(ao),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qa(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ai),xi(Ci),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ao),null;case 4:return io(),null;case 10:return _s(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($s.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&jr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){xu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){xu(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var c=be(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){xu(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){xu(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){xu(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(c=Ja)||h,gl(t,e),Ja=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xu(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,$a=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){xu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){xu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){xu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$a=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Xa;var u=Ja;if(Xa=o,(Ja=l)&&!u)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,$a=l):El(i);for(;null!==s;)$a=s,wl(s,t,n),s=s.sibling;$a=i,Xa=a,Ja=u}Sl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):Sl(e)}}function Sl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){xu(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function _l(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){xu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Il,xl=Math.ceil,Tl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Al=0,Nl=null,Dl=null,Pl=0,Ol=0,Rl=Ii(0),Ml=0,Ll=null,Fl=0,Vl=0,jl=0,zl=null,Bl=null,Ul=0,ql=1/0,Kl=null,Gl=!1,Ql=null,Wl=null,Hl=!1,Yl=null,Xl=0,Jl=0,Zl=null,$l=-1,eu=0;function tu(){return 0!==(6&Al)?Je():-1!==$l?$l:$l=Je()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===eu&&(eu=mt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Vl|=n),4===Ml&&lu(e,Pl)),iu(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,ji&&Ui()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),oi((function(){0===(6&Al)&&Ui()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if($l=-1,eu=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Al;Al|=2;var o=mu();for(Nl===e&&Pl===t||(Kl=null,ql=Je()+500,fu(e,t));;)try{bu();break}catch(l){pu(e,l)}Ss(),Tl.current=o,Al=i,null!==Dl?t=0:(Nl=null,Pl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ll,fu(e,0),lu(e,r),iu(e,Je()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ll,fu(e,0),lu(e,r),iu(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_u(e,Bl,Kl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,Bl,Kl),t);break}_u(e,Bl,Kl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,Bl,Kl),r);break}_u(e,Bl,Kl);break;default:throw Error(s(329))}}}return iu(e,Je()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=Bl,Bl=n,null!==t&&au(t)),e}function au(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~jl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Al))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return iu(e,Je()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ll,fu(e,0),lu(e,t),iu(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Bl,Kl),iu(e,Je()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,ji&&Ui())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Eu();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&Ui()}}function du(){Ol=Rl.current,xi(Rl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),xi(Ai),xi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(ao);break;case 10:_s(r.type._context);break;case 22:case 23:du()}n=n.return}if(Nl=e,Dl=e=Ru(e.current,null),Pl=Ol=t,Ml=0,Ll=null,jl=Vl=Fl=0,Bl=zl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function pu(e,t){for(;;){var n=Dl;try{if(Ss(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,bo=!1,wo=0,kl.current=null,null===n||null===n.return){Ml=1,Ll=t,Dl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ga(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Ml&&(Ml=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}Su(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function gu(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Vl)||lu(Nl,Pl)}function yu(e,t){var n=Al;Al|=2;var r=mu();for(Nl===e&&Pl===t||(Kl=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Ss(),Al=n,Tl.current=r,null!==Dl)throw Error(s(261));return Nl=null,Pl=0,Ml}function vu(){for(;null!==Dl;)wu(Dl)}function bu(){for(;null!==Dl&&!Ye();)wu(Dl)}function wu(e){var t=Il(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Su(e):Dl=t,kl.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ha(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function _u(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Eu()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Dl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Nu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(S){xu(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Xe(),Al=l,bt=a,Cl.transition=o}else e.current=n;if(Hl&&(Hl=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Xl)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Ui()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function Eu(){if(null!==Yl){var e=wt(Xl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($a=c;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(ol(h),h===c){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var b=e.current;for($a=b;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){xu(l,l.return,_)}if(l===a){$a=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,$a=S;break e}$a=l.return}}if(Al=i,Ui(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Iu(e,t,n){e=Rs(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function xu(e,t,n){if(3===e.tag)Iu(e,e,n);else for(;null!==t;){if(3===t.tag){Iu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Rs(t,e=ma(t,e=ca(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ml||3===Ml&&(130023424&Pl)===Pl&&500>Je()-Ul?fu(e,0):jl|=n),iu(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=As(e,t))&&(yt(e,t,n),iu(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),ku(e,n)}function Nu(e,t){return We(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Du(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ou(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lu(n.children,i,o,t);case I:a=8,i|=8;break;case x:return(e=Pu(12,n,t,2|i)).elementType=x,e.lanes=o,e;case A:return(e=Pu(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pu(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case C:a=11;break e;case D:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function ju(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,s,o,a,l){return e=new zu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Uu(e){if(!e)return ki;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=Bu(n,r,!0,e,0,s,0,a,l)).context=Uu(null),n=e.current,(s=Os(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Rs(n,s,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Ku(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rs(i,t,o))&&(ru(e,i,o,s),Ms(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ti(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ga(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&$i(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=gs(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Va(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Os(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=xs(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Is(t,n),qs(t,r,i),Gs(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Hu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gu(o);a.call(e)}}Ku(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[pi]=o.current,Ur(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gu(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[pi]=l.current,Ur(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}Xu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ku(e,t,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[pi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Je()),0===(6&Al)&&(ql=Je()+500,Ui()))}break;case 13:hu((function(){var t=As(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Wu(e,1)}},_t=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)ru(t,e,134217728,tu());Wu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=As(e,t);if(null!==n)ru(n,e,t,tu());Wu(e,t)}},It=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));W(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cu,Ae=hu;var tc={usingClientEntryPoint:!1,Events:[bi,wi,Si,Te,ke,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(s(299));var n=!1,r="",i=Hu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Hu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.jsx=u,t.jsxs=u},117:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,S(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",S(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=A(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!I.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{e.exports=n(117)},184:(e,t,n)=>{e.exports=n(374)},813:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,O(_);else{var t=r(c);null!==t&&R(S,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&R(S,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,x=null,T=-1,k=5,C=-1;function A(){return!(t.unstable_now()-C<k)}function N(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?E():(I=!1,x=null)}}else I=!1}if("function"===typeof b)E=function(){b(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){y(N,0)};function O(e){x=e,I||(I=!0,E())}function R(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,R(S,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{e.exports=n(813)},637:(e,t,n)=>{var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==c&&c(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,c]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},995:(e,t,n)=>{e.exports=n(637)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>Bt,SDK_VERSION:()=>Hn,_DEFAULT_ENTRY_NAME:()=>Ln,_addComponent:()=>zn,_addOrOverwriteComponent:()=>Bn,_apps:()=>Vn,_clearComponents:()=>Gn,_components:()=>jn,_getProvider:()=>qn,_registerComponent:()=>Un,_removeServiceInstance:()=>Kn,deleteApp:()=>Zn,getApp:()=>Xn,getApps:()=>Jn,initializeApp:()=>Yn,onLog:()=>er,registerVersion:()=>$n,setLogLevel:()=>tr});var t=n(791),r=n(250),i=n(995),s=t,o=Symbol.for("react-redux-context"),a="undefined"!==typeof globalThis?globalThis:{};function l(){var e;if(!s.createContext)return{};const t=null!==(e=a[o])&&void 0!==e?e:a[o]=new Map;let n=t.get(s.createContext);return n||(n=s.createContext(null),t.set(s.createContext,n)),n}var u=l(),c=()=>{throw new Error("uSES not initialized!")};function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function(){return s.useContext(e)}}var d=h(),f=c,p=(e,t)=>e===t;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?d:h(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=p,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:a,getServerState:l,stabilityCheck:u,identityFunctionCheck:c}=t(),h=(s.useRef(!0),s.useCallback({[e.name]:t=>e(t)}[e.name],[e,u,i.stabilityCheck])),d=f(a.addNestedSub,o.getState,l||o.getState,h,r);return s.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var g=m();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function y(e){e()}var v={notify(){},get:()=>[]};function b(e,t){let n,r=v,i=0,s=!1;function o(){u.onStateChange&&u.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){y((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=v)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return u}var w=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?s.useLayoutEffect:s.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var S=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:a="once"}=e;const l=s.useMemo((()=>{const e=b(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:a}}),[t,i,o,a]),c=s.useMemo((()=>t.getState()),[t]);w((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,c]);const h=n||u;return s.createElement(h.Provider,{value:l},r)};function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?d:h(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var E=_();function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?E:_(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var x,T=I();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:String(t)}function A(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}x=i.useSyncExternalStoreWithSelector,f=x,(e=>{e})(t.useSyncExternalStore);var N=Symbol.for("immer-nothing"),D=Symbol.for("immer-draftable"),P=Symbol.for("immer-state");function O(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var R=Object.getPrototypeOf;function M(e){return!!e&&!!e[P]}function L(e){var t;return!!e&&(V(e)||Array.isArray(e)||!!e[D]||!(null===(t=e.constructor)||void 0===t||!t[D])||q(e)||K(e))}var F=Object.prototype.constructor.toString();function V(e){if(!e||"object"!==typeof e)return!1;const t=R(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===F}function j(e,t){0===z(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function z(e){const t=e[P];return t?t.type_:Array.isArray(e)?1:q(e)?2:K(e)?3:0}function B(e,t){return 2===z(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){const r=z(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function q(e){return e instanceof Map}function K(e){return e instanceof Set}function G(e){return e.copy_||e.base_}function Q(e,t){if(q(e))return new Map(e);if(K(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&V(e)){if(!R(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[P];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],s=n[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(R(e),n)}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Y(e)||M(e)||!L(e)||(z(e)>1&&(e.set=e.add=e.clear=e.delete=H),Object.freeze(e),t&&j(e,((e,t)=>W(t,!0)))),e}function H(){O(2)}function Y(e){return Object.isFrozen(e)}var X,J={};function Z(e){const t=J[e];return t||O(0),t}function $(){return X}function ee(e,t){t&&(Z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function te(e){ne(e),e.drafts_.forEach(ie),e.drafts_=null}function ne(e){e===X&&(X=e.parent_)}function re(e){return X={drafts_:[],parent_:X,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ie(e){const t=e[P];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function se(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[P].modified_&&(te(t),O(4)),L(e)&&(e=oe(t,e),t.parent_||le(t,e)),t.patches_&&Z("Patches").generateReplacementPatches_(n[P].base_,e,t.patches_,t.inversePatches_)):e=oe(t,n,[]),te(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==N?e:void 0}function oe(e,t,n){if(Y(t))return t;const r=t[P];if(!r)return j(t,((i,s)=>ae(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return le(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),j(i,((i,o)=>ae(e,r,t,i,o,n,s))),le(e,t,!1),n&&e.patches_&&Z("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ae(e,t,n,r,i,s,o){if(M(i)){const o=oe(e,i,s&&t&&3!==t.type_&&!B(t.assigned_,r)?s.concat(r):void 0);if(U(n,r,o),!M(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(L(i)&&!Y(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;oe(e,i),t&&t.scope_.parent_||le(e,i)}}function le(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W(t,n)}var ue={get(e,t){if(t===P)return e;const n=G(e);if(!B(n,t))return function(e,t,n){var r;const i=de(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!L(r)?r:r===he(e.base_,t)?(pe(e),e.copy_[t]=me(r,e)):r},has:(e,t)=>t in G(e),ownKeys:e=>Reflect.ownKeys(G(e)),set(e,t,n){const r=de(G(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=he(G(e),t),i=null===r||void 0===r?void 0:r[P];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||B(e.base_,t)))return!0;pe(e),fe(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==he(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,pe(e),fe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=G(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){O(11)},getPrototypeOf:e=>R(e.base_),setPrototypeOf(){O(12)}},ce={};function he(e,t){const n=e[P];return(n?G(n):e)[t]}function de(e,t){if(!(t in e))return;let n=R(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=R(n)}}function fe(e){e.modified_||(e.modified_=!0,e.parent_&&fe(e.parent_))}function pe(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}j(ue,((e,t)=>{ce[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ce.deleteProperty=function(e,t){return ce.set.call(this,e,t,void 0)},ce.set=function(e,t,n){return ue.set.call(this,e[0],t,n,e[0])};function me(e,t){const n=q(e)?Z("MapSet").proxyMap_(e,t):K(e)?Z("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ue;n&&(i=[r],s=ce);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:$()).drafts_.push(n),n}function ge(e){return M(e)||O(10),ye(e)}function ye(e){if(!L(e)||Y(e))return e;const t=e[P];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Q(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Q(e,!0);return j(n,((e,t)=>{U(n,e,ye(t))})),t&&(t.finalized_=!1),n}var ve=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&O(6),void 0!==n&&"function"!==typeof n&&O(7),L(e)){const i=re(this),s=me(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?te(i):ne(i)}return ee(i,n),se(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===N&&(r=void 0),this.autoFreeze_&&W(r,!0),n){const t=[],i=[];Z("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}O(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){L(e)||O(8),M(e)&&(e=ge(e));const t=re(this),n=me(e,void 0);return n[P].isManual_=!0,ne(t),n}finishDraft(e,t){const n=e&&e[P];n&&n.isManual_||O(9);const{scope_:r}=n;return ee(r,t),se(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Z("Patches").applyPatches_;return M(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},be=ve.produce;ve.produceWithPatches.bind(ve),ve.setAutoFreeze.bind(ve),ve.setUseStrictShallowCopy.bind(ve),ve.applyPatches.bind(ve),ve.createDraft.bind(ve),ve.finishDraft.bind(ve);function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Se=e=>Array.isArray(e)?e:[e];function _e(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Ee="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Ie=0,xe=1;function Te(){return{s:Ie,v:void 0,o:null,p:null}}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Te();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=Te(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=Te(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===xe?l=t.v:(l=e.apply(null,arguments),s++),a.s=xe,r){var u,c,h;const e=null!==(u=null===(c=i)||void 0===c||null===(h=c.deref)||void 0===h?void 0:h.call(c))&&void 0!==u?u:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Ee(l):l}return a.v=l,l}return o.clearCache=()=>{n=Te(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),we(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const u={...i,...a},{memoize:c,memoizeOptions:h=[],argsMemoize:d=ke,argsMemoizeOptions:f=[],devModeChecks:p={}}=u,m=Se(h),g=Se(f),y=_e(t),v=c((function(){return s++,l.apply(null,arguments)}),...m);const b=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(b,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:c,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var Ae=Ce(ke),Ne=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Ne});function De(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Pe=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Oe=()=>Math.random().toString(36).substring(7).split("").join("."),Re={INIT:"@@redux/INIT".concat(Oe()),REPLACE:"@@redux/REPLACE".concat(Oe()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Oe())};function Me(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Le(e,t,n){if("function"!==typeof e)throw new Error(De(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(De(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(De(1));return n(Le)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function c(){if(l)throw new Error(De(3));return i}function h(e){if("function"!==typeof e)throw new Error(De(4));if(l)throw new Error(De(5));let t=!0;u();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(De(6));t=!1,u(),o.delete(n),s=null}}}function d(e){if(!Me(e))throw new Error(De(7));if("undefined"===typeof e.type)throw new Error(De(8));if("string"!==typeof e.type)throw new Error(De(17));if(l)throw new Error(De(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:Re.INIT});return{dispatch:d,subscribe:h,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(De(10));r=e,d({type:Re.REPLACE})},[Pe]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(De(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[Pe](){return this}}}}}function Fe(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Re.INIT}))throw new Error(De(12));if("undefined"===typeof n(void 0,{type:Re.PROBE_UNKNOWN_ACTION()}))throw new Error(De(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],u=e[a],c=l(u,t);if("undefined"===typeof c){t&&t.type;throw new Error(De(14))}o[a]=c,s=s||c!==u}return s=s||r.length!==Object.keys(e).length,s?o:e}}function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function je(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var ze=je(),Be=je,Ue=(function(){const e=Ce(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(M(e)?ge(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(ke),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ve:Ve.apply(null,arguments)}),qe=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function Ke(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Et(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Me(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var Ge=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Qe(e){return L(e)?be(e,(()=>{})):e}function We(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Et(10));const r=n.insert(t,e);return e.set(t,r),r}var He="RTK_autoBatch",Ye=e=>t=>{setTimeout(t,e)},Xe="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ye(10),Je=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new Ge(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Xe:"callback"===e.type?e.queueNotification:Ye(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[He]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Ze(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Et(28));if(r in t)throw new Error(Et(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var $e=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},et=(e,t)=>qe(e)?e.match(t):e(t);function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>et(t,e)))}var nt=["name","message","stack","code"],rt=class{constructor(e,t){A(this,"_type",void 0),this.payload=e,this.meta=t}},it=class{constructor(e,t){A(this,"_type",void 0),this.payload=e,this.meta=t}},st=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of nt)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},ot=(()=>{function e(e,t,n){const r=Ke(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),i=Ke(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),s=Ke(e+"/rejected",((e,t,r,i,s)=>({payload:i,error:(n&&n.serializeError||st)(e||"Rejected"),meta:{...s||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)}})));return Object.assign((function(e){return(o,a,l)=>{const u=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):$e(),c=new AbortController;let h,d;function f(e){d=e,c.abort()}const p=async function(){let p;try{var m,g;let s=null===n||void 0===n||null===(m=n.condition)||void 0===m?void 0:m.call(n,e,{getState:a,extra:l});if(null!==(y=s)&&"object"===typeof y&&"function"===typeof y.then&&(s=await s),!1===s||c.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise(((e,t)=>{h=()=>{t({name:"AbortError",message:d||"Aborted"})},c.signal.addEventListener("abort",h)}));o(i(u,e,null===n||void 0===n||null===(g=n.getPendingMeta)||void 0===g?void 0:g.call(n,{requestId:u,arg:e},{getState:a,extra:l}))),p=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:a,extra:l,requestId:u,signal:c.signal,abort:f,rejectWithValue:(e,t)=>new rt(e,t),fulfillWithValue:(e,t)=>new it(e,t)})).then((t=>{if(t instanceof rt)throw t;return t instanceof it?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(v){p=v instanceof rt?s(null,u,e,v.payload,v.meta):s(v,u,e)}finally{h&&c.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&s.match(p)&&p.meta.condition||o(p),p}();return Object.assign(p,{abort:f,requestId:u,arg:e,unwrap:()=>p.then(at)})}}),{pending:i,rejected:s,fulfilled:r,settled:tt(s,r),typePrefix:e})}return e.withTypes=()=>e,e})();function at(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var lt=Symbol.for("rtk-slice-createasyncthunk");function ut(e,t){return"".concat(e,"/").concat(t)}function ct(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return i.unwrapped=e,i}var ht=function(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[lt];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Et(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Et(12));if(n in o.sliceCaseReducersByType)throw new Error(Et(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Ze(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=Ze(t);if(function(e){return"function"===typeof e}(e))n=()=>Qe(e());else{const t=Qe(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(M(e)){const r=n(e,t);return void 0===r?e:r}if(L(e))return be(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Et(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:ut(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Et(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?Ke(s,i):Ke(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Et(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:u,settled:c,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);u&&n.addCase(d.rejected,u);c&&n.addMatcher(d.settled,c);n.exposeCaseReducer(s,{fulfilled:a||dt,pending:l||dt,rejected:u||dt,settled:c||dt})}(o,s,a,n)}));const u=e=>e,c=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const r=We(c,n,{insert:()=>new WeakMap});return We(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=ct(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...m,...p(i,!0)}}};return m}}();function dt(){}var ft="listener",pt="completed",mt="cancelled",gt=("task-".concat(mt),"task-".concat(pt),"".concat(ft,"-").concat(mt),"".concat(ft,"-").concat(pt),(e,t)=>{if("function"!==typeof e)throw new Error(Et(32))});var{assign:yt}=Object,vt="listenerMiddleware",bt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Ke(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Et(21));return gt(s),{predicate:i,type:t,effect:s}},wt=Object.assign((e=>{const{type:t,predicate:n,effect:r}=bt(e);return{id:$e(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Et(22))}}}),{withTypes:()=>wt}),St=Object.assign(Ke("".concat(vt,"/add")),{withTypes:()=>St}),_t=(Ke("".concat(vt,"/removeAll")),Object.assign(Ke("".concat(vt,"/remove")),{withTypes:()=>_t}));Symbol.for("rtk-state-proxy-original");function Et(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const It={numOfCars:0},xt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new kt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class kt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ct=function(e){return function(e){const t=xt(e);return Tt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},At=function(e){try{return Tt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Nt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nt(e[n],t[n]));return e}const Dt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Pt=()=>{try{return Dt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCPYZS7BZ56en6ijZcmOyg28BhWJ-GOkYw",REACT_APP_FIREBASE_AUTH_DOMAIN:"train-to-cloud-city-5.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"train-to-cloud-city-5",REACT_APP_FIREBASE_STORAGE_BUCKET:"train-to-cloud-city-5.appspot.com",REACT_APP_FIREBASE_MSG_SENDER_ID:"1016980810684",REACT_APP_FIREBASE_APP_ID:"1:1016980810684:web:c70a094fff44ef39ca19b9",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-TN9ZESGEWG"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&At(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ot=()=>{var e;return null===(e=Pt())||void 0===e?void 0:e.config};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Mt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Lt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ft(){return!function(){var e;const t=null===(e=Pt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vt(){try{return"object"===typeof indexedDB}catch(e){return!1}}function jt(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function zt(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class Bt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}}class Ut{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(qt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Bt(n,s,t)}}const qt=/\{\$([^}]+)}/g;function Kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Qt(n)&&Qt(s)){if(!Gt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qt(e){return null!==e&&"object"===typeof e}function Wt(e,t){const n=new Ht(e,t);return n.subscribe.bind(n)}class Ht{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Yt),void 0===r.error&&(r.error=Yt),void 0===r.complete&&(r.complete=Yt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Yt(){}const Xt=1e3,Jt=2,Zt=144e5,$t=.5;function en(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xt)*Math.pow(t,e),r=Math.round($t*n*(Math.random()-.5)*2);return Math.min(Zt,n+r)}function tn(e){return e&&e._delegate?e._delegate:e}class nn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rn="[DEFAULT]";class sn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Rt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===rn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.component?this.component.multipleInstances?e:rn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class on{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const an=[];var ln;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ln||(ln={}));const un={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},cn=ln.INFO,hn={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},dn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=hn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class fn{constructor(e){this.name=e,this._logLevel=cn,this._logHandler=dn,this._userLogHandler=null,an.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?un[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...t),this._logHandler(this,ln.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...t),this._logHandler(this,ln.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.INFO,...t),this._logHandler(this,ln.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.WARN,...t),this._logHandler(this,ln.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...t),this._logHandler(this,ln.ERROR,...t)}}const pn=(e,t)=>t.some((t=>e instanceof t));let mn,gn;const yn=new WeakMap,vn=new WeakMap,bn=new WeakMap,wn=new WeakMap,Sn=new WeakMap;let _n={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function En(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gn||(gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tn(this),n),xn(yn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xn(e.apply(Tn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Tn(this),t,...r);return bn.set(s,t.sort?t.sort():[t]),xn(s)}}function In(e){return"function"===typeof e?En(e):(e instanceof IDBTransaction&&function(e){if(vn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));vn.set(e,t)}(e),pn(e,mn||(mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,_n):e)}function xn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(xn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&yn.set(t,e)})).catch((()=>{})),Sn.set(t,e),t}(e);if(wn.has(e))return wn.get(e);const t=In(e);return t!==e&&(wn.set(e,t),Sn.set(t,e)),t}const Tn=e=>Sn.get(e);function kn(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=xn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(xn(o.result),e.oldVersion,e.newVersion,xn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Cn=["get","getKey","getAll","getAllKeys","count"],An=["put","add","delete","clear"],Nn=new Map;function Dn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Nn.get(t))return Nn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=An.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Cn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Nn.set(t,s),s}_n=(e=>({...e,get:(t,n,r)=>Dn(t,n)||e.get(t,n,r),has:(t,n)=>!!Dn(t,n)||e.has(t,n)}))(_n);class Pn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const On="@firebase/app",Rn="0.9.28",Mn=new fn("@firebase/app"),Ln="[DEFAULT]",Fn={[On]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vn=new Map,jn=new Map;function zn(e,t){try{e.container.addComponent(t)}catch(n){Mn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bn(e,t){e.container.addOrOverwriteComponent(t)}function Un(e){const t=e.name;if(jn.has(t))return Mn.debug("There were multiple attempts to register component ".concat(t,".")),!1;jn.set(t,e);for(const n of Vn.values())zn(n,e);return!0}function qn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln;qn(e,t).clearInstance(n)}function Gn(){jn.clear()}const Qn=new Ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Hn="10.8.1";function Yn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ln,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(n||(n=Ot()),!n)throw Qn.create("no-options");const s=Vn.get(i);if(s){if(Gt(n,s.options)&&Gt(r,s.config))return s;throw Qn.create("duplicate-app",{appName:i})}const o=new on(i);for(const l of jn.values())o.addComponent(l);const a=new Wn(n,r,o);return Vn.set(i,a),a}function Xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;const t=Vn.get(e);if(!t&&e===Ln&&Ot())return Yn();if(!t)throw Qn.create("no-app",{appName:e});return t}function Jn(){return Array.from(Vn.values())}async function Zn(e){const t=e.name;Vn.has(t)&&(Vn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function $n(e,t,n){var r;let i=null!==(r=Fn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Mn.warn(e.join(" "))}Un(new nn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function er(e,t){if(null!==e&&"function"!==typeof e)throw Qn.create("invalid-log-argument");!function(e,t){for(const n of an){let r=null;t&&t.level&&(r=un[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ln[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function tr(e){var t;t=e,an.forEach((e=>{e.setLogLevel(t)}))}const nr="firebase-heartbeat-database",rr=1,ir="firebase-heartbeat-store";let sr=null;function or(){return sr||(sr=kn(nr,rr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ir)}catch(n){console.warn(n)}}}).catch((e=>{throw Qn.create("idb-open",{originalErrorMessage:e.message})}))),sr}async function ar(e,t){try{const n=(await or()).transaction(ir,"readwrite"),r=n.objectStore(ir);await r.put(t,lr(e)),await n.done}catch(n){if(n instanceof Bt)Mn.warn(n.message);else{const e=Qn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Mn.warn(e.message)}}}function lr(e){return"".concat(e.name,"!").concat(e.options.appId)}class ur{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cr();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=cr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),dr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ct(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function cr(){return(new Date).toISOString().substring(0,10)}class hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Vt()&&jt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await or()).transaction(ir),n=await t.objectStore(ir).get(lr(e));return await t.done,n}catch(t){if(t instanceof Bt)Mn.warn(t.message);else{const e=Qn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Mn.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dr(e){return Ct(JSON.stringify({version:2,heartbeats:e})).length}var fr;fr="",Un(new nn("platform-logger",(e=>new Pn(e)),"PRIVATE")),Un(new nn("heartbeat",(e=>new ur(e)),"PRIVATE")),$n(On,Rn,fr),$n(On,Rn,"esm2017"),$n("fire-js","");class pr{constructor(e,t){this._delegate=e,this.firebase=t,zn(e,new nn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Zn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){zn(this._delegate,e)}_addOrOverwriteComponent(e){Bn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mr=new Ut("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const gr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Yn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Kt(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:$n,setLogLevel:tr,onLog:er,apps:null,SDK_VERSION:Hn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Un(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw mr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Nt(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Kt(n,e=e||Ln))throw mr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(pr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Nt(n,e)},createSubscribe:Wt,ErrorFactory:Ut,deepExtend:Nt}),n}(),yr=new fn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&yr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vr=gr;!function(e){$n("@firebase/app-compat","0.2.28",e)}();vr.registerVersion("firebase","10.8.1","app-compat");const br="@firebase/installations",wr="0.6.5",Sr=1e4,_r="w:".concat(wr),Er="FIS_v2",Ir="https://firebaseinstallations.googleapis.com/v1",xr=36e5,Tr=new Ut("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kr(e){return e instanceof Bt&&e.code.includes("request-failed")}function Cr(e){let{projectId:t}=e;return"".concat(Ir,"/projects/").concat(t,"/installations")}function Ar(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Nr(e,t){const n=(await t.json()).error;return Tr.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Dr(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pr(e,t){let{refreshToken:n}=t;const r=Dr(e);return r.append("Authorization",function(e){return"".concat(Er," ").concat(e)}(n)),r}async function Or(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Rr(e){return new Promise((t=>{setTimeout(t,e)}))}const Mr=/^[cdef][\w-]{21}$/,Lr="";function Fr(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Mr.test(t)?t:Lr}catch(e){return Lr}}function Vr(e){return"".concat(e.appName,"!").concat(e.appId)}const jr=new Map;function zr(e,t){const n=Vr(e);Br(n,t),function(e,t){const n=qr();n&&n.postMessage({key:e,fid:t});Kr()}(n,t)}function Br(e,t){const n=jr.get(e);if(n)for(const r of n)r(t)}let Ur=null;function qr(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=e=>{Br(e.data.key,e.data.fid)}),Ur}function Kr(){0===jr.size&&Ur&&(Ur.close(),Ur=null)}const Gr="firebase-installations-database",Qr=1,Wr="firebase-installations-store";let Hr=null;function Yr(){return Hr||(Hr=kn(Gr,Qr,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wr)}})),Hr}async function Xr(e,t){const n=Vr(e),r=(await Yr()).transaction(Wr,"readwrite"),i=r.objectStore(Wr),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||zr(e,t.fid),t}async function Jr(e){const t=Vr(e),n=(await Yr()).transaction(Wr,"readwrite");await n.objectStore(Wr).delete(t),await n.done}async function Zr(e,t){const n=Vr(e),r=(await Yr()).transaction(Wr,"readwrite"),i=r.objectStore(Wr),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||zr(e,o.fid),o}async function $r(e){let t;const n=await Zr(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Fr(),registrationStatus:0};return ni(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Tr.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Cr(n),o=Dr(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:Er,appId:n.appId,sdkVersion:_r},u={method:"POST",headers:o,body:JSON.stringify(l)},c=await Or((()=>fetch(s,u)));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ar(e.authToken)}}throw await Nr("Create Installation",c)}(e,t);return Xr(e.appConfig,n)}catch(n){throw kr(n)&&409===n.customData.serverCode?await Jr(e.appConfig):await Xr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ei(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===Lr?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ei(e){let t=await ti(e.appConfig);for(;1===t.registrationStatus;)await Rr(100),t=await ti(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await $r(e);return n||t}return t}function ti(e){return Zr(e,(e=>{if(!e)throw Tr.create("installation-not-found");return ni(e)}))}function ni(e){return 1===(t=e).registrationStatus&&t.registrationTime+Sr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ri(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(Cr(e),"/").concat(n,"/authTokens:generate")}(n,t),s=Pr(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:_r,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Or((()=>fetch(i,l)));if(u.ok){return Ar(await u.json())}throw await Nr("Generate Auth Token",u)}async function ii(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Zr(e.appConfig,(r=>{if(!oi(r))throw Tr.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+xr}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await si(e.appConfig);for(;1===n.authToken.requestStatus;)await Rr(100),n=await si(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ii(e,t):r}(e,n),r;{if(!navigator.onLine)throw Tr.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await ri(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Xr(e.appConfig,r),n}catch(n){if(!kr(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Xr(e.appConfig,n)}else await Jr(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function si(e){return Zr(e,(e=>{if(!oi(e))throw Tr.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Sr<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function oi(e){return void 0!==e&&2===e.registrationStatus}async function ai(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await $r(e);t&&await t}(n);return(await ii(n,t)).token}function li(e){return Tr.create("missing-app-config-values",{valueName:e})}const ui="installations",ci=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw li("App Configuration");if(!e.name)throw li("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw li(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:qn(t,"heartbeat"),_delete:()=>Promise.resolve()}},hi=e=>{const t=qn(e.getProvider("app").getImmediate(),ui).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await $r(t);return r?r.catch(console.error):ii(t).catch(console.error),n.fid}(t),getToken:e=>ai(t,e)}};Un(new nn(ui,ci,"PUBLIC")),Un(new nn("installations-internal",hi,"PRIVATE")),$n(br,wr),$n(br,wr,"esm2017");const di="analytics",fi="firebase_id",pi="origin",mi=6e4,gi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yi="https://www.googletagmanager.com/gtag/js",vi=new fn("@firebase/analytics"),bi=new Ut("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wi(e){if(!e.startsWith(yi)){const t=bi.create("invalid-gtag-resource",{gtagURL:e});return vi.warn(t.message),""}return e}function Si(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function _i(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:wi}),r=document.createElement("script"),i="".concat(yi,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ei(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Si(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){vi.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Si(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){vi.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=o;e("consent","update",t)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){vi.error(l)}}}const Ii=30;const xi=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ti(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ki(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw bi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw bi.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ai;return setTimeout((async()=>{a.abort()}),void 0!==n?n:mi),Ci({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Ci(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xi;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(bi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(u){if(l)return vi.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===u||void 0===u?void 0:u.message,"]")),{appId:a,measurementId:l};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ti(r)},s=gi.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw bi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(u){const t=u;if(!function(e){if(!(e instanceof Bt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return vi.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:l};throw u}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?en(i,s.intervalMillis,Ii):en(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,c),vi.debug("Calling attemptFetch again in ".concat(r," millis")),Ci(e,c,n,s)}}class Ai{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ni,Di;function Pi(e){Di=e}function Oi(e){Ni=e}async function Ri(e,t,n,r,i,s,o){var a;const l=ki(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&vi.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>vi.error(e))),t.push(l);const u=async function(){if(!Vt())return vi.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await jt()}catch(e){return vi.warn(bi.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(yi)&&n.src.includes(e))return n;return null})(s)||_i(s,c.measurementId),Di&&(i("consent","default",Di),Pi(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[pi]="firebase",d.update=!0,null!=h&&(d[fi]=h),i("config",c.measurementId,d),Ni&&(i("set",Ni),Oi(void 0)),c.measurementId}class Mi{constructor(e){this.app=e}_delete(){return delete Li[this.app.options.appId],Promise.resolve()}}let Li={},Fi=[];const Vi={};let ji,zi,Bi="dataLayer",Ui="gtag",qi=!1;function Ki(e){if(qi)throw bi.create("already-initialized");e.dataLayerName&&(Bi=e.dataLayerName),e.gtagName&&(Ui=e.gtagName)}function Gi(e,t,n){!function(){const e=[];if(Lt()&&e.push("This is a browser extension environment."),zt()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=bi.create("invalid-analytics-context",{errorInfo:t});vi.warn(n.message)}}();const r=e.options.appId;if(!r)throw bi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw bi.create("no-api-key");vi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Li[r])throw bi.create("already-exists",{id:r});if(!qi){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Bi);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Ei(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Li,Fi,Vi,Bi,Ui);zi=e,ji=t,qi=!0}Li[r]=Ri(e,Fi,Vi,t,ji,Bi,n);return new Mi(e)}async function Qi(){if(Lt())return!1;if(!zt())return!1;if(!Vt())return!1;try{return await jt()}catch(e){return!1}}function Wi(e,t,n){e=tn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}(zi,Li[e.app.options.appId],t,n).catch((e=>vi.error(e)))}function Hi(e,t,n){e=tn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(zi,Li[e.app.options.appId],t,n).catch((e=>vi.error(e)))}function Yi(e,t,n){e=tn(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(zi,Li[e.app.options.appId],t,n).catch((e=>vi.error(e)))}function Xi(e,t){e=tn(e),async function(e,t){const n=await e;window["ga-disable-".concat(n)]=!t}(Li[e.app.options.appId],t).catch((e=>vi.error(e)))}function Ji(e,t,n,r){e=tn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(zi,Li[e.app.options.appId],t,n,r).catch((e=>vi.error(e)))}const Zi="@firebase/analytics",$i="0.10.1";Un(new nn(di,((e,t)=>{let{options:n}=t;return Gi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Un(new nn("analytics-internal",(function(e){try{const t=e.getProvider(di).getImmediate();return{logEvent:(e,n,r)=>Ji(t,e,n,r)}}catch(t){throw bi.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),$n(Zi,$i),$n(Zi,$i,"esm2017");class es{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,n){Ji(this._delegate,e,t,n)}setCurrentScreen(e,t){Wi(this._delegate,e,t)}setUserId(e,t){Hi(this._delegate,e,t)}setUserProperties(e,t){Yi(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){Xi(this._delegate,e)}}var ts;!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(ts||(ts={}));const ns=e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new es(t,n)};!function(){const e={Analytics:es,settings:Ki,isSupported:Qi,EventName:ts};vr.INTERNAL.registerComponent(new nn("analytics-compat",ns,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),vr.registerVersion("@firebase/analytics-compat","0.2.7");var rs,is="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ss={},os=os||{},as=is||self;function ls(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function us(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var cs="closure_uid_"+(1e9*Math.random()>>>0),hs=0;function ds(e,t,n){return e.call.apply(e.bind,arguments)}function fs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ps(e,t,n){return(ps=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ds:fs).apply(null,arguments)}function ms(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ys(){this.s=this.s,this.o=this.o}ys.prototype.s=!1,ys.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,cs)&&e[cs]||(e[cs]=++hs))},ys.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function bs(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ws(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ls(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ss(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ss.prototype.h=function(){this.defaultPrevented=!0};var _s=function(){if(!as.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};as.addEventListener("test",e,t),as.removeEventListener("test",e,t)}catch(n){}return e}();function Es(e){return/^[\s\xa0]*$/.test(e)}function Is(){var e=as.navigator;return e&&(e=e.userAgent)?e:""}function xs(e){return-1!=Is().indexOf(e)}function Ts(e){return Ts[" "](e),e}Ts[" "]=function(){};var ks,Cs,As=xs("Opera"),Ns=xs("Trident")||xs("MSIE"),Ds=xs("Edge"),Ps=Ds||Ns,Os=xs("Gecko")&&!(-1!=Is().toLowerCase().indexOf("webkit")&&!xs("Edge"))&&!(xs("Trident")||xs("MSIE"))&&!xs("Edge"),Rs=-1!=Is().toLowerCase().indexOf("webkit")&&!xs("Edge");function Ms(){var e=as.document;return e?e.documentMode:void 0}e:{var Ls="",Fs=function(){var e=Is();return Os?/rv:([^\);]+)(\)|;)/.exec(e):Ds?/Edge\/([\d\.]+)/.exec(e):Ns?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Rs?/WebKit\/(\S+)/.exec(e):As?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Fs&&(Ls=Fs?Fs[1]:""),Ns){var Vs=Ms();if(null!=Vs&&Vs>parseFloat(Ls)){ks=String(Vs);break e}}ks=Ls}if(as.document&&Ns){var js=Ms();Cs=js||(parseInt(ks,10)||void 0)}else Cs=void 0;var zs=Cs;function Bs(e,t){if(Ss.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Os){e:{try{Ts(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Us[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bs.$.h.call(this)}}gs(Bs,Ss);var Us={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),Ks=0;function Gs(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ks,this.fa=this.ia=!1}function Qs(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ws(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Hs(e){const t={};for(const n in e)t[n]=e[n];return t}const Ys="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xs(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Ys.length;t++)n=Ys[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Js(e){this.src=e,this.g={},this.h=0}function Zs(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=vs(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Qs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $s(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Js.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$s(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Gs(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var eo="closure_lm_"+(1e6*Math.random()|0),to={};function no(e,t,n,r,i){if(r&&r.once)return io(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)no(e,t[s],n,r,i);return null}return n=ho(n),e&&e[qs]?e.O(t,n,us(r)?!!r.capture:!!r,i):ro(e,t,n,!1,r,i)}function ro(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=us(i)?!!i.capture:!!i,a=uo(e);if(a||(e[eo]=a=new Js(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=lo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_s||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ao(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function io(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)io(e,t[s],n,r,i);return null}return n=ho(n),e&&e[qs]?e.P(t,n,us(r)?!!r.capture:!!r,i):ro(e,t,n,!0,r,i)}function so(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)so(e,t[s],n,r,i);else r=us(r)?!!r.capture:!!r,n=ho(n),e&&e[qs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$s(s=e.g[t],n,r,i))&&(Qs(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=uo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$s(t,n,r,i)),(n=-1<e?t[e]:null)&&oo(n))}function oo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[qs])Zs(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ao(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=uo(t))?(Zs(n,e),0==n.h&&(n.src=null,t[eo]=null)):Qs(e)}}}function ao(e){return e in to?to[e]:to[e]="on"+e}function lo(e,t){if(e.fa)e=!0;else{t=new Bs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&oo(e),e=n.call(r,t)}return e}function uo(e){return(e=e[eo])instanceof Js?e:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function ho(e){return"function"===typeof e?e:(e[co]||(e[co]=function(t){return e.handleEvent(t)}),e[co])}function fo(){ys.call(this),this.i=new Js(this),this.S=this,this.J=null}function po(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ss(t,e);else if(t instanceof Ss)t.target=t.target||e;else{var i=t;Xs(t=new Ss(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=mo(o,r,!0,t)&&i}if(i=mo(o=t.g=e,r,!0,t)&&i,i=mo(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=mo(o=t.g=n[s],r,!1,t)&&i}function mo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Zs(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}gs(fo,ys),fo.prototype[qs]=!0,fo.prototype.removeEventListener=function(e,t,n,r){so(this,e,t,n,r)},fo.prototype.N=function(){if(fo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qs(n[r]);delete t.g[e],t.h--}}this.J=null},fo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var go=as.JSON.stringify;function yo(){var e=Io;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var vo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new bo),(e=>e.reset()));class bo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wo(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function So(e){as.setTimeout((()=>{throw e}),0)}let _o,Eo=!1,Io=new class{constructor(){this.h=this.g=null}add(e,t){const n=vo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},xo=()=>{const e=as.Promise.resolve(void 0);_o=()=>{e.then(To)}};var To=()=>{for(var e;e=yo();){try{e.h.call(e.g)}catch(n){So(n)}var t=vo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Eo=!1};function ko(e,t){fo.call(this),this.h=e||1,this.g=t||as,this.j=ps(this.qb,this),this.l=Date.now()}function Co(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ao(e,t,n){if("function"===typeof e)n&&(e=ps(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ps(e.handleEvent,e)}return 2147483647<Number(t)?-1:as.setTimeout(e,t||0)}function No(e){e.g=Ao((()=>{e.g=null,e.i&&(e.i=!1,No(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}gs(ko,fo),(rs=ko.prototype).ga=!1,rs.T=null,rs.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),po(this,"tick"),this.ga&&(Co(this),this.start()))}},rs.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rs.N=function(){ko.$.N.call(this),Co(this),delete this.g};class Do extends ys{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:No(this)}N(){super.N(),this.g&&(as.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Po(e){ys.call(this),this.h=e,this.g={}}gs(Po,ys);var Oo=[];function Ro(e,t,n,r){Array.isArray(n)||(n&&(Oo[0]=n.toString()),n=Oo);for(var i=0;i<n.length;i++){var s=no(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Mo(e){Ws(e.g,(function(e,t){this.g.hasOwnProperty(t)&&oo(e)}),e),e.g={}}function Lo(){this.g=!0}function Fo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return go(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Po.prototype.N=function(){Po.$.N.call(this),Mo(this)},Po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lo.prototype.Ea=function(){this.g=!1},Lo.prototype.info=function(){};var Vo={},jo=null;function zo(){return jo=jo||new fo}function Bo(e){Ss.call(this,Vo.Ta,e)}function Uo(e){const t=zo();po(t,new Bo(t))}function qo(e,t){Ss.call(this,Vo.STAT_EVENT,e),this.stat=t}function Ko(e){const t=zo();po(t,new qo(t,e))}function Go(e,t){Ss.call(this,Vo.Ua,e),this.size=t}function Qo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return as.setTimeout((function(){e()}),t)}Vo.Ta="serverreachability",gs(Bo,Ss),Vo.STAT_EVENT="statevent",gs(qo,Ss),Vo.Ua="timingevent",gs(Go,Ss);var Wo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ho={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yo(){}function Xo(e){return e.h||(e.h=e.i())}function Jo(){}Yo.prototype.h=null;var Zo,$o={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ea(){Ss.call(this,"d")}function ta(){Ss.call(this,"c")}function na(){}function ra(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Po(this),this.P=sa,e=Ps?125:void 0,this.V=new ko(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}gs(ea,Ss),gs(ta,Ss),gs(na,Yo),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Zo=new na;var sa=45e3,oa={},aa={};function la(e,t,n){e.L=1,e.A=ka(_a(t)),e.u=n,e.S=!0,ua(e,null)}function ua(e,t){e.G=Date.now(),fa(e),e.B=_a(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),za(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ia,e.g=Bl(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Do(ps(e.Pa,e,e.g),e.O)),Ro(e.U,e.g,"readystatechange",e.nb),t=e.I?Hs(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Uo(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ca(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ha(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=da(e,n),r==aa){4==t&&(e.s=4,Ko(14),i=!1),Fo(e.j,e.m,null,"[Incomplete Response]");break}if(r==oa){e.s=4,Ko(15),Fo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fo(e.j,e.m,r,null),va(e,r)}ca(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ko(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ol(t),t.M=!0,Ko(11))):(Fo(e.j,e.m,n,"[Invalid Chunked Response]"),ya(e),ga(e))}function da(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?aa:(n=Number(t.substring(n,r)),isNaN(n)?oa:(r+=1)+n>t.length?aa:(t=t.slice(r,r+n),e.o=r+n,t))}function fa(e){e.Y=Date.now()+e.P,pa(e,e.P)}function pa(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Qo(ps(e.lb,e),t)}function ma(e){e.C&&(as.clearTimeout(e.C),e.C=null)}function ga(e){0==e.l.H||e.J||Ll(e.l,e)}function ya(e){ma(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Co(e.V),Mo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function va(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wa(n.i,e)))if(!e.K&&Wa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ml(n),xl(n)}Pl(n),Ko(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Qo(ps(n.ib,n),6e3));if(1>=Qa(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Vl(n,11)}else if((e.K||n.g==e)&&Ml(n),!Es(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ha(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ta(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=zl(r,r.J?r.pa:null,r.Y),o.K){Ya(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ma(a),fa(a)),r.g=o}else Dl(r);0<n.j.length&&kl(n)}else"stop"!=u[0]&&"close"!=u[0]||Vl(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Vl(n,7):Il(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Uo()}catch(u){}}function ba(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ls(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ls(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ls(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(rs=ra.prototype).setTimeout=function(e){this.P=e},rs.nb=function(e){e=e.target;const t=this.M;t&&3==vl(e)?t.l():this.Pa(e)},rs.Pa=function(e){try{if(e==this.g)e:{const c=vl(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Ps||this.g&&(this.h.h||this.g.ja()||bl(this.g)))){this.J||4!=c||7==t||Uo(),ma(this);var n=this.g.da();this.ca=n;t:if(ca(this)){var r=bl(this.g);e="";var i=r.length,s=4==vl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ya(this),ga(this);var o="";break t}this.h.i=new as.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Es(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Ko(12),ya(this),ga(this);break e}Fo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,n)}this.S?(ha(this,c,o),Ps&&this.i&&3==c&&(Ro(this.U,this.V,"tick",this.mb),this.V.start())):(Fo(this.j,this.m,o,null),va(this,o)),4==c&&ya(this),this.i&&!this.J&&(4==c?Ll(this.l,this):(this.i=!1,fa(this)))}else(function(e){const t={};e=(e.g&&2<=vl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Es(e[r]))continue;var n=wo(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ko(12)):(this.s=0,Ko(13)),ya(this),ga(this)}}}catch(c){}},rs.mb=function(){if(this.g){var e=vl(this.g),t=this.g.ja();this.o<t.length&&(ma(this),ha(this,e,t),this.i&&4!=e&&fa(this))}},rs.cancel=function(){this.J=!0,ya(this)},rs.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Uo(),Ko(17)),ya(this),this.s=2,ga(this)):pa(this,this.Y-e)};var wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Sa){this.h=e.h,Ea(this,e.j),this.s=e.s,this.g=e.g,Ia(this,e.m),this.l=e.l;var t=e.i,n=new La;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xa(this,n),this.o=e.o}else e&&(t=String(e).match(wa))?(this.h=!1,Ea(this,t[1]||"",!0),this.s=Ca(t[2]||""),this.g=Ca(t[3]||"",!0),Ia(this,t[4]),this.l=Ca(t[5]||"",!0),xa(this,t[6]||"",!0),this.o=Ca(t[7]||"")):(this.h=!1,this.i=new La(null,this.h))}function _a(e){return new Sa(e)}function Ea(e,t,n){e.j=n?Ca(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ia(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xa(e,t,n){t instanceof La?(e.i=t,function(e,t){t&&!e.j&&(Fa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Va(this,t),za(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Aa(t,Ra)),e.i=new La(t,e.h))}function Ta(e,t,n){e.i.set(t,n)}function ka(e){return Ta(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ca(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Aa(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Na),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Na(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Sa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Aa(t,Da,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Aa(t,Da,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Aa(n,"/"==n.charAt(0)?Oa:Pa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Aa(n,Ma)),e.join("")};var Da=/[#\/\?@]/g,Pa=/[#\?:]/g,Oa=/[#\?]/g,Ra=/[#\?@]/g,Ma=/#/g;function La(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Fa(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Va(e,t){Fa(e),t=Ba(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ja(e,t){return Fa(e),t=Ba(e,t),e.g.has(t)}function za(e,t,n){Va(e,t),0<n.length&&(e.i=null,e.g.set(Ba(e,t),bs(n)),e.h+=n.length)}function Ba(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rs=La.prototype).add=function(e,t){Fa(this),this.i=null,e=Ba(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rs.forEach=function(e,t){Fa(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},rs.ta=function(){Fa(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},rs.Z=function(e){Fa(this);let t=[];if("string"===typeof e)ja(this,e)&&(t=t.concat(this.g.get(Ba(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},rs.set=function(e,t){return Fa(this),this.i=null,ja(this,e=Ba(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rs.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},rs.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ua=class{constructor(e,t){this.g=e,this.map=t}};function qa(e){this.l=e||Ka,as.PerformanceNavigationTiming?e=0<(e=as.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(as.g&&as.g.Ka&&as.g.Ka()&&as.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ka=10;function Ga(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qa(e){return e.h?1:e.g?e.g.size:0}function Wa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ha(e,t){e.g?e.g.add(t):e.h=t}function Ya(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return bs(e.i)}qa.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ja,Za=class{stringify(e){return as.JSON.stringify(e,void 0)}parse(e){return as.JSON.parse(e,void 0)}};function $a(){this.g=new Za}function el(e,t,n){const r=n||"";try{ba(e,(function(e,n){let i=e;us(e)&&(i=go(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function tl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function nl(e){this.l=e.ec||null,this.j=e.ob||!1}function rl(e,t){fo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=il,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gs(nl,Yo),nl.prototype.g=function(){return new rl(this.l,this.j)},nl.prototype.i=(Ja={},function(){return Ja}),gs(rl,fo);var il=0;function sl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ol(e){e.readyState=4,e.l=null,e.j=null,e.A=null,al(e)}function al(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rs=rl.prototype).open=function(e,t){if(this.readyState!=il)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,al(this)},rs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||as).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},rs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ol(this)),this.readyState=il},rs.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof as.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},rs.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ol(this):al(this),3==this.readyState&&sl(this)}},rs.Za=function(e){this.g&&(this.response=this.responseText=e,ol(this))},rs.Ya=function(e){this.g&&(this.response=e,ol(this))},rs.ka=function(){this.g&&ol(this)},rs.setRequestHeader=function(e,t){this.v.append(e,t)},rs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rs.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ll=as.JSON.parse;function ul(e){fo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cl,this.L=this.M=!1}gs(ul,fo);var cl="",hl=/^https?$/i,dl=["POST","PUT"];function fl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pl(e),gl(e)}function pl(e){e.F||(e.F=!0,po(e,"complete"),po(e,"error"))}function ml(e){if(e.h&&"undefined"!=typeof os&&(!e.C[1]||4!=vl(e)||2!=e.da()))if(e.v&&4==vl(e))Ao(e.La,0,e);else if(po(e,"readystatechange"),4==vl(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(wa)[1]||null;!i&&as.self&&as.self.location&&(i=as.self.location.protocol.slice(0,-1)),r=!hl.test(i?i.toLowerCase():"")}n=r}if(n)po(e,"complete"),po(e,"success");else{e.m=6;try{var s=2<vl(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",pl(e)}}finally{gl(e)}}}function gl(e,t){if(e.g){yl(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||po(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function yl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(as.clearTimeout(e.A),e.A=null)}function vl(e){return e.g?e.g.readyState:0}function bl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case cl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tu){return null}}function wl(e){let t="";return Ws(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Sl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ta(e,t,n))}function _l(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function El(e){this.Ga=0,this.j=[],this.l=new Lo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_l("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_l("baseRetryDelayMs",5e3,e),this.hb=_l("retryDelaySeedMs",1e4,e),this.eb=_l("forwardChannelMaxRetries",2,e),this.xa=_l("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new qa(e&&e.concurrentRequestLimit),this.Ja=new $a,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Il(e){if(Tl(e),3==e.H){var t=e.W++,n=_a(e.I);if(Ta(n,"SID",e.K),Ta(n,"RID",t),Ta(n,"TYPE","terminate"),Al(e,n),(t=new ra(e,e.l,t)).L=2,t.A=ka(_a(n)),n=!1,as.navigator&&as.navigator.sendBeacon)try{n=as.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&as.Image&&((new Image).src=t.A,n=!0),n||(t.g=Bl(t.l,null),t.g.ha(t.A)),t.G=Date.now(),fa(t)}jl(e)}function xl(e){e.g&&(Ol(e),e.g.cancel(),e.g=null)}function Tl(e){xl(e),e.u&&(as.clearTimeout(e.u),e.u=null),Ml(e),e.i.cancel(),e.m&&("number"===typeof e.m&&as.clearTimeout(e.m),e.m=null)}function kl(e){if(!Ga(e.i)&&!e.m){e.m=!0;var t=e.Na;_o||xo(),Eo||(_o(),Eo=!0),Io.add(t,e),e.C=0}}function Cl(e,t){var n;n=t?t.m:e.W++;const r=_a(e.I);Ta(r,"SID",e.K),Ta(r,"RID",n),Ta(r,"AID",e.V),Al(e,r),e.o&&e.s&&Sl(r,e.o,e.s),n=new ra(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Nl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ha(e.i,n),la(n,r,t)}function Al(e,t){e.na&&Ws(e.na,(function(e,n){Ta(t,n,e)})),e.h&&ba({},(function(e,n){Ta(t,n,e)}))}function Nl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ps(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{el(a,e,"req"+n+"_")}catch(qc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Dl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_o||xo(),Eo||(_o(),Eo=!0),Io.add(t,e),e.A=0}}function Pl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Qo(ps(e.Ma,e),Fl(e,e.A)),e.A++,!0)}function Ol(e){null!=e.B&&(as.clearTimeout(e.B),e.B=null)}function Rl(e){e.g=new ra(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_a(e.wa);Ta(t,"RID","rpc"),Ta(t,"SID",e.K),Ta(t,"AID",e.V),Ta(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ta(t,"TO",e.qa),Ta(t,"TYPE","xmlhttp"),Al(e,t),e.o&&e.s&&Sl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=ka(_a(t)),n.u=null,n.S=!0,ua(n,e)}function Ml(e){null!=e.v&&(as.clearTimeout(e.v),e.v=null)}function Ll(e,t){var n=null;if(e.g==t){Ml(e),Ol(e),e.g=null;var r=2}else{if(!Wa(e.i,t))return;n=t.F,Ya(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;po(r=zo(),new Go(r,n)),kl(e)}else Dl(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Qa(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Qo(ps(e.Na,e,t),Fl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Pl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vl(e,5);break;case 4:Vl(e,10);break;case 3:Vl(e,6);break;default:Vl(e,2)}}function Fl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ps(e.pb,e);n||(n=new Sa("//www.google.com/images/cleardot.gif"),as.location&&"http"==as.location.protocol||Ea(n,"https"),ka(n)),function(e,t){const n=new Lo;if(as.Image){const r=new Image;r.onload=ms(tl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ms(tl,n,r,"TestLoadImage: error",!1,t),r.onabort=ms(tl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ms(tl,n,r,"TestLoadImage: timeout",!1,t),as.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ko(2);e.H=0,e.h&&e.h.za(t),jl(e),Tl(e)}function jl(e){if(e.H=0,e.ma=[],e.h){const t=Xa(e.i);0==t.length&&0==e.j.length||(ws(e.ma,t),ws(e.ma,e.j),e.i.i.length=0,bs(e.j),e.j.length=0),e.h.ya()}}function zl(e,t,n){var r=n instanceof Sa?_a(n):new Sa(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ia(r,r.m);else{var i=as.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Sa(null);r&&Ea(s,r),t&&(s.g=t),i&&Ia(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Ta(r,n,t),Ta(r,"VER",e.ra),Al(e,r),r}function Bl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ul(new nl({ob:n})):new ul(e.va)).Oa(e.J),t}function Ul(){}function ql(){if(Ns&&!(10<=Number(zs)))throw Error("Environmental error: no available transport.")}function Kl(e,t){fo.call(this),this.g=new El(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Es(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Es(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wl(this)}function Gl(e){ea.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ql(){ta.call(this),this.status=1}function Wl(e){this.g=e}function Hl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Yl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Xl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(rs=ul.prototype).Oa=function(e){this.M=e},rs.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zo.g(),this.C=this.u?Xo(this.u):Xo(Zo),this.g.onreadystatechange=ps(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void fl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=as.FormData&&e instanceof as.FormData,!(0<=vs(dl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yl(this),0<this.B&&((this.L=function(e){return Ns&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ps(this.ua,this)):this.A=Ao(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){fl(this,s)}},rs.ua=function(){"undefined"!=typeof os&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,po(this,"timeout"),this.abort(8))},rs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,po(this,"complete"),po(this,"abort"),gl(this))},rs.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gl(this,!0)),ul.$.N.call(this)},rs.La=function(){this.s||(this.G||this.v||this.l?ml(this):this.kb())},rs.kb=function(){ml(this)},rs.isActive=function(){return!!this.g},rs.da=function(){try{return 2<vl(this)?this.g.status:-1}catch(Ja){return-1}},rs.ja=function(){try{return this.g?this.g.responseText:""}catch(Ja){return""}},rs.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ll(t)}},rs.Ia=function(){return this.m},rs.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(rs=El.prototype).ra=8,rs.H=1,rs.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ra(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Hs(s),Xs(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Nl(this,i,t),Ta(n=_a(this.I),"RID",e),Ta(n,"CVER",22),this.F&&Ta(n,"X-HTTP-Session-Id",this.F),Al(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(wl(s)))+"&"+t:this.o&&Sl(n,this.o,s)),Ha(this.i,i),this.bb&&Ta(n,"TYPE","init"),this.P?(Ta(n,"$req",t),Ta(n,"SID","null"),i.aa=!0,la(i,n,null)):la(i,n,t),this.H=2}}else 3==this.H&&(e?Cl(this,e):0==this.j.length||Ga(this.i)||Cl(this))},rs.Ma=function(){if(this.u=null,Rl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qo(ps(this.jb,this),e)}},rs.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ko(10),xl(this),Rl(this))},rs.ib=function(){null!=this.v&&(this.v=null,xl(this),Pl(this),Ko(19))},rs.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ko(2)):(this.l.info("Failed to ping google.com"),Ko(1))},rs.isActive=function(){return!!this.h&&this.h.isActive(this)},(rs=Ul.prototype).Ba=function(){},rs.Aa=function(){},rs.za=function(){},rs.ya=function(){},rs.isActive=function(){return!0},rs.Va=function(){},ql.prototype.g=function(e,t){return new Kl(e,t)},gs(Kl,fo),Kl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ko(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=zl(e,null,e.Y),kl(e)},Kl.prototype.close=function(){Il(this.g)},Kl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=go(e),e=n);t.j.push(new Ua(t.fb++,e)),3==t.H&&kl(t)},Kl.prototype.N=function(){this.g.h=null,delete this.j,Il(this.g),delete this.g,Kl.$.N.call(this)},gs(Gl,ea),gs(Ql,ta),gs(Wl,Ul),Wl.prototype.Ba=function(){po(this.g,"a")},Wl.prototype.Aa=function(e){po(this.g,new Gl(e))},Wl.prototype.za=function(e){po(this.g,new Ql)},Wl.prototype.ya=function(){po(this.g,"b")},gs(Hl,(function(){this.blockSize=-1})),Hl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Yl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Yl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Yl(this,r),i=0;break}}this.h=i,this.i+=t},Hl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Jl={};function Zl(e){return-128<=e&&128>e?function(e,t){var n=Jl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Xl([0|e],0>e?-1:0)})):new Xl([0|e],0>e?-1:0)}function $l(e){if(isNaN(e)||!isFinite(e))return tu;if(0>e)return ou($l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=eu;return new Xl(t,0)}var eu=4294967296,tu=Zl(0),nu=Zl(1),ru=Zl(16777216);function iu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function su(e){return-1==e.h}function ou(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Xl(n,~e.h).add(nu)}function au(e,t){return e.add(ou(t))}function lu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function uu(e,t){this.g=e,this.h=t}function cu(e,t){if(iu(t))throw Error("division by zero");if(iu(e))return new uu(tu,tu);if(su(e))return t=cu(ou(e),t),new uu(ou(t.g),ou(t.h));if(su(t))return t=cu(e,ou(t)),new uu(ou(t.g),t.h);if(30<e.g.length){if(su(e)||su(t))throw Error("slowDivide_ only works with positive integers.");for(var n=nu,r=t;0>=r.X(e);)n=hu(n),r=hu(r);var i=du(n,1),s=du(r,1);for(r=du(r,2),n=du(n,2);!iu(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=du(r,1),n=du(n,1)}return t=au(e,i.R(t)),new uu(i,t)}for(i=tu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=$l(n)).R(t);su(o)||0<o.X(e);)o=(s=$l(n-=r)).R(t);iu(s)&&(s=nu),i=i.add(s),e=au(e,o)}return new uu(i,e)}function hu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Xl(n,e.h)}function du(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Xl(i,e.h)}(rs=Xl.prototype).ea=function(){if(su(this))return-ou(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:eu+r)*t,t*=eu}return e},rs.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(iu(this))return"0";if(su(this))return"-"+ou(this).toString(e);for(var t=$l(Math.pow(e,6)),n=this,r="";;){var i=cu(n,t).g,s=((0<(n=au(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(iu(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},rs.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},rs.X=function(e){return su(e=au(this,e))?-1:iu(e)?0:1},rs.abs=function(){return su(this)?ou(this):this},rs.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Xl(n,-2147483648&n[n.length-1]?-1:0)},rs.R=function(e){if(iu(this)||iu(e))return tu;if(su(this))return su(e)?ou(this).R(ou(e)):ou(ou(this).R(e));if(su(e))return ou(this.R(ou(e)));if(0>this.X(ru)&&0>e.X(ru))return $l(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,lu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,lu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Xl(n,0)},rs.gb=function(e){return cu(this,e).h},rs.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Xl(n,this.h&e.h)},rs.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Xl(n,this.h|e.h)},rs.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Xl(n,this.h^e.h)},ql.prototype.createWebChannel=ql.prototype.g,Kl.prototype.send=Kl.prototype.u,Kl.prototype.open=Kl.prototype.m,Kl.prototype.close=Kl.prototype.close,Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,Ho.COMPLETE="complete",Jo.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",fo.prototype.listen=fo.prototype.O,ul.prototype.listenOnce=ul.prototype.P,ul.prototype.getLastError=ul.prototype.Sa,ul.prototype.getLastErrorCode=ul.prototype.Ia,ul.prototype.getStatus=ul.prototype.da,ul.prototype.getResponseJson=ul.prototype.Wa,ul.prototype.getResponseText=ul.prototype.ja,ul.prototype.send=ul.prototype.ha,ul.prototype.setWithCredentials=ul.prototype.Oa,Hl.prototype.digest=Hl.prototype.l,Hl.prototype.reset=Hl.prototype.reset,Hl.prototype.update=Hl.prototype.j,Xl.prototype.add=Xl.prototype.add,Xl.prototype.multiply=Xl.prototype.R,Xl.prototype.modulo=Xl.prototype.gb,Xl.prototype.compare=Xl.prototype.X,Xl.prototype.toNumber=Xl.prototype.ea,Xl.prototype.toString=Xl.prototype.toString,Xl.prototype.getBits=Xl.prototype.D,Xl.fromNumber=$l,Xl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ou(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$l(Math.pow(n,8)),i=tu,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=$l(Math.pow(n,o)),i=i.R(o).add($l(a))):i=(i=i.R(r)).add($l(a))}return i};var fu=ss.createWebChannelTransport=function(){return new ql},pu=ss.getStatEventTarget=function(){return zo()},mu=ss.ErrorCode=Wo,gu=ss.EventType=Ho,yu=ss.Event=Vo,vu=ss.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bu=(ss.FetchXmlHttpFactory=nl,ss.WebChannel=Jo),wu=ss.XhrIo=ul,Su=ss.Md5=Hl,_u=ss.Integer=Xl;const Eu="@firebase/firestore";class Iu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Iu.UNAUTHENTICATED=new Iu(null),Iu.GOOGLE_CREDENTIALS=new Iu("google-credentials-uid"),Iu.FIRST_PARTY=new Iu("first-party-uid"),Iu.MOCK_USER=new Iu("mock-user");let xu="10.8.1";const Tu=new fn("@firebase/firestore");function ku(){return Tu.logLevel}function Cu(e){if(Tu.logLevel<=ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Du);Tu.debug("Firestore (".concat(xu,"): ").concat(e),...i)}}function Au(e){if(Tu.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Du);Tu.error("Firestore (".concat(xu,"): ").concat(e),...i)}}function Nu(e){if(Tu.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Du);Tu.warn("Firestore (".concat(xu,"): ").concat(e),...i)}}function Du(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Pu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xu,") INTERNAL ASSERTION FAILED: ")+e;throw Au(t),new Error(t)}function Ou(e,t){e||Pu()}function Ru(e,t){return e}const Mu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lu extends Bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Fu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ju{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Iu.UNAUTHENTICATED)))}shutdown(){}}class zu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Bu{constructor(e){this.t=e,this.currentUser=Iu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fu;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fu,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Cu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Cu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fu)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Cu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ou("string"==typeof t.accessToken),new Vu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ou(null===e||"string"==typeof e),new Iu(e)}}class Uu{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Iu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qu{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Uu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Iu.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ku{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gu{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Cu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Cu("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Cu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Cu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ou("string"==typeof e.token),this.R=e.token,new Ku(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Wu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Qu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Hu(e,t){return e<t?-1:e>t?1:0}function Yu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Xu(e){return e+"\0"}class Ju{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ju.fromMillis(Date.now())}static fromDate(e){return Ju.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ju(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hu(this.nanoseconds,e.nanoseconds):Hu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zu(e)}static min(){return new Zu(new Ju(0,0))}static max(){return new Zu(new Ju(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $u{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pu(),void 0===n?n=e.length-t:n>e.length-t&&Pu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$u.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $u?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ec extends $u{construct(e,t,n){return new ec(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ec(e)}static emptyPath(){return new ec([])}}const tc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nc extends $u{construct(e,t,n){return new nc(e,t,n)}static isValidIdentifier(e){return tc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Lu(Mu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Lu(Mu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Lu(Mu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nc(t)}static emptyPath(){return new nc([])}}class rc{constructor(e){this.path=e}static fromPath(e){return new rc(ec.fromString(e))}static fromName(e){return new rc(ec.fromString(e).popFirst(5))}static empty(){return new rc(ec.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ec.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ec.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rc(new ec(e.slice()))}}class ic{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function sc(e){return e.fields.find((e=>2===e.kind))}function oc(e){return e.fields.filter((e=>2!==e.kind))}ic.UNKNOWN_ID=-1;class ac{constructor(e,t){this.fieldPath=e,this.kind=t}}class lc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lc(0,hc.min())}}function uc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zu.fromTimestamp(1e9===r?new Ju(n+1,0):new Ju(n,r));return new hc(i,rc.empty(),t)}function cc(e){return new hc(e.readTime,e.key,-1)}class hc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new hc(Zu.min(),rc.empty(),-1)}static max(){return new hc(Zu.max(),rc.empty(),-1)}}function dc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=rc.comparator(e.documentKey,t.documentKey),0!==n?n:Hu(e.largestBatchId,t.largestBatchId))}const fc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function mc(e){if(e.code!==Mu.FAILED_PRECONDITION||e.message!==fc)throw e;Cu("LocalStore","Unexpectedly lost primary lease")}class gc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof gc?t:gc.resolve(t)}catch(e){return gc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):gc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):gc.reject(t)}static resolve(e){return new gc(((t,n)=>{t(e)}))}static reject(e){return new gc(((t,n)=>{n(e)}))}static waitFor(e){return new gc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=gc.resolve(!1);for(const n of e)t=t.next((e=>e?gc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new gc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new gc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class yc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Fu,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new wc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=xc(t.target.error);this.V.reject(new wc(e,n))}}static open(e,t,n,r){try{return new yc(t,e.transaction(r,n))}catch(e){throw new wc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Cu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _c(t)}}class vc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===vc.S(Mt())&&Au("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Cu("SimpleDb","Removing database:",e),Ec(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vt())return!1;if(vc.C())return!0;const e=Mt(),t=vc.S(e),n=0<t&&t<10,r=vc.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Cu("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new wc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Lu(Mu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Lu(Mu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new wc(e,r))},r.onupgradeneeded=e=>{Cu("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Cu("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=yc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),gc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Cu("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class bc{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ec(this.k.delete())}}class wc extends Lu{constructor(e,t){super(Mu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Sc(e){return"IndexedDbTransactionError"===e.name}class _c{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Cu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ec(n)}add(e){return Cu("SimpleDb","ADD",this.store.name,e,e),Ec(this.store.add(e))}get(e){return Ec(this.store.get(e)).next((t=>(void 0===t&&(t=null),Cu("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Cu("SimpleDb","DELETE",this.store.name,e),Ec(this.store.delete(e))}count(){return Cu("SimpleDb","COUNT",this.store.name),Ec(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new gc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new gc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Cu("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new gc(((n,r)=>{t.onerror=e=>{const t=xc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new gc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new bc(i),o=t(i.primaryKey,i.value,s);if(o instanceof gc){const e=o.catch((e=>(s.done(),gc.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>gc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ec(e){return new gc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=xc(e.target.error);n(t)}}))}let Ic=!1;function xc(e){const t=vc.S(Mt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Lu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ic||(Ic=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Tc{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Cu("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Cu("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Sc(e)?Cu("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await mc(e)}await this.ee(6e4)}))}}class kc{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return gc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Cu("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Cu("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=cc(t);dc(r,n)>0&&(n=r)})),new hc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Cc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ac(e){return null==e}function Nc(e){return 0===e&&1/e==-1/0}function Dc(e){return"number"==typeof e&&Number.isInteger(e)&&!Nc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Pc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rc(t)),t=Oc(e.get(n),t);return Rc(t)}function Oc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Rc(e){return e+"\x01\x01"}function Mc(e){const t=e.length;if(Ou(t>=2),2===t)return Ou("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ec.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Pu(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Pu()}s=t+2}return new ec(r)}Cc._e=-1;const Lc=["userId","batchId"];function Fc(e,t){return[e,Pc(t)]}function Vc(e,t,n){return[e,Pc(t),n]}const jc={},zc=["prefixPath","collectionGroup","readTime","documentId"],Bc=["prefixPath","collectionGroup","documentId"],Uc=["collectionGroup","readTime","prefixPath","documentId"],qc=["canonicalId","targetId"],Kc=["targetId","path"],Gc=["path","targetId"],Qc=["collectionId","parent"],Wc=["indexId","uid"],Hc=["uid","sequenceNumber"],Yc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xc=["indexId","uid","orderedDocumentKey"],Jc=["userId","collectionPath","documentId"],Zc=["userId","collectionPath","largestBatchId"],$c=["userId","collectionGroup","largestBatchId"],eh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],th=[...eh,"documentOverlays"],nh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rh=nh,ih=[...rh,"indexConfiguration","indexState","indexEntries"];class sh extends pc{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function oh(e,t){const n=Ru(e);return vc.M(n.ae,t)}function ah(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ch{constructor(e,t){this.comparator=e,this.root=t||dh.EMPTY}insert(e,t){return new ch(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dh.BLACK,null,null))}remove(e){return new ch(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dh.RED,this.left=null!=r?r:dh.EMPTY,this.right=null!=i?i:dh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pu();if(this.right.isRed())throw Pu();const e=this.left.check();if(e!==this.right.check())throw Pu();return e+(this.isRed()?0:1)}}dh.EMPTY=null,dh.RED=!0,dh.BLACK=!1,dh.EMPTY=new class{constructor(){this.size=0}get key(){throw Pu()}get value(){throw Pu()}get color(){throw Pu()}get left(){throw Pu()}get right(){throw Pu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new dh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fh{constructor(e){this.comparator=e,this.data=new ch(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ph(this.data.getIterator())}getIteratorFrom(e){return new ph(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fh(this.comparator);return t.data=e,t}}class ph{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mh(e){return e.hasNext()?e.getNext():void 0}class gh{constructor(e){this.fields=e,e.sort(nc.comparator)}static empty(){return new gh([])}unionWith(e){let t=new fh(nc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class yh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yh("Invalid base64 string: "+e):e}}(e);return new vh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vh.EMPTY_BYTE_STRING=new vh("");const bh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wh(e){if(Ou(!!e),"string"==typeof e){let t=0;const n=bh.exec(e);if(Ou(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Sh(e.seconds),nanos:Sh(e.nanos)}}function Sh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _h(e){return"string"==typeof e?vh.fromBase64String(e):vh.fromUint8Array(e)}function Eh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ih(e){const t=e.mapValue.fields.__previous_value__;return Eh(t)?Ih(t):t}function xh(e){const t=wh(e.mapValue.fields.__local_write_time__.timestampValue);return new Ju(t.seconds,t.nanos)}class Th{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class kh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new kh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof kh&&e.projectId===this.projectId&&e.database===this.database}}const Ch={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ah={nullValue:"NULL_VALUE"};function Nh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Eh(e)?4:Kh(e)?9007199254740991:10:Pu()}function Dh(e,t){if(e===t)return!0;const n=Nh(e);if(n!==Nh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xh(e).isEqual(xh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wh(e.timestampValue),r=wh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _h(e.bytesValue).isEqual(_h(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sh(e.geoPointValue.latitude)===Sh(t.geoPointValue.latitude)&&Sh(e.geoPointValue.longitude)===Sh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sh(e.integerValue)===Sh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Sh(e.doubleValue),r=Sh(t.doubleValue);return n===r?Nc(n)===Nc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Yu(e.arrayValue.values||[],t.arrayValue.values||[],Dh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ah(n)!==ah(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dh(n[i],r[i])))return!1;return!0}(e,t);default:return Pu()}}function Ph(e,t){return void 0!==(e.values||[]).find((e=>Dh(e,t)))}function Oh(e,t){if(e===t)return 0;const n=Nh(e),r=Nh(t);if(n!==r)return Hu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Hu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Sh(e.integerValue||e.doubleValue),r=Sh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Rh(e.timestampValue,t.timestampValue);case 4:return Rh(xh(e),xh(t));case 5:return Hu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_h(e),r=_h(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Hu(n[i],r[i]);if(0!==e)return e}return Hu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Hu(Sh(e.latitude),Sh(t.latitude));return 0!==n?n:Hu(Sh(e.longitude),Sh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Oh(n[i],r[i]);if(e)return e}return Hu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ch.mapValue&&t===Ch.mapValue)return 0;if(e===Ch.mapValue)return 1;if(t===Ch.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Hu(r[o],s[o]);if(0!==e)return e;const t=Oh(n[r[o]],i[s[o]]);if(0!==t)return t}return Hu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Pu()}}function Rh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Hu(e,t);const n=wh(e),r=wh(t),i=Hu(n.seconds,r.seconds);return 0!==i?i:Hu(n.nanos,r.nanos)}function Mh(e){return Lh(e)}function Lh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return _h(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return rc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Lh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Lh(e.fields[i]));return n+"}"}(e.mapValue):Pu()}function Fh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vh(e){return!!e&&"integerValue"in e}function jh(e){return!!e&&"arrayValue"in e}function zh(e){return!!e&&"nullValue"in e}function Bh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uh(e){return!!e&&"mapValue"in e}function qh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return lh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=qh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Kh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gh(e){return"nullValue"in e?Ah:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fh(kh.empty(),rc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Pu()}function Qh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fh(kh.empty(),rc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ch:Pu()}function Wh(e,t){const n=Oh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Hh(e,t){const n=Oh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Yh{constructor(e){this.value=e}static empty(){return new Yh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qh(t)}setAll(e){let t=nc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Uh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Yh(qh(this.value))}}function Xh(e){const t=[];return lh(e.fields,((e,n)=>{const r=new nc([e]);if(Uh(n)){const e=Xh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new gh(t)}class Jh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Jh(e,0,Zu.min(),Zu.min(),Zu.min(),Yh.empty(),0)}static newFoundDocument(e,t,n,r){return new Jh(e,1,t,Zu.min(),n,r,0)}static newNoDocument(e,t){return new Jh(e,2,t,Zu.min(),Zu.min(),Yh.empty(),0)}static newUnknownDocument(e,t){return new Jh(e,3,t,Zu.min(),Zu.min(),Yh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Zh{constructor(e,t){this.position=e,this.inclusive=t}}function $h(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?rc.comparator(rc.fromName(o.referenceValue),n.key):Oh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ed(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dh(e.position[n],t.position[n]))return!1;return!0}class td{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function nd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class rd{}class id extends rd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pd(e,t,n):"array-contains"===t?new vd(e,n):"in"===t?new bd(e,n):"not-in"===t?new wd(e,n):"array-contains-any"===t?new Sd(e,n):new id(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new md(e,n):new gd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Oh(t,this.value)):null!==t&&Nh(this.value)===Nh(t)&&this.matchesComparison(Oh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sd extends rd{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new sd(e,t)}matches(e){return od(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function od(e){return"and"===e.op}function ad(e){return"or"===e.op}function ld(e){return ud(e)&&od(e)}function ud(e){for(const t of e.filters)if(t instanceof sd)return!1;return!0}function cd(e){if(e instanceof id)return e.field.canonicalString()+e.op.toString()+Mh(e.value);if(ld(e))return e.filters.map((e=>cd(e))).join(",");{const t=e.filters.map((e=>cd(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function hd(e,t){return e instanceof id?function(e,t){return t instanceof id&&e.op===t.op&&e.field.isEqual(t.field)&&Dh(e.value,t.value)}(e,t):e instanceof sd?function(e,t){return t instanceof sd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&hd(n,t.filters[r])),!0)}(e,t):void Pu()}function dd(e,t){const n=e.filters.concat(t);return sd.create(n,e.op)}function fd(e){return e instanceof id?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mh(e.value))}(e):e instanceof sd?function(e){return e.op.toString()+" {"+e.getFilters().map(fd).join(" ,")+"}"}(e):"Filter"}class pd extends id{constructor(e,t,n){super(e,t,n),this.key=rc.fromName(n.referenceValue)}matches(e){const t=rc.comparator(e.key,this.key);return this.matchesComparison(t)}}class md extends id{constructor(e,t){super(e,"in",t),this.keys=yd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gd extends id{constructor(e,t){super(e,"not-in",t),this.keys=yd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>rc.fromName(e.referenceValue)))}class vd extends id{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jh(t)&&Ph(t.arrayValue,this.value)}}class bd extends id{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ph(this.value.arrayValue,t)}}class wd extends id{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ph(this.value.arrayValue,t)}}class Sd extends id{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ph(this.value.arrayValue,e)))}}class _d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Ed(e){return new _d(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Id(e){const t=Ru(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ac(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Mh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Mh(e))).join(",")),t.ce=e}return t.ce}function xd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!nd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ed(e.startAt,t.startAt)&&ed(e.endAt,t.endAt)}function Td(e){return rc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function kd(e,t){return e.filters.filter((e=>e instanceof id&&e.field.isEqual(t)))}function Cd(e,t,n){let r=Ah,i=!0;for(const s of kd(e,t)){let e=Ah,t=!0;switch(s.op){case"<":case"<=":e=Gh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ah}Wh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ad(e,t,n){let r=Ch,i=!0;for(const s of kd(e,t)){let e=Ch,t=!0;switch(s.op){case">=":case">":e=Qh(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ch}Hh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Hh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Nd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Dd(e,t,n,r,i,s,o,a){return new Nd(e,t,n,r,i,s,o,a)}function Pd(e){return new Nd(e)}function Od(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Rd(e){return null!==e.collectionGroup}function Md(e){const t=Ru(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fh(nc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new td(r,n))})),e.has(nc.keyField().canonicalString())||t.le.push(new td(nc.keyField(),n))}return t.le}function Ld(e){const t=Ru(e);return t.he||(t.he=Fd(t,Md(e))),t.he}function Fd(e,t){if("F"===e.limitType)return Ed(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new td(e.field,t)}));const n=e.endAt?new Zh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zh(e.startAt.position,e.startAt.inclusive):null;return Ed(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vd(e,t){const n=e.filters.concat([t]);return new Nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jd(e,t,n){return new Nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zd(e,t){return xd(Ld(e),Ld(t))&&e.limitType===t.limitType}function Bd(e){return"".concat(Id(Ld(e)),"|lt:").concat(e.limitType)}function Ud(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>fd(e))).join(", "),"]")),Ac(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Mh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Mh(e))).join(",")),"Target(".concat(t,")")}(Ld(e)),"; limitType=").concat(e.limitType,")")}function qd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Md(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=$h(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Md(e),t))&&!(e.endAt&&!function(e,t,n){const r=$h(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Md(e),t))}(e,t)}function Kd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gd(e){return(t,n)=>{let r=!1;for(const i of Md(e)){const e=Qd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qd(e,t,n){const r=e.field.isKeyField()?rc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Oh(r,i):Pu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pu()}}class Wd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lh(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return uh(this.inner)}size(){return this.innerSize}}const Hd=new ch(rc.comparator);function Yd(){return Hd}const Xd=new ch(rc.comparator);function Jd(){let e=Xd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Zd(e){let t=Xd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $d(){return tf()}function ef(){return tf()}function tf(){return new Wd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const nf=new ch(rc.comparator),rf=new fh(rc.comparator);function sf(){let e=rf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const of=new fh(Hu);function af(){return of}function lf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(t)?"-0":t}}function uf(e){return{integerValue:""+e}}function cf(e,t){return Dc(t)?uf(t):lf(e,t)}class hf{constructor(){this._=void 0}}function df(e,t,n){return e instanceof mf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Eh(t)&&(t=Ih(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gf?yf(e,t):e instanceof vf?bf(e,t):function(e,t){const n=pf(e,t),r=Sf(n)+Sf(e.Ie);return Vh(n)&&Vh(e.Ie)?uf(r):lf(e.serializer,r)}(e,t)}function ff(e,t,n){return e instanceof gf?yf(e,t):e instanceof vf?bf(e,t):n}function pf(e,t){return e instanceof wf?function(e){return Vh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class mf extends hf{}class gf extends hf{constructor(e){super(),this.elements=e}}function yf(e,t){const n=_f(t);for(const r of e.elements)n.some((e=>Dh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class vf extends hf{constructor(e){super(),this.elements=e}}function bf(e,t){let n=_f(t);for(const r of e.elements)n=n.filter((e=>!Dh(e,r)));return{arrayValue:{values:n}}}class wf extends hf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Sf(e){return Sh(e.integerValue||e.doubleValue)}function _f(e){return jh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ef{constructor(e,t){this.field=e,this.transform=t}}class If{constructor(e,t){this.version=e,this.transformResults=t}}class xf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xf}static exists(e){return new xf(void 0,e)}static updateTime(e){return new xf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class kf{}function Cf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vf(e.key,xf.none()):new Of(e.key,e.data,xf.none());{const n=e.data,r=Yh.empty();let i=new fh(nc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Rf(e.key,r,new gh(i.toArray()),xf.none())}}function Af(e,t,n){e instanceof Of?function(e,t,n){const r=e.value.clone(),i=Lf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rf?function(e,t,n){if(!Tf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nf(e,t,n,r){return e instanceof Of?function(e,t,n,r){if(!Tf(e.precondition,t))return n;const i=e.value.clone(),s=Ff(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rf?function(e,t,n,r){if(!Tf(e.precondition,t))return n;const i=Ff(e.fieldTransforms,r,t),s=t.data;return s.setAll(Mf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Tf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Df(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=pf(r.transform,e||null);null!=i&&(null===n&&(n=Yh.empty()),n.set(r.field,i))}return n||null}function Pf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Yu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gf&&t instanceof gf||e instanceof vf&&t instanceof vf?Yu(e.elements,t.elements,Dh):e instanceof wf&&t instanceof wf?Dh(e.Ie,t.Ie):e instanceof mf&&t instanceof mf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Of extends kf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rf extends kf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Lf(e,t,n){const r=new Map;Ou(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ff(o,a,n[i]))}return r}function Ff(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,df(e,s,t))}return r}class Vf extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jf extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Af(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ef();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Cf(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Zu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),sf())}isEqual(e){return this.batchId===e.batchId&&Yu(this.mutations,e.mutations,((e,t)=>Pf(e,t)))&&Yu(this.baseMutations,e.baseMutations,((e,t)=>Pf(e,t)))}}class Bf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ou(e.mutations.length===n.length);let r=nf;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Bf(e,t,n,r)}}class Uf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class qf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kf,Gf;function Qf(e){switch(e){default:return Pu();case Mu.CANCELLED:case Mu.UNKNOWN:case Mu.DEADLINE_EXCEEDED:case Mu.RESOURCE_EXHAUSTED:case Mu.INTERNAL:case Mu.UNAVAILABLE:case Mu.UNAUTHENTICATED:return!1;case Mu.INVALID_ARGUMENT:case Mu.NOT_FOUND:case Mu.ALREADY_EXISTS:case Mu.PERMISSION_DENIED:case Mu.FAILED_PRECONDITION:case Mu.ABORTED:case Mu.OUT_OF_RANGE:case Mu.UNIMPLEMENTED:case Mu.DATA_LOSS:return!0}}function Wf(e){if(void 0===e)return Au("GRPC error has no .code"),Mu.UNKNOWN;switch(e){case Kf.OK:return Mu.OK;case Kf.CANCELLED:return Mu.CANCELLED;case Kf.UNKNOWN:return Mu.UNKNOWN;case Kf.DEADLINE_EXCEEDED:return Mu.DEADLINE_EXCEEDED;case Kf.RESOURCE_EXHAUSTED:return Mu.RESOURCE_EXHAUSTED;case Kf.INTERNAL:return Mu.INTERNAL;case Kf.UNAVAILABLE:return Mu.UNAVAILABLE;case Kf.UNAUTHENTICATED:return Mu.UNAUTHENTICATED;case Kf.INVALID_ARGUMENT:return Mu.INVALID_ARGUMENT;case Kf.NOT_FOUND:return Mu.NOT_FOUND;case Kf.ALREADY_EXISTS:return Mu.ALREADY_EXISTS;case Kf.PERMISSION_DENIED:return Mu.PERMISSION_DENIED;case Kf.FAILED_PRECONDITION:return Mu.FAILED_PRECONDITION;case Kf.ABORTED:return Mu.ABORTED;case Kf.OUT_OF_RANGE:return Mu.OUT_OF_RANGE;case Kf.UNIMPLEMENTED:return Mu.UNIMPLEMENTED;case Kf.DATA_LOSS:return Mu.DATA_LOSS;default:return Pu()}}(Gf=Kf||(Kf={}))[Gf.OK=0]="OK",Gf[Gf.CANCELLED=1]="CANCELLED",Gf[Gf.UNKNOWN=2]="UNKNOWN",Gf[Gf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gf[Gf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gf[Gf.NOT_FOUND=5]="NOT_FOUND",Gf[Gf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gf[Gf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gf[Gf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gf[Gf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gf[Gf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gf[Gf.ABORTED=10]="ABORTED",Gf[Gf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gf[Gf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gf[Gf.INTERNAL=13]="INTERNAL",Gf[Gf.UNAVAILABLE=14]="UNAVAILABLE",Gf[Gf.DATA_LOSS=15]="DATA_LOSS";let Hf=null;function Yf(){return new TextEncoder}const Xf=new _u([4294967295,4294967295],0);function Jf(e){const t=Yf().encode(e),n=new Su;return n.update(t),new Uint8Array(n.digest())}function Zf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new _u([n,r],0),new _u([i,s],0)]}class $f{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ep("Invalid padding: ".concat(t));if(n<0)throw new ep("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ep("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ep("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=_u.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(_u.fromNumber(n)));return 1===r.compare(Xf)&&(r=new _u([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Jf(e),[n,r]=Zf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $f(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Jf(e),[n,r]=Zf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ep extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,np.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new tp(Zu.min(),r,new ch(Hu),Yd(),sf())}}class np{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new np(n,t,sf(),sf(),sf())}}class rp{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ip{constructor(e,t){this.targetId=e,this.fe=t}}class sp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class op{constructor(){this.ge=0,this.pe=up(),this.ye=vh.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sf(),t=sf(),n=sf();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Pu()}})),new np(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=up()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ou(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class ap{constructor(e){this.Le=e,this.ke=new Map,this.qe=Yd(),this.Qe=lp(),this.Ke=new ch(Hu)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Pu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Td(i))if(0===n){const e=new rc(i.path);this.We(t,e,Jh.newNoDocument(e,Zu.min()))}else Ou(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Hf||Hf.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=_h(n).toUint8Array()}catch(e){if(e instanceof yh)return Nu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new $f(s,r,i)}catch(e){return Nu(e instanceof ep?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Td(i.target)){const t=new rc(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Jh.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=sf();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new tp(e,t,this.Ke,this.qe,n);return this.qe=Yd(),this.Qe=lp(),this.Ke=new ch(Hu),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new op,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new fh(Hu),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Cu("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new op),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function lp(){return new ch(rc.comparator)}function up(){return new ch(rc.comparator)}const cp={asc:"ASCENDING",desc:"DESCENDING"},hp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dp={and:"AND",or:"OR"};class fp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pp(e,t){return e.useProto3Json||Ac(t)?t:{value:t}}function mp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yp(e,t){return mp(e,t.toTimestamp())}function vp(e){return Ou(!!e),Zu.fromTimestamp(function(e){const t=wh(e);return new Ju(t.seconds,t.nanos)}(e))}function bp(e,t){return wp(e,t).canonicalString()}function wp(e,t){const n=function(e){return new ec(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Sp(e){const t=ec.fromString(e);return Ou(qp(t)),t}function _p(e,t){return bp(e.databaseId,t.path)}function Ep(e,t){const n=Sp(t);if(n.get(1)!==e.databaseId.projectId)throw new Lu(Mu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lu(Mu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rc(kp(n))}function Ip(e,t){return bp(e.databaseId,t)}function xp(e){const t=Sp(e);return 4===t.length?ec.emptyPath():kp(t)}function Tp(e){return new ec(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kp(e){return Ou(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cp(e,t,n){return{name:_p(e,t),fields:n.value.mapValue.fields}}function Ap(e,t,n){const r=Ep(e,t.name),i=vp(t.updateTime),s=t.createTime?vp(t.createTime):Zu.min(),o=new Yh({mapValue:{fields:t.fields}}),a=Jh.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Np(e,t){let n;if(t instanceof Of)n={update:Cp(e,t.key,t.value)};else if(t instanceof Vf)n={delete:_p(e,t.key)};else if(t instanceof Rf)n={update:Cp(e,t.key,t.data),updateMask:Up(t.fieldMask)};else{if(!(t instanceof jf))return Pu();n={verify:_p(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof mf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Pu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pu()}(e,t.precondition)),n}function Dp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?xf.updateTime(vp(e.updateTime)):void 0!==e.exists?xf.exists(e.exists):xf.none()}(t.currentDocument):xf.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ou("REQUEST_TIME"===t.setToServerValue),n=new mf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new gf(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new vf(e)}else"increment"in t?n=new wf(e,t.increment):Pu();const r=nc.fromServerFormat(t.fieldPath);return new Ef(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Ep(e,t.update.name),s=new Yh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new gh(t.map((e=>nc.fromServerFormat(e))))}(t.updateMask);return new Rf(i,s,e,n,r)}return new Of(i,s,n,r)}if(t.delete){const r=Ep(e,t.delete);return new Vf(r,n)}if(t.verify){const r=Ep(e,t.verify);return new jf(r,n)}return Pu()}function Pp(e,t){return{documents:[Ip(e,t.path)]}}function Op(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ip(e,i);const s=function(e){if(0!==e.length)return Bp(sd.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:jp(e.field),direction:Lp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Rp(e){let t=xp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ou(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Mp(e);return t instanceof sd&&ld(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new td(zp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ac(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Zh(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Zh(n,t)}(n.endAt)),Dd(t,i,o,s,a,"F",l,u)}function Mp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zp(e.unaryFilter.field);return id.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zp(e.unaryFilter.field);return id.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zp(e.unaryFilter.field);return id.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zp(e.unaryFilter.field);return id.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pu()}}(e):void 0!==e.fieldFilter?function(e){return id.create(zp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return sd.create(e.compositeFilter.filters.map((e=>Mp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Pu()}}(e.compositeFilter.op))}(e):Pu()}function Lp(e){return cp[e]}function Fp(e){return hp[e]}function Vp(e){return dp[e]}function jp(e){return{fieldPath:e.canonicalString()}}function zp(e){return nc.fromServerFormat(e.fieldPath)}function Bp(e){return e instanceof id?function(e){if("=="===e.op){if(Bh(e.value))return{unaryFilter:{field:jp(e.field),op:"IS_NAN"}};if(zh(e.value))return{unaryFilter:{field:jp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bh(e.value))return{unaryFilter:{field:jp(e.field),op:"IS_NOT_NAN"}};if(zh(e.value))return{unaryFilter:{field:jp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jp(e.field),op:Fp(e.op),value:e.value}}}(e):e instanceof sd?function(e){const t=e.getFilters().map((e=>Bp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vp(e.op),filters:t}}}(e):Pu()}function Up(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function qp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zu.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Kp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gp{constructor(e){this.ct=e}}function Qp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_p(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mp(e,t.version.toTimestamp()),createTime:mp(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hp(t.version)};else{if(!t.isUnknownDocument())return Pu();r.unknownDocument={path:n.path.toArray(),version:Hp(t.version)}}return r}function Wp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yp(e){const t=new Ju(e.seconds,e.nanoseconds);return Zu.fromTimestamp(t)}function Xp(e,t){const n=(t.baseMutations||[]).map((t=>Dp(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Dp(e.ct,t))),i=Ju.fromMillis(t.localWriteTimeMs);return new zf(t.batchId,i,n,r)}function Jp(e){const t=Yp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Yp(e.lastLimboFreeSnapshotVersion):Zu.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ou(1===e.documents.length),Ld(Pd(xp(e.documents[0])))}(e.query):function(e){return Ld(Rp(e))}(e.query),new Kp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,vh.fromBase64String(e.resumeToken))}function Zp(e,t){const n=Hp(t.snapshotVersion),r=Hp(t.lastLimboFreeSnapshotVersion);let i;i=Td(t.target)?Pp(e.ct,t.target):Op(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Id(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $p(e){const t=Rp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jd(t,t.limit,"L"):t}function em(e,t){return new Uf(t.largestBatchId,Dp(e.ct,t.overlayMutation))}function tm(e,t){const n=t.path.lastSegment();return[e,Pc(t.path.popLast()),n]}function nm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Hp(r.readTime),documentKey:Pc(r.documentKey.path),largestBatchId:r.largestBatchId}}class rm{getBundleMetadata(e,t){return im(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Yp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return im(e).put(function(e){return{bundleId:e.id,createTime:Hp(vp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return sm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:$p(e.bundledQuery),readTime:Yp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return sm(e).put(function(e){return{name:e.name,readTime:Hp(vp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function im(e){return oh(e,"bundles")}function sm(e){return oh(e,"namedQueries")}class om{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new om(e,n)}getOverlay(e,t){return am(e).get(tm(this.userId,t)).next((e=>e?em(this.serializer,e):null))}getOverlays(e,t){const n=$d();return gc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Uf(t,i);r.push(this.ht(e,s))})),gc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Pc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(am(e).H("collectionPathOverlayIndex",r))})),gc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=$d(),i=Pc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return am(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=em(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=$d();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return am(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=em(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return am(e).put(function(e,t,n){const[r,i,s]=tm(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Np(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function am(e){return oh(e,"documentOverlays")}class lm{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Sh(e.integerValue));else if("doubleValue"in e){const n=Sh(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Nc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(_h(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Kh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Pu()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),rc.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function um(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=um(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lm.bt=new lm;class hm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=cm(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=cm(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class dm{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class fm{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class pm{constructor(){this.Gt=new hm,this.zt=new dm(this.Gt),this.jt=new fm(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class mm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new mm(this.indexId,this.documentKey,this.arrayValue,n)}}function gm(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ym(e.arrayValue,t.arrayValue),0!==n?n:(n=ym(e.directionalValue,t.directionalValue),0!==n?n:rc.comparator(e.documentKey,t.documentKey)))}function ym(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class vm{constructor(e){this.Yt=new fh(((e,t)=>nc.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ou(e.collectionGroup===this.collectionId),this.en)return!1;const t=sc(e);if(void 0!==t&&!this.nn(t))return!1;const n=oc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new fh(nc.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ac(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ac(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ac(n.field,"asc"===n.dir?0:1)));return new ic(ic.UNKNOWN_ID,this.collectionId,t,lc.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function bm(e){var t,n;if(Ou(e instanceof id||e instanceof sd),e instanceof id){if(e instanceof bd){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>id.create(e.field,"==",t))))||[];return sd.create(r,"or")}return e}const r=e.filters.map((e=>bm(e)));return sd.create(r,e.op)}function wm(e){if(0===e.getFilters().length)return[];const t=Im(bm(e));return Ou(Em(t)),Sm(t)||_m(t)?[t]:t.getFilters()}function Sm(e){return e instanceof id}function _m(e){return e instanceof sd&&ld(e)}function Em(e){return Sm(e)||_m(e)||function(e){if(e instanceof sd&&ad(e)){for(const t of e.getFilters())if(!Sm(t)&&!_m(t))return!1;return!0}return!1}(e)}function Im(e){if(Ou(e instanceof id||e instanceof sd),e instanceof id)return e;if(1===e.filters.length)return Im(e.filters[0]);const t=e.filters.map((e=>Im(e)));let n=sd.create(t,e.op);return n=km(n),Em(n)?n:(Ou(n instanceof sd),Ou(od(n)),Ou(n.filters.length>1),n.filters.reduce(((e,t)=>xm(e,t))))}function xm(e,t){let n;return Ou(e instanceof id||e instanceof sd),Ou(t instanceof id||t instanceof sd),n=e instanceof id?t instanceof id?function(e,t){return sd.create([e,t],"and")}(e,t):Tm(e,t):t instanceof id?Tm(t,e):function(e,t){if(Ou(e.filters.length>0&&t.filters.length>0),od(e)&&od(t))return dd(e,t.getFilters());const n=ad(e)?e:t,r=ad(e)?t:e,i=n.filters.map((e=>xm(e,r)));return sd.create(i,"or")}(e,t),km(n)}function Tm(e,t){if(od(t))return dd(t,e.getFilters());{const n=t.filters.map((t=>xm(e,t)));return sd.create(n,"or")}}function km(e){if(Ou(e instanceof id||e instanceof sd),e instanceof id)return e;const t=e.getFilters();if(1===t.length)return km(t[0]);if(ud(e))return e;const n=t.map((e=>km(e))),r=[];return n.forEach((t=>{t instanceof id?r.push(t):t instanceof sd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:sd.create(r,e.op)}class Cm{constructor(){this._n=new Am}addToCollectionParentIndex(e,t){return this._n.add(t),gc.resolve()}getCollectionParents(e,t){return gc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return gc.resolve()}deleteFieldIndex(e,t){return gc.resolve()}deleteAllFieldIndexes(e){return gc.resolve()}createTargetIndexes(e,t){return gc.resolve()}getDocumentsMatchingTarget(e,t){return gc.resolve(null)}getIndexType(e,t){return gc.resolve(0)}getFieldIndexes(e,t){return gc.resolve([])}getNextCollectionGroupToUpdate(e){return gc.resolve(null)}getMinOffset(e,t){return gc.resolve(hc.min())}getMinOffsetFromCollectionGroup(e,t){return gc.resolve(hc.min())}updateCollectionGroup(e,t,n){return gc.resolve()}updateIndexEntries(e,t){return gc.resolve()}}class Am{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fh(ec.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fh(ec.comparator)).toArray()}}const Nm=new Uint8Array(0);class Dm{constructor(e,t){this.databaseId=t,this.an=new Am,this.un=new Wd((e=>Id(e)),((e,t)=>xd(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Pc(r)};return Pm(e).put(i)}return gc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Xu(t),""],!1,!0);return Pm(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Mc(r.parent))}return n}))}addFieldIndex(e,t){const n=Rm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Mm(e);return i.next((e=>{n.put(nm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Rm(e),r=Mm(e),i=Om(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Rm(e),n=Om(e),r=Mm(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return gc.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new vm(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Om(e);let r=!0;const i=new Map;return gc.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=sf();const r=[];return gc.forEach(i,((i,s)=>{Cu("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Id(t)));const o=function(e,t){const n=sc(t);if(void 0===n)return null;for(const r of kd(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of oc(t))for(const t of kd(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of oc(t)){const t=0===i.kind?Cd(e,i.fieldPath,e.startAt):Ad(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Zh(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of oc(t)){const t=0===i.kind?Ad(e,i.fieldPath,e.endAt):Cd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Zh(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,a),f=this.In(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return gc.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=rc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return gc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wm(sd.create(e.filters,"and")).map((t=>Ed(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):Nm,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],s),f=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new mm(e,rc.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new mm(e,rc.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new vm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return gc.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new fh(nc.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new pm;for(const r of oc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);lm.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new pm;return lm.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new pm;return lm.bt.Pt(Fh(this.databaseId,t),n.Ht(function(e){const t=oc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new pm);let i=0;for(const s of oc(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&jh(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);lm.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new pm;n.seed(e.Wt()),lm.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof id&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Rm(e),r=Mm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return gc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new lc(t.sequenceNumber,new hc(Yp(t.readTime),new rc(Mc(t.documentKey)),t.largestBatchId)):lc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ac(nc.fromServerFormat(t),n)}));return new ic(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Hu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Rm(e),i=Mm(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>gc.forEach(t,(t=>i.put(nm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return gc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?gc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),gc.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?gc.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Om(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Om(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Om(e);let i=new fh(gm);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new mm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new fh(gm);const r=this.An(t,e);if(null==r)return n;const i=sc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(jh(s))for(const i of s.arrayValue.values||[])n=n.add(new mm(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new mm(t.indexId,e.key,Nm,r));return n}wn(e,t,n,r,i){Cu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=mh(s),l=mh(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=mh(o)):t?(i(a),a=mh(s)):(a=mh(s),l=mh(o))}}(r,i,gm,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),gc.waitFor(s)}gn(e){let t=1;return Mm(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>gm(e,t))).filter(((e,t,n)=>!t||0!==gm(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=gm(s,e),i=gm(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Nm,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Nm,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return gm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lm)}getMinOffset(e,t){return gc.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Pu())))).next(Lm)}}function Pm(e){return oh(e,"collectionParents")}function Om(e){return oh(e,"indexEntries")}function Rm(e){return oh(e,"indexConfiguration")}function Mm(e){return oh(e,"indexState")}function Lm(e){Ou(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;dc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hc(t.readTime,t.documentKey,n)}const Fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vm(e,Vm.DEFAULT_COLLECTION_PERCENTILE,Vm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Ou(1===a)})));const u=[];for(const c of n.mutations){const e=Vc(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return gc.waitFor(s).next((()=>u))}function zm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Pu();t=e.noDocument}return JSON.stringify(t).length}Vm.DEFAULT_COLLECTION_PERCENTILE=10,Vm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vm.DEFAULT=new Vm(41943040,Vm.DEFAULT_COLLECTION_PERCENTILE,Vm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vm.DISABLED=new Vm(-1,0,0);class Bm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ou(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Bm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qm(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Km(e),s=qm(e);return s.add({}).next((o=>{Ou("number"==typeof o);const a=new zf(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Np(e.ct,t))),i=n.mutations.map((t=>Np(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new fh(((e,t)=>Hu(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Vc(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,jc))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),gc.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return qm(e).get(t).next((e=>e?(Ou(e.userId===this.userId),Xp(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?gc.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return qm(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ou(t.batchId>=n),i=Xp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return qm(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qm(e).W("userMutationsIndex",t).next((e=>e.map((e=>Xp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Fc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Km(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=Mc(a);if(o===this.userId&&t.path.isEqual(u))return qm(e).get(l).next((e=>{if(!e)throw Pu();Ou(e.userId===this.userId),i.push(Xp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fh(Hu);const r=[];return t.forEach((t=>{const i=Fc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Km(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Mc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),gc.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Fc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new fh(Hu);return Km(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=Mc(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(qm(e).get(t).next((e=>{if(null===e)throw Pu();Ou(e.userId===this.userId),n.push(Xp(this.serializer,e))})))})),gc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return jm(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),gc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return gc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Km(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Mc(e[1]);r.push(t)}else n.done()})).next((()=>{Ou(0===r.length)}))}))}containsKey(e,t){return Um(e,this.userId,t)}xn(e){return Gm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Um(e,t,n){const r=Fc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Km(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function qm(e){return oh(e,"mutations")}function Km(e){return oh(e,"documentMutations")}function Gm(e){return oh(e,"mutationQueues")}class Qm{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Qm(0)}static Bn(){return new Qm(-1)}}class Wm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Qm(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Zu.fromTimestamp(new Ju(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Hm(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Ou(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Hm(e).Y(((s,o)=>{const a=Jp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>gc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Hm(e).Y(((e,n)=>{const r=Jp(n);t(r)}))}Ln(e){return Ym(e).get("targetGlobalKey").next((e=>(Ou(null!==e),e)))}kn(e,t){return Ym(e).put("targetGlobalKey",t)}qn(e,t){return Hm(e).put(Zp(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Id(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Hm(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Jp(n);xd(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Xm(e);return t.forEach((t=>{const s=Pc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),gc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Xm(e);return gc.forEach(t,(t=>{const i=Pc(t.path);return gc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Xm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xm(e);let i=sf();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Mc(e[1]),s=new rc(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Pc(t.path),r=IDBKeyRange.bound([n],[Xu(n)],!1,!0);let i=0;return Xm(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Hm(e).get(t).next((e=>e?Jp(e):null))}}function Hm(e){return oh(e,"targets")}function Ym(e){return oh(e,"targetGlobal")}function Xm(e){return oh(e,"targetDocuments")}function Jm(e,t){let[n,r]=e,[i,s]=t;const o=Hu(n,i);return 0===o?Hu(r,s):o}class Zm{constructor(e){this.Kn=e,this.buffer=new fh(Jm),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Jm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $m{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Cu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Sc(e)?Cu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await mc(e)}await this.zn(3e5)}))}}class eg{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return gc.resolve(Cc._e);const n=new Zm(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Cu("LruGarbageCollector","Garbage collection skipped; disabled"),gc.resolve(Fm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Cu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Fm):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Cu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ku()<=ln.DEBUG&&Cu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),gc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function tg(e,t){return new eg(e,t)}class ng{constructor(e,t){this.db=e,this.garbageCollector=tg(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return rg(e,n)}removeReference(e,t,n){return rg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return rg(e,t)}er(e,t){return function(e,t){let n=!1;return Gm(e).Z((r=>Um(e,r,t).next((e=>(e&&(n=!0),gc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Zu.min()),Xm(e).delete(function(e){return[0,Pc(e.path)]}(s)))))}));r.push(t)}})).next((()=>gc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return rg(e,t)}Xn(e,t){const n=Xm(e);let r,i=Cc._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Cc._e&&t(new rc(Mc(r)),i),i=l,r=a):i=Cc._e})).next((()=>{i!==Cc._e&&t(new rc(Mc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rg(e,t){return Xm(e).put(function(e,t){return{targetId:0,path:Pc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ig{constructor(){this.changes=new Wd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ug(e).put(n)}removeEntry(e,t,n){return ug(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Jh.newInvalidDocument(t);return ug(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cg(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Jh.newInvalidDocument(t)};return ug(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cg(t))},((e,r)=>{n={document:this.nr(t,r),size:zm(r)}})).next((()=>n))}getEntries(e,t){let n=Yd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Yd(),r=new ch(rc.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,zm(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return gc.resolve();let r=new fh(dg);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cg(r.first()),cg(r.last())),s=r.getIterator();let o=s.getNext();return ug(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=rc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&dg(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(cg(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Wp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ug(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Yd();for(const i of e){const e=this.nr(rc.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(qd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Yd();const s=hg(t,n),o=hg(t,hc.max());return ug(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(rc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ag(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return lg(e).get("remoteDocumentGlobalKey").next((e=>(Ou(!!e),e)))}tr(e,t){return lg(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ap(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=rc.fromSegments(t.noDocument.path),r=Yp(t.noDocument.readTime);n=Jh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Pu();{const e=rc.fromSegments(t.unknownDocument.path),r=Yp(t.unknownDocument.version);n=Jh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ju(e[0],e[1]);return Zu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Zu.min()))return e}return Jh.newInvalidDocument(e)}}function og(e){return new sg(e)}class ag extends ig{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Wd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new fh(((e,t)=>Hu(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Qp(this.ar.serializer,s);r=r.add(i.path.popLast());const l=zm(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Qp(this.ar.serializer,s.convertToNoDocument(Zu.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),gc.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function lg(e){return oh(e,"remoteDocumentGlobal")}function ug(e){return oh(e,"remoteDocumentsV14")}function cg(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function hg(e,t){const n=t.documentKey.path.toArray();return[e,Wp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function dg(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Hu(n[s],r[s]),i)return i;return i=Hu(n.length,r.length),i||(i=Hu(n[n.length-2],r[r.length-2]),i||Hu(n[n.length-1],r[r.length-1]))}class fg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Nf(n.mutation,e,gh.empty(),Ju.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,sf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sf();const r=$d();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Jd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$d();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,sf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Yd();const s=tf(),o=tf();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Rf)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Nf(o.mutation,t,o.mutation.getFieldMask(),Ju.now())):s.set(t.key,gh.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new fg(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=tf();let r=new ch(((e,t)=>e-t)),i=sf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||gh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||sf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=ef();l.forEach((e=>{if(!i.has(e)){const r=Cf(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return gc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return rc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):gc.resolve($d());let o=-1,a=i;return s.next((t=>gc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?gc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,sf()))).next((e=>({batchId:o,changes:Zd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rc(t)).next((e=>{let t=Jd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Jd();return this.indexManager.getCollectionParents(e,i).next((o=>gc.forEach(o,(o=>{const a=function(e,t){return new Nd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Jh.newInvalidDocument(r)))}));let n=Jd();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Nf(s.mutation,r,gh.empty(),Ju.now()),qd(t,r)&&(n=n.insert(e,r))})),n}))}}class mg{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return gc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vp(e.createTime)}}(t)),gc.resolve()}getNamedQuery(e,t){return gc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:$p(e.bundledQuery),readTime:vp(e.readTime)}}(t)),gc.resolve()}}class gg{constructor(){this.overlays=new ch(rc.comparator),this.hr=new Map}getOverlay(e,t){return gc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$d();return gc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),gc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),gc.resolve()}getOverlaysForCollection(e,t,n){const r=$d(),i=t.length+1,s=new rc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return gc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ch(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$d(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$d(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return gc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Uf(t,n));let i=this.hr.get(t);void 0===i&&(i=sf(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class yg{constructor(){this.Pr=new fh(vg.Ir),this.Tr=new fh(vg.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new vg(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new vg(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new rc(new ec([])),n=new vg(t,e),r=new vg(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new rc(new ec([])),n=new vg(t,e),r=new vg(t,e+1);let i=sf();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new vg(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vg{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return rc.comparator(e.key,t.key)||Hu(e.pr,t.pr)}static Er(e,t){return Hu(e.pr,t.pr)||rc.comparator(e.key,t.key)}}class bg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new fh(vg.Ir)}checkEmpty(e){return gc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new vg(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return gc.resolve(s)}lookupMutationBatch(e,t){return gc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return gc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return gc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return gc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vg(t,0),r=new vg(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),gc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fh(Hu);return t.forEach((e=>{const t=new vg(e,0),r=new vg(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),gc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;rc.isDocumentKey(i)||(i=i.child(""));const s=new vg(new rc(i),0);let o=new fh(Hu);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),gc.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ou(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return gc.forEach(t.mutations,(r=>{const i=new vg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new vg(t,0),r=this.wr.firstAfterOrEqual(n);return gc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,gc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wg{constructor(e){this.vr=e,this.docs=new ch(rc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gc.resolve(n?n.document.mutableCopy():Jh.newInvalidDocument(t))}getEntries(e,t){let n=Yd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Jh.newInvalidDocument(e))})),gc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Yd();const s=t.path,o=new rc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||dc(cc(o),n)<=0||(r.has(o.key)||qd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return gc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Pu()}Fr(e,t){return gc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Sg(this)}getSize(e){return gc.resolve(this.size)}}class Sg extends ig{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),gc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class _g{constructor(e){this.persistence=e,this.Mr=new Wd((e=>Id(e)),xd),this.lastRemoteSnapshotVersion=Zu.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yg,this.targetCount=0,this.Br=Qm.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),gc.resolve()}getLastRemoteSnapshotVersion(e){return gc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),gc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),gc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Qm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,gc.resolve()}updateTargetData(e,t){return this.qn(t),gc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,gc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),gc.waitFor(i).next((()=>r))}getTargetCount(e){return gc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return gc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),gc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),gc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),gc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return gc.resolve(n)}containsKey(e,t){return gc.resolve(this.Nr.containsKey(t))}}class Eg{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Cc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _g(this),this.indexManager=new Cm,this.remoteDocumentCache=function(e){return new wg(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Gp(t),this.$r=new mg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new bg(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Cu("MemoryPersistence","Starting transaction:",e);const r=new Ig(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return gc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Ig extends pc{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.zr=new yg,this.jr=null}static Hr(e){return new xg(e)}get Jr(){if(this.jr)return this.jr;throw Pu()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),gc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),gc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),gc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gc.forEach(this.Jr,(n=>{const r=rc.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Zu.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return gc.or([()=>gc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Tg{constructor(e){this.serializer=e}N(e,t,n,r){const i=new yc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lc,{unique:!0}),e.createObjectStore("documentMutations")}(e),kg(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=gc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),kg(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return gc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Jc});t.createIndex("collectionPathOverlayIndex",Zc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",$c,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:zc});t.createIndex("documentKeyIndex",Bc),t.createIndex("collectionGroupIndex",Uc)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Wc}).createIndex("sequenceNumberIndex",Hc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Yc}).createIndex("documentKeyIndex",Xc,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=zm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>gc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>gc.forEach(n,(n=>{Ou(n.userId===t.userId);const r=Xp(this.serializer,n);return jm(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ec(n),o=function(e){return[0,Pc(e)]}(s);r.push(t.get(o).next((n=>n?gc.resolve():(n=>t.put({targetId:0,path:Pc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>gc.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Qc});const n=t.store("collectionParents"),r=new Am,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Pc(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ec(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Mc(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Jp(n),i=Zp(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new rc(ec.fromString(e.document.name).popFirst(5)):e.noDocument?rc.fromSegments(e.noDocument.path):e.unknownDocument?rc.fromSegments(e.unknownDocument.path):Pu()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>gc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=og(this.serializer),i=new Eg(xg.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:sf();Xp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),gc.forEach(n,((e,n)=>{const s=new Iu(n),o=om.lt(this.serializer,s),a=i.getIndexManager(s),l=Bm.lt(s,this.serializer,a,i.referenceDelegate);return new pg(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new sh(t,Cc._e),e).next()}))}))}}function kg(e){e.createObjectStore("targetDocuments",{keyPath:Kc}).createIndex("documentTargetsIndex",Gc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qc,{unique:!0}),e.createObjectStore("targetGlobal")}const Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ag{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Ag.D())throw new Lu(Mu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ng(this,r),this.Ti=t+"main",this.serializer=new Gp(a),this.Ei=new vc(this.Ti,this.ui,new Tg(this.serializer)),this.Qr=new Wm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=og(this.serializer),this.$r=new rm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Au("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lu(Mu.FAILED_PRECONDITION,Cg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Cc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Dg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Sc(e))return Cu("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Cu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Ng(e).get("owner").next((e=>gc.resolve(this.Si(e))))}bi(e){return Dg(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=oh(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return gc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?gc.resolve(!0):Ng(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Lu(Mu.FAILED_PRECONDITION,Cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dg(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Cu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new sh(e,Cc._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Dg(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Bm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return om.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Cu("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?ih:14===e?rh:13===e?nh:12===e?th:11===e?eh:void Pu()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new sh(r,this.kr?this.kr.next():Cc._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Au("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Lu(Mu.FAILED_PRECONDITION,fc);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Ng(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Lu(Mu.FAILED_PRECONDITION,Cg)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ng(e).put("owner",t)}static D(){return vc.D()}yi(e){const t=Ng(e);return t.get("owner").next((e=>this.Si(e)?(Cu("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):gc.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Au("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Ft()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Cu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Au("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Au("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ng(e){return oh(e,"owner")}function Dg(e){return oh(e,"clientMetadata")}function Pg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Og{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=sf(),r=sf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Og(e,t.fromCache,n,r)}}class Rg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Ft()?8:vc.v(Mt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Rg;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ku()<=ln.DEBUG&&Cu("QueryEngine","SDK will not create cache indexes for query:",Ud(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),gc.resolve()):(ku()<=ln.DEBUG&&Cu("QueryEngine","Query:",Ud(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ku()<=ln.DEBUG&&Cu("QueryEngine","The SDK decides to create cache indexes for query:",Ud(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ld(t))):gc.resolve())}ji(e,t){if(Od(t))return gc.resolve(null);let n=Ld(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=jd(t,null,"F"),n=Ld(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=sf(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,jd(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Od(t)||r.isEqual(Zu.min())?gc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?gc.resolve(null):(ku()<=ln.DEBUG&&Cu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ud(t)),this.es(e,s,t,uc(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new fh(Gd(e));return t.forEach(((t,r)=>{qd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ku()<=ln.DEBUG&&Cu("QueryEngine","Using full collection scan to execute query:",Ud(t)),this.zi.getDocumentsMatchingQuery(e,t,hc.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Lg{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new ch(Hu),this.rs=new Wd((e=>Id(e)),xd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Fg(e,t,n,r){return new Lg(e,t,n,r)}async function Vg(e,t){const n=Ru(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=sf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function jg(e){const t=Ru(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function zg(e,t,n){let r=sf(),i=sf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Yd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Cu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Bg(e,t){const n=Ru(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ug(e,t){const n=Ru(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,gc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Kp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function qg(e,t,n){const r=Ru(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Sc(e))throw e;Cu("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Kg(e,t,n){const r=Ru(e);let i=Zu.min(),s=sf();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ru(e),i=r.rs.get(n);return void 0!==i?gc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Ld(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Zu.min(),n?s:sf()))).next((e=>(Wg(r,Kd(t),e),{documents:e,hs:s})))))}function Gg(e,t){const n=Ru(e),r=Ru(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Qg(e,t){const n=Ru(e),r=n.ss.get(t)||Zu.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,uc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Wg(n,t,e),e)))}function Wg(e,t,n){let r=e.ss.get(t)||Zu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sf();const r=await Ug(e,Ld($p(t.bundledQuery))),i=Ru(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=vp(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(vh.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Yg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Xg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Zg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Lu(r.error.code,r.error.message))),s?new Zg(e,t,r.state,i):(Au("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $g{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Lu(n.error.code,n.error.message))),i?new $g(e,n.state,r):(Au("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ey{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=af();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Dc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new ey(e,i):(Au("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ty{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ty(t.clientId,t.onlineState):(Au("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class ny{constructor(){this.activeTargetIds=af()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ry{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ch(Hu),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Yg(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ny),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Yg(this.persistenceKey,n));if(e){const t=ey.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Jg(this.persistenceKey,e));if(n){const r=$g.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jg(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Cu("SharedClientState","READ",e,t),t}setItem(e,t){Cu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Cu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Cu("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Au("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Cc._e;if(null!=e)try{const n=JSON.parse(e);Ou("number"==typeof n),t=n}catch(e){Au("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Cc._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Zg(this.currentUser,e,t,n),i=Xg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Xg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Jg(this.persistenceKey,e),i=new $g(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return ey.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zg.Es(new Iu(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return $g.Es(r,t)}xs(e){return ty.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Cu("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=af();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class iy{constructor(){this.no=new ny,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ny,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sy{io(e){}shutdown(){}}class oy{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Cu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Cu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ay=null;function ly(){return null===ay?ay=268435456+Math.round(2147483648*Math.random()):ay++,"0x"+ay.toString(16)}const uy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cy{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const hy="WebChannelConnection";class dy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=ly(),o=this.bo(e,t.toUriEncodedString());Cu("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Cu("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Nu("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=uy[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=ly();return new Promise(((s,o)=>{const a=new wu;a.setWithCredentials(!0),a.listenOnce(gu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case mu.NO_ERROR:const t=a.getResponseJson();Cu(hy,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case mu.TIMEOUT:Cu(hy,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Lu(Mu.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const n=a.getStatus();if(Cu(hy,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Mu).indexOf(t)>=0?t:Mu.UNKNOWN}(t.status);o(new Lu(e,t.message))}else o(new Lu(Mu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Lu(Mu.UNAVAILABLE,"Connection failed."));break;default:Pu()}}finally{Cu(hy,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Cu(hy,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=ly(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fu(),o=pu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Cu(hy,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new cy({lo:t=>{d?Cu(hy,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Cu(hy,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Cu(hy,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,bu.EventType.OPEN,(()=>{d||Cu(hy,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,bu.EventType.CLOSE,(()=>{d||(d=!0,Cu(hy,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,bu.EventType.ERROR,(t=>{d||(d=!0,Nu(hy,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Lu(Mu.UNAVAILABLE,"The operation could not be completed")))})),p(c,bu.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ou(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Cu(hy,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Kf[e];if(void 0!==t)return Wf(t)}(t),i=o.message;void 0===n&&(n=Mu.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Lu(n,i)),c.close()}else Cu(hy,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,yu.STAT_EVENT,(t=>{t.stat===vu.PROXY?Cu(hy,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===vu.NOPROXY&&Cu(hy,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function fy(){return"undefined"!=typeof window?window:null}function py(){return"undefined"!=typeof document?document:null}function my(e){return new fp(e,!0)}class gy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Cu("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class yy{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new gy(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Mu.RESOURCE_EXHAUSTED?(Au(t.toString()),Au("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Mu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Lu(Mu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Cu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Cu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vy extends yy{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ou(void 0===t||"string"==typeof t),vh.fromBase64String(t||"")):(Ou(void 0===t||t instanceof Uint8Array),vh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Mu.UNKNOWN:Wf(e.code);return new Lu(t,e.message||"")}(o);n=new sp(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ep(e,r.document.name),s=vp(r.document.updateTime),o=r.document.createTime?vp(r.document.createTime):Zu.min(),a=new Yh({mapValue:{fields:r.document.fields}}),l=Jh.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new rp(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ep(e,r.document),s=r.readTime?vp(r.readTime):Zu.min(),o=Jh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rp([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ep(e,r.document),s=r.removedTargetIds||[];n=new rp([],s,i,null)}else{if(!("filter"in t))return Pu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new qf(r,i),o=e.targetId;n=new ip(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zu.min():t.readTime?vp(t.readTime):Zu.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Td(r)?{documents:Pp(e,r)}:{query:Op(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gp(e,t.resumeToken);const r=pp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zu.min())>0){n.readTime=mp(e,t.snapshotVersion.toTimestamp());const r=pp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.t_(t)}}class by extends yy{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ou(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ou(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?vp(e.updateTime):vp(t);return n.isEqual(Zu.min())&&(n=vp(t)),new If(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=vp(e.commitTime);return this.listener.T_(n,t)}return Ou(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Tp(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Np(this.serializer,e)))};this.t_(t)}}class wy extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Lu(Mu.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,wp(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lu(Mu.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,wp(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lu(Mu.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Sy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Au(t),this.g_=!1):Cu("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class _y{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Dy(this)&&(Cu("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ru(e);t.v_.add(4),await Iy(t),t.x_.set("Unknown"),t.v_.delete(4),await Ey(t)}(this))}))})),this.x_=new Sy(n,r)}}async function Ey(e){if(Dy(e))for(const t of e.F_)await t(!0)}async function Iy(e){for(const t of e.F_)await t(!1)}function xy(e,t){const n=Ru(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Ny(n)?Ay(n):Yy(n).Jo()&&ky(n,t))}function Ty(e,t){const n=Ru(e),r=Yy(n);n.C_.delete(t),r.Jo()&&Cy(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Dy(n)&&n.x_.set("Unknown"))}function ky(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yy(e).c_(t)}function Cy(e,t){e.O_.Oe(t),Yy(e).l_(t)}function Ay(e){e.O_=new ap({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Yy(e).start(),e.x_.p_()}function Ny(e){return Dy(e)&&!Yy(e).Ho()&&e.C_.size>0}function Dy(e){return 0===Ru(e).v_.size}function Py(e){e.O_=void 0}async function Oy(e){e.C_.forEach(((t,n)=>{ky(e,t)}))}async function Ry(e,t){Py(e),Ny(e)?(e.x_.S_(t),Ay(e)):e.x_.set("Unknown")}async function My(e,t,n){if(e.x_.set("Online"),t instanceof sp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Cu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ly(e,n)}else if(t instanceof rp?e.O_.$e(t):t instanceof ip?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Zu.min()))try{const t=await jg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(vh.EMPTY_BYTE_STRING,r.snapshotVersion)),Cy(e,t);const i=new Kp(r.target,t,n,r.sequenceNumber);ky(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Cu("RemoteStore","Failed to raise snapshot:",t),await Ly(e,t)}}async function Ly(e,t,n){if(!Sc(t))throw t;e.v_.add(1),await Iy(e),e.x_.set("Offline"),n||(n=()=>jg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Cu("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Ey(e)}))}function Fy(e,t){return t().catch((n=>Ly(e,n,t)))}async function Vy(e){const t=Ru(e),n=Xy(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;jy(t);)try{const e=await Bg(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,zy(t,e)}catch(e){await Ly(t,e)}By(t)&&Uy(t)}function jy(e){return Dy(e)&&e.D_.length<10}function zy(e,t){e.D_.push(t);const n=Xy(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function By(e){return Dy(e)&&!Xy(e).Ho()&&e.D_.length>0}function Uy(e){Xy(e).start()}async function qy(e){Xy(e).d_()}async function Ky(e){const t=Xy(e);for(const n of e.D_)t.I_(n.mutations)}async function Gy(e,t,n){const r=e.D_.shift(),i=Bf.from(r,t,n);await Fy(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Vy(e)}async function Qy(e,t){t&&Xy(e).P_&&await async function(e,t){if(function(e){return Qf(e)&&e!==Mu.ABORTED}(t.code)){const n=e.D_.shift();Xy(e).Zo(),await Fy(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Vy(e)}}(e,t),By(e)&&Uy(e)}async function Wy(e,t){const n=Ru(e);n.asyncQueue.verifyOperationInProgress(),Cu("RemoteStore","RemoteStore received new credentials");const r=Dy(n);n.v_.add(3),await Iy(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Ey(n)}async function Hy(e,t){const n=Ru(e);t?(n.v_.delete(2),await Ey(n)):t||(n.v_.add(2),await Iy(n),n.x_.set("Unknown"))}function Yy(e){return e.N_||(e.N_=function(e,t,n){const r=Ru(e);return r.R_(),new vy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Oy.bind(null,e),To:Ry.bind(null,e),u_:My.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Ny(e)?Ay(e):e.x_.set("Unknown")):(await e.N_.stop(),Py(e))}))),e.N_}function Xy(e){return e.B_||(e.B_=function(e,t,n){const r=Ru(e);return r.R_(),new by(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:qy.bind(null,e),To:Qy.bind(null,e),E_:Ky.bind(null,e),T_:Gy.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Vy(e)):(await e.B_.stop(),e.D_.length>0&&(Cu("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Jy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Jy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lu(Mu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(e,t){if(Au("AsyncQueue","".concat(t,": ").concat(e)),Sc(e))return new Lu(Mu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class $y{constructor(e){this.comparator=e?(t,n)=>e(t,n)||rc.comparator(t.key,n.key):(e,t)=>rc.comparator(e.key,t.key),this.keyedMap=Jd(),this.sortedSet=new ch(this.comparator)}static emptySet(e){return new $y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $y))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new $y;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ev{constructor(){this.L_=new ch(rc.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Pu():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class tv{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new tv(e,t,$y.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nv{constructor(){this.q_=void 0,this.Q_=[]}}class rv{constructor(){this.queries=new Wd((e=>Bd(e)),zd),this.onlineState="Unknown",this.K_=new Set}}async function iv(e,t){const n=Ru(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new nv),i)try{s.q_=await n.onListen(r)}catch(e){const n=Zy(e,"Initialization of query '".concat(Ud(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&lv(n)}async function sv(e,t){const n=Ru(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function ov(e,t){const n=Ru(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&lv(n)}function av(e,t,n){const r=Ru(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function lv(e){e.K_.forEach((e=>{e.next()}))}class uv{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class cv{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class hv{constructor(e){this.serializer=e}Ps(e){return Ep(this.serializer,e)}Is(e){return e.metadata.exists?Ap(this.serializer,e.document,!1):Jh.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return vp(e)}}class dv{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fv(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=ec.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new hv(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||sf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ru(e);let s=sf(),o=Yd();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Ug(i,function(e){return Ld(Pd(ec.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>zg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new hv(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Hg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function fv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class pv{constructor(e){this.key=e}}class mv{constructor(e){this.key=e}}class gv{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=sf(),this.mutatedKeys=sf(),this.ua=Gd(e),this.ca=new $y(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new ev,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=qd(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pu()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new tv(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ev,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=sf(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new mv(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new pv(n))})),t}Ra(e){this.oa=e.hs,this.aa=sf();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return tv.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class yv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vv{constructor(e){this.key=e,this.ma=!1}}class bv{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Wd((e=>Bd(e)),zd),this.pa=new Map,this.ya=new Set,this.wa=new ch(rc.comparator),this.Sa=new Map,this.ba=new yg,this.Da={},this.Ca=new Map,this.va=Qm.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function wv(e,t){const n=Qv(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Ug(n.localStore,Ld(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Sv(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&xy(n.remoteStore,e)}return i}async function Sv(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Kg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Pv(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await Kg(e.localStore,t,!0),o=new gv(t,s.hs),a=o.ha(s.documents),l=np.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Pv(e,n,u.da);const c=new yv(t,n,o);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function _v(e,t){const n=Ru(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!zd(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qg(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ty(n.remoteStore,r.targetId),Nv(n,r.targetId)})).catch(mc)):(Nv(n,r.targetId),await qg(n.localStore,r.targetId,!0))}async function Ev(e,t){const n=Ru(e);try{const e=await function(e,t){const n=Ru(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(vh.EMPTY_BYTE_STRING,Zu.min()).withLastLimboFreeSnapshotVersion(Zu.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=Yd(),l=sf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(zg(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Zu.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return gc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Ou(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Ou(r.ma):e.removedDocuments.size>0&&(Ou(r.ma),r.ma=!1))})),await Mv(n,e,t)}catch(e){await mc(e)}}function Iv(e,t,n){const r=Ru(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ru(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&lv(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xv(e,t,n){const r=Ru(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new ch(rc.comparator);e=e.insert(s,Jh.newNoDocument(s,Zu.min()));const n=sf().add(s),i=new tp(Zu.min(),new Map,new ch(Hu),e,n);await Ev(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Rv(r)}else await qg(r.localStore,t,!1).then((()=>Nv(r,t,n))).catch(mc)}async function Tv(e,t){const n=Ru(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ru(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=gc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ou(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Av(n,r,null),Cv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mv(n,e)}catch(e){await mc(e)}}async function kv(e,t,n){const r=Ru(e);try{const e=await function(e,t){const n=Ru(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ou(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Av(r,t,n),Cv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Mv(r,e)}catch(n){await mc(n)}}function Cv(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Av(e,t,n){const r=Ru(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Nv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Dv(e,t)}))}function Dv(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Ty(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Rv(e))}function Pv(e,t,n){for(const r of n)r instanceof pv?(e.ba.addReference(r.key,t),Ov(e,r)):r instanceof mv?(Cu("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Dv(e,r.key)):Pu()}function Ov(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Cu("SyncEngine","New document in limbo: "+n),e.ya.add(r),Rv(e))}function Rv(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new rc(ec.fromString(t)),r=e.va.next();e.Sa.set(r,new vv(n)),e.wa=e.wa.insert(n,r),xy(e.remoteStore,new Kp(Ld(Pd(n.path)),r,"TargetPurposeLimboResolution",Cc._e))}}async function Mv(e,t,n){const r=Ru(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Og.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Ru(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>gc.forEach(t,(t=>gc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>gc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Sc(e))throw e;Cu("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Lv(e,t){const n=Ru(e);if(!n.currentUser.isEqual(t)){Cu("SyncEngine","User change. New user:",t.toKey());const e=await Vg(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Lu(Mu.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Mv(n,e.us)}}function Fv(e,t){const n=Ru(e),r=n.Sa.get(t);if(r&&r.ma)return sf().add(r.key);{let e=sf();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Vv(e,t){const n=Ru(e),r=await Kg(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Pv(n,t.targetId,i.da),i}async function jv(e,t){const n=Ru(e);return Qg(n.localStore,t).then((e=>Mv(n,e)))}async function zv(e,t,n,r){const i=Ru(e),s=await function(e,t){const n=Ru(e),r=Ru(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):gc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Vy(i.remoteStore):"acknowledged"===n||"rejected"===n?(Av(i,t,r||null),Cv(i,t),function(e,t){Ru(Ru(e).mutationQueue).Mn(t)}(i.localStore,t)):Pu(),await Mv(i,s)):Cu("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Bv(e,t,n){const r=Ru(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Ug(r.localStore,Ld(t[0]));for(const e of t){const t=r.ga.get(e),n=await Vv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Gg(r.localStore,o);e=await Ug(r.localStore,t),await Sv(r,Uv(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Uv(e){return Dd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qv(e){return function(e){return Ru(Ru(e).persistence).Li()}(Ru(e).localStore)}async function Kv(e,t,n,r){const i=Ru(e);if(i.Fa)return void Cu("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Qg(i.localStore,Kd(s[0])),r=tp.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,vh.EMPTY_BYTE_STRING);await Mv(i,e,r);break}case"rejected":await qg(i.localStore,t,!0),Nv(i,t,r);break;default:Pu()}}async function Gv(e,t,n){const r=Qv(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Cu("SyncEngine","Adding an already active target "+e);continue}const t=await Gg(r.localStore,e),n=await Ug(r.localStore,t);await Sv(r,Uv(t),n.targetId,!1,n.resumeToken),xy(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await qg(r.localStore,e,!1).then((()=>{Ty(r.remoteStore,e),Nv(r,e)})).catch(mc)}}function Qv(e){const t=Ru(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ev.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xv.bind(null,t),t.fa.u_=ov.bind(null,t.eventManager),t.fa.xa=av.bind(null,t.eventManager),t}function Wv(e){const t=Ru(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kv.bind(null,t),t}class Hv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=my(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Fg(this.persistence,new Mg,e.initialUser,this.serializer)}createPersistence(e){return new Eg(xg.Hr,this.serializer)}createSharedClientState(e){return new iy}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Yv extends Hv{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Wv(this.Na.syncEngine),await Vy(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Fg(this.persistence,new Mg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new $m(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new kc(t,this.persistence);return new Tc(e.asyncQueue,n)}createPersistence(e){const t=Pg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vm.withCacheSize(this.cacheSizeBytes):Vm.DEFAULT;return new Ag(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fy(),py(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new iy}}class Xv extends Yv{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof ry&&(this.sharedClientState.syncEngine={Zs:zv.bind(null,t),Xs:Kv.bind(null,t),eo:Gv.bind(null,t),Li:qv.bind(null,t),Ys:jv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ru(e);if(Qv(n),Wv(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Bv(n,e.toArray());n.Fa=!0,await Hy(n.remoteStore,!0);for(const r of t)xy(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Nv(n,i),qg(n.localStore,i,!0)))),Ty(n.remoteStore,i)})),await t,await Bv(n,e),function(e){const t=Ru(e);t.Sa.forEach(((e,n)=>{Ty(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new ch(rc.comparator)}(n),n.Fa=!1,await Hy(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=fy();if(!ry.D(t))throw new Lu(Mu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Pg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ry(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Jv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Iv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lv.bind(null,this.syncEngine),await Hy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rv}createDatastore(e){const t=my(e.databaseInfo.databaseId),n=function(e){return new dy(e)}(e.databaseInfo);return function(e,t,n,r){return new wy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _y(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Iv(this.syncEngine,e,0)),oy.D()?new oy:new sy)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new bv(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ru(e);Cu("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Iy(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Zv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Au("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class eb{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Fu,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new cv(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class tb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Lu(Mu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ru(e),r={documents:t.map((e=>_p(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,ec.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ou(!!t.found),t.found.name,t.found.updateTime;const n=Ep(e,t.found.name),r=vp(t.found.updateTime),i=t.found.createTime?vp(t.found.createTime):Zu.min(),s=new Yh({mapValue:{fields:t.found.fields}});return Jh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ou(!!t.missing),Ou(!!t.readTime);const n=Ep(e,t.missing),r=vp(t.readTime);return Jh.newNoDocument(n,r)}(e,t):Pu()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Ou(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=rc.fromPath(t);this.mutations.push(new jf(n,this.precondition(n)))})),await async function(e,t){const n=Ru(e),r={writes:t.map((e=>Np(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ec.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pu();t=Zu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lu(Mu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zu.min())?xf.exists(!1):xf.updateTime(t):xf.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zu.min()))throw new Lu(Mu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xf.updateTime(t)}return xf.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nb{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new gy(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new tb(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Ac(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qf(t)}return!1}}class rb{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Iu.UNAUTHENTICATED,this.clientId=Wu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Cu("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Cu("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lu(Mu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Zy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ib(e,t){e.asyncQueue.verifyOperationInProgress(),Cu("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Vg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ab(e);Cu("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Wy(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Wy(t.remoteStore,n))),e._onlineComponents=t}function ob(e){return"FirebaseError"===e.name?e.code===Mu.FAILED_PRECONDITION||e.code===Mu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ab(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Cu("FirestoreClient","Using user provided OfflineComponentProvider");try{await ib(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ob(n))throw n;Nu("Error using user provided cache. Falling back to memory cache: "+n),await ib(e,new Hv)}}else Cu("FirestoreClient","Using default OfflineComponentProvider"),await ib(e,new Hv);return e._offlineComponents}async function lb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Cu("FirestoreClient","Using user provided OnlineComponentProvider"),await sb(e,e._uninitializedComponentsProvider._online)):(Cu("FirestoreClient","Using default OnlineComponentProvider"),await sb(e,new Jv))),e._onlineComponents}function ub(e){return ab(e).then((e=>e.persistence))}function cb(e){return ab(e).then((e=>e.localStore))}function hb(e){return lb(e).then((e=>e.remoteStore))}function db(e){return lb(e).then((e=>e.syncEngine))}function fb(e){return lb(e).then((e=>e.datastore))}async function pb(e){const t=await lb(e),n=t.eventManager;return n.onListen=wv.bind(null,t.syncEngine),n.onUnlisten=_v.bind(null,t.syncEngine),n}function mb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new $v({next:s=>{t.enqueueAndForget((()=>sv(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Lu(Mu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Lu(Mu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new uv(Pd(n.path),s,{includeMetadataChanges:!0,Z_:!0});return iv(e,o)}(await pb(e),e.asyncQueue,t,n,r))),r.promise}function gb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new $v({next:n=>{t.enqueueAndForget((()=>sv(e,o))),n.fromCache&&"server"===r.source?i.reject(new Lu(Mu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new uv(n,s,{includeMetadataChanges:!0,Z_:!0});return iv(e,o)}(await pb(e),e.asyncQueue,t,n,r))),r.promise}function yb(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Yf().encode(e):e,function(e,t){return new eb(e,t)}(function(e,t){if(e instanceof Uint8Array)return Zv(e,t);if(e instanceof ArrayBuffer)return Zv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,my(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ru(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ru(e),r=vp(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(fv(r));const i=new dv(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await Mv(e,o.sa,void 0),await function(e,t){const n=Ru(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return Nu("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await db(e),i,r)}))}function vb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bb=new Map;function wb(e,t,n){if(!n)throw new Lu(Mu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sb(e,t,n,r){if(!0===t&&!0===r)throw new Lu(Mu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _b(e){if(!rc.isDocumentKey(e))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eb(e){if(rc.isDocumentKey(e))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ib(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Pu()}function xb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lu(Mu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ib(e);throw new Lu(Mu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Tb(e,t){if(t<=0)throw new Lu(Mu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class kb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Lu(Mu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lu(Mu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Lu(Mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Lu(Mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Lu(Mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ju;switch(e.type){case"firstParty":return new qu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Lu(Mu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bb.get(e);t&&(Cu("ComponentProvider","Removing Datastore"),bb.delete(e),t.terminate())}(this),Promise.resolve()}}function Ab(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=xb(e,Cb))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Nu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Iu.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Lu(Mu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Iu(s)}e._authCredentials=new zu(new Vu(t,n))}}class Nb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Nb(this.firestore,e,this._query)}}class Db{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Db(this.firestore,e,this._key)}}class Pb extends Nb{constructor(e,t,n){super(e,t,Pd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Db(this.firestore,null,new rc(e))}withConverter(e){return new Pb(this.firestore,e,this._path)}}function Ob(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tn(e),wb("collection","path",t),e instanceof Cb){const n=ec.fromString(t,...r);return Eb(n),new Pb(e,null,n)}{if(!(e instanceof Db||e instanceof Pb))throw new Lu(Mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ec.fromString(t,...r));return Eb(n),new Pb(e.firestore,null,n)}}function Rb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tn(e),1===arguments.length&&(t=Wu.newId()),wb("doc","path",t),e instanceof Cb){const n=ec.fromString(t,...r);return _b(n),new Db(e,null,new rc(n))}{if(!(e instanceof Db||e instanceof Pb))throw new Lu(Mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ec.fromString(t,...r));return _b(n),new Db(e.firestore,e instanceof Pb?e.converter:null,new rc(n))}}function Mb(e,t){return e=tn(e),t=tn(t),(e instanceof Db||e instanceof Pb)&&(t instanceof Db||t instanceof Pb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Lb(e,t){return e=tn(e),t=tn(t),e instanceof Nb&&t instanceof Nb&&e.firestore===t.firestore&&zd(e._query,t._query)&&e.converter===t.converter}class Fb{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new gy(this,"async_queue_retry"),this._u=()=>{const e=py();e&&Cu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=py();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=py();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Fu;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Sc(e))throw e;Cu("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Au("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Jy.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Pu()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Vb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zb extends Cb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Fb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ub(this),this._firestoreClient.terminate()}}function Bb(e){return e._firestoreClient||Ub(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ub(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Th(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,vb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new rb(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qb(e,t,n){const r=new Fu;return e.asyncQueue.enqueue((async()=>{try{await ib(e,n),await sb(e,t),r.resolve()}catch(e){const n=e;if(!ob(n))throw n;Nu("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Kb(e){return function(e){const t=new Fu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ru(e);Dy(n.remoteStore)||Cu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ru(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Zy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await db(e),t))),t.promise}(Bb(e=xb(e,zb)))}function Gb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ub(e),n=await hb(e);return t.setNetworkEnabled(!0),function(e){const t=Ru(e);return t.v_.delete(0),Ey(t)}(n)}))}(Bb(e=xb(e,zb)))}function Qb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ub(e),n=await hb(e);return t.setNetworkEnabled(!1),async function(e){const t=Ru(e);t.v_.add(0),await Iy(t),t.x_.set("Offline")}(n)}))}(Bb(e=xb(e,zb)))}function Wb(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ru(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await cb(e),t)))}(Bb(e=xb(e,zb)),t).then((t=>t?new Nb(e,null,t.query):null))}function Hb(e){if(e._initialized||e._terminated)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yb(vh.fromBase64String(e))}catch(e){throw new Lu(Mu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Yb(vh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jb{constructor(e){this._methodName=e}}class Zb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lu(Mu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lu(Mu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hu(this._lat,e._lat)||Hu(this._long,e._long)}}const $b=/^__.*__$/;class ew{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Of(e,this.data,t,this.fieldTransforms)}}class tw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pu()}}class rw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new rw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ew(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(nw(this.du)&&$b.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class iw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||my(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rw({du:e,methodName:t,wu:n,path:nc.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sw(e){const t=e._freezeSettings(),n=my(e._databaseId);return new iw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ow(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);bw("Data must be an object, but it was:",o,r);const a=yw(r,o);let l,u;if(s.merge)l=new gh(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ww(t,r,n);if(!o.contains(i))throw new Lu(Mu.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Iw(e,i)||e.push(i)}l=new gh(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new ew(new Yh(a),l,u)}class aw extends Jb{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aw}}function lw(e,t,n){return new rw({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uw extends Jb{_toFieldTransform(e){return new Ef(e.path,new mf)}isEqual(e){return e instanceof uw}}class cw extends Jb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=lw(this,e,!0),n=this.bu.map((e=>gw(e,t))),r=new gf(n);return new Ef(e.path,r)}isEqual(e){return e instanceof cw&&Gt(this.bu,e.bu)}}class hw extends Jb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=lw(this,e,!0),n=this.bu.map((e=>gw(e,t))),r=new vf(n);return new Ef(e.path,r)}isEqual(e){return e instanceof hw&&Gt(this.bu,e.bu)}}class dw extends Jb{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new wf(e.serializer,cf(e.serializer,this.Du));return new Ef(e.path,t)}isEqual(e){return e instanceof dw&&this.Du===e.Du}}function fw(e,t,n,r){const i=e.Su(1,t,n);bw("Data must be an object, but it was:",i,r);const s=[],o=Yh.empty();lh(r,((e,r)=>{const a=_w(t,e,n);r=tn(r);const l=i.fu(a);if(r instanceof aw)s.push(a);else{const e=gw(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new gh(s);return new tw(o,a,i.fieldTransforms)}function pw(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[ww(t,r,n)],l=[i];if(s.length%2!=0)throw new Lu(Mu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(ww(t,s[d])),l.push(s[d+1]);const u=[],c=Yh.empty();for(let d=a.length-1;d>=0;--d)if(!Iw(u,a[d])){const e=a[d];let t=l[d];t=tn(t);const n=o.fu(e);if(t instanceof aw)u.push(e);else{const r=gw(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new gh(u);return new tw(c,h,o.fieldTransforms)}function mw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gw(n,e.Su(r?4:3,t))}function gw(e,t){if(vw(e=tn(e)))return bw("Unsupported field value:",t,e),yw(e,t);if(e instanceof Jb)return function(e,t){if(!nw(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gw(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=tn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ju.fromDate(e);return{timestampValue:mp(t.serializer,n)}}if(e instanceof Ju){const n=new Ju(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mp(t.serializer,n)}}if(e instanceof Zb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yb)return{bytesValue:gp(t.serializer,e._byteString)};if(e instanceof Db){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:bp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Ib(e)))}(e,t)}function yw(e,t){const n={};return uh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lh(e,((e,r)=>{const i=gw(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ju||e instanceof Zb||e instanceof Yb||e instanceof Db||e instanceof Jb)}function bw(e,t,n){if(!vw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ib(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function ww(e,t,n){if((t=tn(t))instanceof Xb)return t._internalPath;if("string"==typeof t)return _w(e,t);throw Ew("Field path arguments must be of type string or ",e,!1,void 0,n)}const Sw=new RegExp("[~\\*/\\[\\]]");function _w(e,t,n){if(t.search(Sw)>=0)throw Ew("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Xb(...t.split("."))._internalPath}catch(gs){throw Ew("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ew(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Lu(Mu.INVALID_ARGUMENT,a+e+l)}function Iw(e,t){return e.some((e=>e.isEqual(t)))}class xw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Db(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tw extends xw{data(){return super.data()}}function kw(e,t){return"string"==typeof t?_w(e,t):t instanceof Xb?t._internalPath:t._delegate._internalPath}function Cw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lu(Mu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Aw{}class Nw extends Aw{}function Dw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Aw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ow)).length,n=e.filter((e=>e instanceof Pw)).length;if(t>1||t>0&&n>0)throw new Lu(Mu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Pw extends Nw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Pw(e,t,n)}_apply(e){const t=this._parse(e);return Bw(e._query,t),new Nb(e.firestore,e.converter,Vd(e._query,t))}_parse(e){const t=sw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){zw(o,s);const t=[];for(const n of o)t.push(jw(r,e,n));a={arrayValue:{values:t}}}else a=jw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||zw(o,s),a=mw(n,t,o,"in"===s||"not-in"===s);return id.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ow extends Aw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ow(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:sd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Bw(n,i),n=Vd(n,i)}(e._query,t),new Nb(e.firestore,e.converter,Vd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Rw extends Nw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Rw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new td(t,n)}(e._query,this._field,this._direction);return new Nb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Nd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Mw extends Nw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Mw(e,t,n)}_apply(e){return new Nb(e.firestore,e.converter,jd(e._query,this._limit,this._limitType))}}class Lw extends Nw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Lw(e,t,n)}_apply(e){const t=Vw(e,this.type,this._docOrFields,this._inclusive);return new Nb(e.firestore,e.converter,function(e,t){return new Nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Fw extends Nw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Fw(e,t,n)}_apply(e){const t=Vw(e,this.type,this._docOrFields,this._inclusive);return new Nb(e.firestore,e.converter,function(e,t){return new Nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Vw(e,t,n,r){if(n[0]=tn(n[0]),n[0]instanceof xw)return function(e,t,n,r,i){if(!r)throw new Lu(Mu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Md(e))if(o.field.isKeyField())s.push(Fh(t,r.key));else{const e=r.data.field(o.field);if(Eh(e))throw new Lu(Mu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Zh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=sw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Lu(Mu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Rd(e)&&-1!==s.indexOf("/"))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ec.fromString(s));if(!rc.isDocumentKey(n))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new rc(n);a.push(Fh(t,i))}else{const e=mw(n,r,s);a.push(e)}}return new Zh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function jw(e,t,n){if("string"==typeof(n=tn(n))){if(""===n)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rd(t)&&-1!==n.indexOf("/"))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ec.fromString(n));if(!rc.isDocumentKey(r))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fh(e,new rc(r))}if(n instanceof Db)return Fh(e,n._key);throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ib(n),"."))}function zw(e,t){if(!Array.isArray(e)||0===e.length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Bw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Uw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_h(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return lh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Zb(Sh(e.latitude),Sh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ih(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xh(e));default:return null}}convertTimestamp(e){const t=wh(e);return new Ju(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ec.fromString(e);Ou(qp(n));const r=new kh(n.get(1),n.get(3)),i=new rc(n.popFirst(5));return r.isEqual(t)||Au("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function qw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Kw extends Uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Db(this.firestore,null,t)}}class Gw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qw extends xw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ww extends Qw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Hw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Gw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ww(this._firestore,this._userDataWriter,n.key,n,new Gw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lu(Mu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ww(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Gw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ww(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Yw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Yw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pu()}}function Xw(e,t){return e instanceof Qw&&t instanceof Qw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Hw&&t instanceof Hw&&e._firestore===t._firestore&&Lb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Jw extends Uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Db(this.firestore,null,t)}}function Zw(e){e=xb(e,Db);const t=xb(e.firestore,zb),n=Bb(t),r=new Jw(t);return function(e,t){const n=new Fu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ru(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Lu(Mu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Zy(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await cb(e),t,n))),n.promise}(n,e._key).then((n=>new Qw(t,r,e._key,n,new Gw(null!==n&&n.hasLocalMutations,!0),e.converter)))}function $w(e){e=xb(e,Nb);const t=xb(e.firestore,zb),n=Bb(t),r=new Jw(t);return function(e,t){const n=new Fu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Kg(e,t,!0),i=new gv(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Zy(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await cb(e),t,n))),n.promise}(n,e._query).then((n=>new Hw(t,r,e,n)))}function eS(e,t,n){e=xb(e,Db);const r=xb(e.firestore,zb),i=qw(e.converter,t,n);return iS(r,[ow(sw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xf.none())])}function tS(e,t,n){e=xb(e,Db);const r=xb(e.firestore,zb),i=sw(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=tn(t))||t instanceof Xb?pw(i,"updateDoc",e._key,t,n,a):fw(i,"updateDoc",e._key,t),iS(r,[s.toMutation(e._key,xf.exists(!0))])}function nS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=tn(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Vb(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Vb(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Db)h=xb(e.firestore,zb),d=Pd(e._key.path),c={next:t=>{n[l]&&n[l](sS(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=xb(e,Nb);h=xb(t.firestore,zb),d=t._query;const r=new Jw(h);c={next:e=>{n[l]&&n[l](new Hw(h,r,t,e))},error:n[l+1],complete:n[l+2]},Cw(e._query)}return function(e,t,n,r){const i=new $v(r),s=new uv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>iv(await pb(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>sv(await pb(e),s)))}}(Bb(h),d,u,c)}function rS(e,t){return function(e,t){const n=new $v(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ru(e).K_.add(t),t.next()}(await pb(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ru(e).K_.delete(t)}(await pb(e),n)))}}(Bb(e=xb(e,zb)),Vb(t)?t:{next:t})}function iS(e,t){return function(e,t){const n=new Fu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Wv(e);try{const e=await function(e,t){const n=Ru(e),r=Ju.now(),i=t.reduce(((e,t)=>e.add(t.key)),sf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Yd(),l=sf();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Df(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Rf(e.key,t,Xh(t.value.mapValue),xf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Zd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new ch(Hu)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Mv(r,e.changes),await Vy(r.remoteStore)}catch(e){const t=Zy(e,"Failed to persist write");n.reject(t)}}(await db(e),t,n))),n.promise}(Bb(e),t)}function sS(e,t,n){const r=n.docs.get(t._key),i=new Jw(e);return new Qw(e,i,t._key,r,new Gw(n.hasPendingWrites,n.fromCache),t.converter)}const oS={maxAttempts:5};class aS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sw(e)}set(e,t,n){this._verifyNotCommitted();const r=lS(e,this._firestore),i=qw(r.converter,t,n),s=ow(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,xf.none())),this}update(e,t,n){this._verifyNotCommitted();const r=lS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=tn(t))||t instanceof Xb?pw(this._dataReader,"WriteBatch.update",r._key,t,n,o):fw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,xf.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lS(e,this._firestore);return this._mutations=this._mutations.concat(new Vf(t._key,xf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lu(Mu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lS(e,t){if((e=tn(e)).firestore!==t)throw new Lu(Mu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class uS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sw(e)}get(e){const t=lS(e,this._firestore),n=new Kw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Pu();const r=e[0];if(r.isFoundDocument())return new xw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new xw(this._firestore,n,t._key,null,t.converter);throw Pu()}))}set(e,t,n){const r=lS(e,this._firestore),i=qw(r.converter,t,n),s=ow(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=lS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=tn(t))||t instanceof Xb?pw(this._dataReader,"Transaction.update",r._key,t,n,o):fw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=lS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lS(e,this._firestore),n=new Jw(this._firestore);return super.get(e).then((e=>new Qw(this._firestore,n,t._key,e._document,new Gw(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xu=e}(Hn),Un(new nn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new zb(new Bu(e.getProvider("auth-internal")),new Gu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lu(Mu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),$n(Eu,"4.4.3",e),$n(Eu,"4.4.3","esm2017")}();function cS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hS(){if("undefined"===typeof Uint8Array)throw new Lu("unimplemented","Uint8Arrays are not available in this environment.")}function dS(){if("undefined"==typeof atob)throw new Lu("unimplemented","Blobs are unavailable in Firestore in this environment.")}class fS{constructor(e){this._delegate=e}static fromBase64String(e){return dS(),new fS(Yb.fromBase64String(e))}static fromUint8Array(e){return hS(),new fS(Yb.fromUint8Array(e))}toBase64(){return dS(),this._delegate.toBase64()}toUint8Array(){return hS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class mS{enableIndexedDbPersistence(e,t){return function(e,t){Hb(e=xb(e,zb));const n=Bb(e);if(n._uninitializedComponentsProvider)throw new Lu(Mu.FAILED_PRECONDITION,"SDK cache is already specified.");Nu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Jv;return qb(n,i,new Yv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Hb(e=xb(e,zb));const t=Bb(e);if(t._uninitializedComponentsProvider)throw new Lu(Mu.FAILED_PRECONDITION,"SDK cache is already specified.");Nu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Jv;return qb(t,r,new Xv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Lu(Mu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fu;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!vc.D())return Promise.resolve();const t=e+"main";await vc.delete(t)}(Pg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class gS{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof kh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Nu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ab(this._delegate,e,t,n)}enableNetwork(){return Gb(this._delegate)}disableNetwork(){return Qb(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Sb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Kb(this._delegate)}onSnapshotsInSync(e){return rS(this._delegate,e)}get app(){if(!this._appCompat)throw new Lu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new NS(this,Ob(this._delegate,e))}catch(t){throw _S(t,"collection()","Firestore.collection()")}}doc(e){try{return new SS(this,Rb(this._delegate,e))}catch(t){throw _S(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kS(this,function(e,t){if(e=xb(e,Cb),wb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Nb(e,null,function(e){return new Nd(ec.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _S(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=xb(e,zb);const r=Object.assign(Object.assign({},oS),n);return function(e){if(e.maxAttempts<1)throw new Lu(Mu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Fu;return e.asyncQueue.enqueueAndForget((async()=>{const i=await fb(e);new nb(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Bb(e),(n=>t(new uS(e,n))),r)}(this._delegate,(t=>e(new vS(this,t))))}batch(){return Bb(this._delegate),new bS(new aS(this._delegate,(e=>iS(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Bb(e=xb(e,zb)),r=new jb;return yb(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Wb(this._delegate,e).then((e=>e?new kS(this,e):null))}}class yS extends Uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fS(new Yb(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return SS.forKey(t,this.firestore,null)}}class vS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yS(e)}get(e){const t=DS(e);return this._delegate.get(t).then((e=>new xS(this._firestore,new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=DS(e);return n?(cS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=DS(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=DS(e);return this._delegate.delete(t),this}}class bS{constructor(e){this._delegate=e}set(e,t,n){const r=DS(e);return n?(cS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=DS(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=DS(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wS{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TS(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=wS.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new wS(e,new yS(e),t),r.set(t,i)),i}}wS.INSTANCES=new WeakMap;class SS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yS(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Lu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new SS(t,new Db(t._delegate,n,new rc(e)))}static forKey(e,t,n){return new SS(t,new Db(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new NS(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new NS(this.firestore,Ob(this._delegate,e))}catch(t){throw _S(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=tn(e))instanceof Db&&Mb(this._delegate,e)}set(e,t){t=cS("DocumentReference.set",t);try{return t?eS(this._delegate,e,t):eS(this._delegate,e)}catch(n){throw _S(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tS(this._delegate,e):tS(this._delegate,e,t,...r)}catch(s){throw _S(s,"updateDoc()","DocumentReference.update()")}}delete(){return iS(xb((e=this._delegate).firestore,zb),[new Vf(e._key,xf.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ES(t),i=IS(t,(e=>new xS(this.firestore,new Qw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return nS(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Zw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xb(e,Db);const t=xb(e.firestore,zb);return mb(Bb(t),e._key,{source:"server"}).then((n=>sS(t,e,n)))}(this._delegate):function(e){e=xb(e,Db);const t=xb(e.firestore,zb);return mb(Bb(t),e._key).then((n=>sS(t,e,n)))}(this._delegate),t.then((e=>new xS(this.firestore,new Qw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new SS(this.firestore,e?this._delegate.withConverter(wS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _S(e,t,n){return e.message=e.message.replace(t,n),e}function ES(e){for(const t of e)if("object"===typeof t&&!pS(t))return t;return{}}function IS(e,t){var n,r;let i;return i=pS(e[0])?e[0]:pS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xS{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new SS(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Xw(this._delegate,e._delegate)}}class TS extends xS{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Pu(),t}}class kS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yS(e)}where(e,t,n){try{return new kS(this.firestore,Dw(this._delegate,function(e,t,n){const r=t,i=kw("where",e);return Pw._create(i,r,n)}(e,t,n)))}catch(r){throw _S(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new kS(this.firestore,Dw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kw("orderBy",e);return Rw._create(n,t)}(e,t)))}catch(n){throw _S(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kS(this.firestore,Dw(this._delegate,(Tb("limit",t=e),Mw._create("limit",t,"F"))))}catch(t){throw _S(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new kS(this.firestore,Dw(this._delegate,(Tb("limitToLast",t=e),Mw._create("limitToLast",t,"L"))))}catch(t){throw _S(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new kS(this.firestore,Dw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lw._create("startAt",t,!0)}(...arguments)))}catch(e){throw _S(e,"startAt()","Query.startAt()")}}startAfter(){try{return new kS(this.firestore,Dw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lw._create("startAfter",t,!1)}(...arguments)))}catch(e){throw _S(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new kS(this.firestore,Dw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fw._create("endBefore",t,!1)}(...arguments)))}catch(e){throw _S(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new kS(this.firestore,Dw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fw._create("endAt",t,!0)}(...arguments)))}catch(e){throw _S(e,"endAt()","Query.endAt()")}}isEqual(e){return Lb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?$w(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xb(e,Nb);const t=xb(e.firestore,zb),n=Bb(t),r=new Jw(t);return gb(n,e._query,{source:"server"}).then((n=>new Hw(t,r,e,n)))}(this._delegate):function(e){e=xb(e,Nb);const t=xb(e.firestore,zb),n=Bb(t),r=new Jw(t);return Cw(e._query),gb(n,e._query).then((n=>new Hw(t,r,e,n)))}(this._delegate),t.then((e=>new AS(this.firestore,new Hw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ES(t),i=IS(t,(e=>new AS(this.firestore,new Hw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return nS(this._delegate,r,i)}withConverter(e){return new kS(this.firestore,e?this._delegate.withConverter(wS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class CS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new TS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new kS(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new TS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new CS(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new TS(this._firestore,n))}))}isEqual(e){return Xw(this._delegate,e._delegate)}}class NS extends kS{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new SS(this.firestore,e):null}doc(e){try{return new SS(this.firestore,void 0===e?Rb(this._delegate):Rb(this._delegate,e))}catch(t){throw _S(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=xb(e.firestore,zb),r=Rb(e),i=qw(e.converter,t);return iS(n,[ow(sw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xf.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new SS(this.firestore,e)))}isEqual(e){return Mb(this._delegate,e._delegate)}withConverter(e){return new NS(this.firestore,e?this._delegate.withConverter(wS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function DS(e){return xb(e,Db)}class PS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Xb(...t)}static documentId(){return new PS(nc.keyField().canonicalString())}isEqual(e){return(e=tn(e))instanceof Xb&&this._delegate._internalPath.isEqual(e._internalPath)}}class OS{constructor(e){this._delegate=e}static serverTimestamp(){const e=new uw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new OS(e)}static delete(){const e=new aw("deleteField");return e._methodName="FieldValue.delete",new OS(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cw("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new OS(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hw("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new OS(e)}static increment(e){const t=new dw("increment",e);return t._methodName="FieldValue.increment",new OS(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const RS={Firestore:gS,GeoPoint:Zb,Timestamp:Ju,Blob:fS,Transaction:vS,WriteBatch:bS,DocumentReference:SS,DocumentSnapshot:xS,Query:kS,QueryDocumentSnapshot:TS,QuerySnapshot:AS,CollectionReference:NS,FieldPath:PS,FieldValue:OS,setLogLevel:function(e){var t;t=e,Tu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var MS;(function(e,t){e.INTERNAL.registerComponent(new nn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},RS)))})(MS=vr,((e,t)=>new gS(e,t,new mS))),MS.registerVersion("@firebase/firestore-compat","0.3.26");const LS=vr.initializeApp({apiKey:"AIzaSyCPYZS7BZ56en6ijZcmOyg28BhWJ-GOkYw",authDomain:"train-to-cloud-city-5.firebaseapp.com",projectId:"train-to-cloud-city-5",storageBucket:"train-to-cloud-city-5.appspot.com",messagingSenderId:"1016980810684",appId:"1:1016980810684:web:c70a094fff44ef39ca19b9",measurementId:"G-TN9ZESGEWG"}),FS={app:LS,analytics:vr.analytics(LS),db:vr.firestore()},VS=ot("getServices",(async()=>{const e=FS.db.collection("services"),t=await e.get().then((e=>{let t=[];return e.docs.forEach((e=>t.push("".concat(e.id)))),t}));return{services:t}})),jS=ot("getPatterns",(async()=>{const e=FS.db.collection("patterns"),t=await e.get().then((e=>{let t=[];return e.docs.forEach((e=>t.push(e.data()))),t}));return{patterns:t}})),zS=ot("getInitialWorldState",(async()=>{const e=FS.db.collection("global"),t=await e.get().then((e=>{let t={};return e.docs.forEach((e=>t[e.id]=e.data())),t}));return{state:t}})),BS=async e=>{let{dispatch:t,isSimulator:n,pattern:r}=e;n?await WS(t):Promise.all([QS(t),null===t||void 0===t?void 0:t(qS(r))]).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))},US=ot("getWorldSimulation",(async e=>{const t=FS.db.collection("global_simulation"),n=await t.get().then((e=>{let t={};return e.docs.forEach((e=>t[e.id]=e.data())),t}));return{simulationState:{...n,changeType:e}}})),qS=ot("updateSelectedPattern",(async e=>{const t=FS.db.collection("global").doc("proposal");await t.update({pattern_slug:null===e||void 0===e?void 0:e.slug});return{selectedPattern:e}})),KS=ot("resetMission",(async()=>{const e=FS.db.collection("global").doc("cargo");let t;try{t=await e.update({actual_cargo:[]})}catch(n){console.log(n)}return t})),GS=ot("stopMission",(async()=>{const e=FS.db.collection("global").doc("cargo"),t=FS.db.collection("global").doc("proposal");return Promise.all([e.update({actual_cargo:[]}),t.update({pattern_slug:""})])})),QS=async e=>{const t=FS.db.collection("global");await t.onSnapshot((t=>{t.docChanges().forEach((t=>{null===e||void 0===e||e(zS())}))}))},WS=async e=>{const t=FS.db.collection("global_simulation");await t.onSnapshot((t=>{t.docChanges().forEach((t=>{null===e||void 0===e||e(US(t.type))}))}))},HS={selectedPattern:{},services:[],patterns:[],worldState:[],simulationState:[]},YS=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new Ge;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(ze):s.push(Be(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!Me(n))throw new Error(Et(1));a=Fe(n)}l="function"===typeof r?r(t):t();let u=Ve;i&&(u=Ue({trace:!1,..."object"===typeof i&&i}));const c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(De(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=Ve(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=Je(c);let d="function"===typeof o?o(h):h();return Le(a,s,u(...d))}({reducer:{trainReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It;switch((arguments.length>1?arguments[1]:void 0).type){case"ADD_CAR":return{...e,numOfCars:e.numOfCars+1};case"DELETE_CAR":return{...e,numOfCars:e.numOfCars-1};default:return e}},coreReducer:ht({name:"core",initialState:HS,extraReducers:e=>{e.addCase(zS.fulfilled,((e,t)=>{var n;return e.worldState=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.state,e})).addCase(US.fulfilled,((e,t)=>{var n;return e.worldState=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.simulationState,e})).addCase(VS.fulfilled,((e,t)=>{var n;return e.services=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.services,e})).addCase(jS.fulfilled,((e,t)=>{var n;return e.patterns=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.patterns,e})).addCase(qS.fulfilled,((e,t)=>{var n;const r=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.selectedPattern;return e.selectedPattern=r,e})).addDefaultCase(((e,t)=>HS))}}).reducer},middleware:e=>e()}),XS=YS;var JS=n(184);const ZS=e=>{const{session_mailbox:t,train_mailbox:n}=e||{};return(0,JS.jsx)("div",{className:"controlPanelContainer",children:(0,JS.jsx)("div",{className:"controlPanelWrapper",children:(0,JS.jsxs)("div",{className:"controlPanel",children:[(0,JS.jsxs)("div",{className:"worldState",children:["World State:",(0,JS.jsx)("p",{children:JSON.stringify(e)})]}),(0,JS.jsxs)("div",{className:"sessionMailbox",children:["Session:",(0,JS.jsx)("p",{children:JSON.stringify(t)})]}),(0,JS.jsxs)("div",{className:"trainMailbox",children:["Train:",(0,JS.jsx)("p",{children:JSON.stringify(n)})]})]})})})},$S=e=>e?void 0:"Required",e_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>t||n(e)),void 0)};function t_(){return t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t_.apply(this,arguments)}function n_(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var r_=".".charCodeAt(0),i_=/\\(\\)?/g,s_=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),o_={},a_=/[.[\]]+/,l_=function(e){if(null===e||void 0===e||!e.length)return[];if("string"!==typeof e)throw new Error("toPath() expects a string");return null==o_[e]&&(e.endsWith("[]")?o_[e]=e.split(a_).filter(Boolean):o_[e]=function(e){var t=[];return e.charCodeAt(0)===r_&&t.push(""),e.replace(s_,(function(e,n,r,i){var s=e;r?s=i.replace(i_,"$1"):n&&(s=n.trim()),t.push(s)})),t}(e)),o_[e]},u_=function(e,t){for(var n=l_(t),r=e,i=0;i<n.length;i++){var s=n[i];if(void 0===r||null===r||"object"!==typeof r||Array.isArray(r)&&isNaN(s))return;r=r[s]}return r};function c_(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var h_=function e(t,n,r,i,s){if(n>=r.length)return i;var o=r[n];if(isNaN(o)){var a;if(void 0===t||null===t){var l,u=e(void 0,n+1,r,i,s);return void 0===u?void 0:((l={})[o]=u,l)}if(Array.isArray(t))throw new Error("Cannot set a non-numeric property on an array");var c=e(t[o],n+1,r,i,s);if(void 0===c){var h=Object.keys(t).length;if(void 0===t[o]&&0===h)return;return void 0!==t[o]&&h<=1?isNaN(r[n-1])||s?void 0:{}:(t[o],n_(t,[o].map(c_)))}return t_({},t,((a={})[o]=c,a))}var d=Number(o);if(void 0===t||null===t){var f=e(void 0,n+1,r,i,s);if(void 0===f)return;var p=[];return p[d]=f,p}if(!Array.isArray(t))throw new Error("Cannot set a numeric property on an object");var m=e(t[d],n+1,r,i,s),g=[].concat(t);if(s&&void 0===m){if(g.splice(d,1),0===g.length)return}else g[d]=m;return g},d_=function(e,t,n,r){if(void 0===r&&(r=!1),void 0===e||null===e)throw new Error("Cannot call setIn() with "+String(e)+" state");if(void 0===t||null===t)throw new Error("Cannot call setIn() with "+String(t)+" key");return h_(e,0,l_(t),n,r)},f_="FINAL_FORM/form-error",p_="FINAL_FORM/array-error";function m_(e,t){var n=e.errors,r=e.initialValues,i=e.lastSubmittedValues,s=e.submitErrors,o=e.submitFailed,a=e.submitSucceeded,l=e.submitting,u=e.values,c=t.active,h=t.blur,d=t.change,f=t.data,p=t.focus,m=t.modified,g=t.modifiedSinceLastSubmit,y=t.name,v=t.touched,b=t.validating,w=t.visited,S=u_(u,y),_=u_(n,y);_&&_[p_]&&(_=_[p_]);var E=s&&u_(s,y),I=r&&u_(r,y),x=t.isEqual(I,S),T=!_&&!E;return{active:c,blur:h,change:d,data:f,dirty:!x,dirtySinceLastSubmit:!(!i||t.isEqual(u_(i,y),S)),error:_,focus:p,initial:I,invalid:!T,length:Array.isArray(S)?S.length:void 0,modified:m,modifiedSinceLastSubmit:g,name:y,pristine:x,submitError:E,submitFailed:o,submitSucceeded:a,submitting:l,touched:v,valid:T,value:S,visited:w,validating:b}}var g_=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],y_=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),s=0;s<n.length;s++){var o=n[s];if(!i(o)||e[o]!==t[o])return!1}return!0};function v_(e,t,n,r,i,s){var o=!1;return i.forEach((function(i){r[i]&&(e[i]=t[i],n&&(~s.indexOf(i)?y_(t[i],n[i]):t[i]===n[i])||(o=!0))})),o}var b_=["data"],w_=function(e,t,n,r){var i={blur:e.blur,change:e.change,focus:e.focus,name:e.name};return v_(i,e,t,n,g_,b_)||!t||r?i:void 0},S_=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],__=["touched","visited"];function E_(e,t,n,r){var i={};return v_(i,e,t,n,S_,__)||!t||r?i:void 0}var I_=function(e){var t,n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.length===t.length&&!i.some((function(e,n){return!y_(t[n],e)}))||(t=i,n=e.apply(void 0,i)),n}},x_=function(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then},T_=function(e,t){return e===t},k_=function e(t){return Object.keys(t).some((function(n){var r=t[n];return!r||"object"!==typeof r||r instanceof Error?"undefined"!==typeof r:e(r)}))};function C_(e,t,n,r,i,s){var o=i(n,r,t,s);return!!o&&(e(o),!0)}function A_(e,t,n,r,i){var s=e.entries;Object.keys(s).forEach((function(e){var o=s[Number(e)];if(o){var a=o.subscription,l=o.subscriber,u=o.notified;C_(l,a,t,n,r,i||!u)&&(o.notified=!0)}}))}function N_(e){if(!e)throw new Error("No config specified");var t=e.debug,n=e.destroyOnUnregister,r=e.keepDirtyOnReinitialize,i=e.initialValues,s=e.mutators,o=e.onSubmit,a=e.validate,l=e.validateOnBlur;if(!o)throw new Error("No onSubmit function specified");var u={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:i&&t_({},i),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:i?t_({},i):{}},lastFormState:void 0},c=0,h=!1,d=!1,f=!1,p=0,m={},g=function(e,t,n){var r=n(u_(e.formState.values,t));e.formState.values=d_(e.formState.values,t,r)||{}},y=function(e,t,n){if(e.fields[t]){var r,i;e.fields=t_({},e.fields,((r={})[n]=t_({},e.fields[t],{name:n,blur:function(){return A.blur(n)},change:function(e){return A.change(n,e)},focus:function(){return A.focus(n)},lastFieldState:void 0}),r)),delete e.fields[t],e.fieldSubscribers=t_({},e.fieldSubscribers,((i={})[n]=e.fieldSubscribers[t],i)),delete e.fieldSubscribers[t];var s=u_(e.formState.values,t);e.formState.values=d_(e.formState.values,t,void 0)||{},e.formState.values=d_(e.formState.values,n,s),delete e.lastFormState}},v=function(e){return function(){if(s){for(var t={formState:u.formState,fields:u.fields,fieldSubscribers:u.fieldSubscribers,lastFormState:u.lastFormState},n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=s[e](r,t,{changeValue:g,getIn:u_,renameField:y,resetFieldState:A.resetFieldState,setIn:d_,shallowEqual:y_});return u.formState=t.formState,u.fields=t.fields,u.fieldSubscribers=t.fieldSubscribers,u.lastFormState=t.lastFormState,S(void 0,(function(){_(),k()})),o}}},b=s?Object.keys(s).reduce((function(e,t){return e[t]=v(t),e}),{}):{},w=function(e){return Object.keys(e.validators).reduce((function(t,n){var r=e.validators[Number(n)]();return r&&t.push(r),t}),[])},S=function(e,t){if(h)return d=!0,void t();var n=u.fields,r=u.formState,i=t_({},n),s=Object.keys(i);if(a||s.some((function(e){return w(i[e]).length}))){var o=!1;if(e){var l=i[e];if(l){var c=l.validateFields;c&&(o=!0,s=c.length?c.concat(e):[e])}}var f,g={},y={},v={},b=[].concat(function(e){var t=[];if(a){var n=a(t_({},u.formState.values));x_(n)?t.push(n.then((function(t){return e(t,!0)}))):e(n,!1)}return t}((function(e,t){t?y=e||{}:g=e||{}})),s.reduce((function(e,t){return e.concat(function(e,t){var n,r=[],i=w(e);return i.length&&(i.forEach((function(i){var s=i(u_(u.formState.values,e.name),u.formState.values,0===i.length||3===i.length?m_(u.formState,u.fields[e.name]):void 0);if(s&&x_(s)){e.validating=!0;var o=s.then((function(n){u.fields[e.name]&&(u.fields[e.name].validating=!1,t(n))}));r.push(o)}else n||(n=s)})),t(n)),r}(n[t],(function(e){v[t]=e})))}),[])),S=b.length>0,_=++p,E=Promise.all(b).then((f=_,function(e){return delete m[f],e}));S&&(m[_]=E);var I=function(e){var t=t_({},o?r.errors:{},g,e?y:r.asyncErrors),l=function(e){s.forEach((function(r){if(n[r]){var s=u_(g,r),l=u_(t,r),u=w(i[r]).length,c=v[r];e(r,u&&c||a&&s||(s||o?void 0:l))}}))};l((function(e,n){t=d_(t,e,n)||{}})),l((function(e,n){if(n&&n[p_]){var r=u_(t,e),i=[].concat(r);i[p_]=n[p_],t=d_(t,e,i)}})),y_(r.errors,t)||(r.errors=t),e&&(r.asyncErrors=y),r.error=g[f_]};if(S&&(u.formState.validating++,t()),I(!1),t(),S){var x=function(){u.formState.validating--,t(),0===u.formState.validating&&u.lastFormState.validating&&k()};E.then((function(){p>_||I(!0)})).then(x,x)}}else t()},_=function(e){if(!c){var t=u.fields,n=u.fieldSubscribers,r=u.formState,i=t_({},t),s=function(e){var t=i[e],s=m_(r,t),o=t.lastFieldState;t.lastFieldState=s;var a=n[e];a&&A_(a,s,o,w_,void 0===o)};e?s(e):Object.keys(i).forEach(s)}},E=function(){Object.keys(u.fields).forEach((function(e){u.fields[e].touched=!0}))},I=function(){var e=u.fields,t=u.formState,n=u.lastFormState,r=t_({},e),i=Object.keys(r),s=!1,o=i.reduce((function(e,n){return!r[n].isEqual(u_(t.values,n),u_(t.initialValues||{},n))&&(s=!0,e[n]=!0),e}),{}),a=i.reduce((function(e,n){var i=t.lastSubmittedValues||{};return r[n].isEqual(u_(t.values,n),u_(i,n))||(e[n]=!0),e}),{});t.pristine=!s,t.dirtySinceLastSubmit=!(!t.lastSubmittedValues||!Object.values(a).some((function(e){return e}))),t.modifiedSinceLastSubmit=!(!t.lastSubmittedValues||!Object.keys(r).some((function(e){return r[e].modifiedSinceLastSubmit}))),t.valid=!t.error&&!t.submitError&&!k_(t.errors)&&!(t.submitErrors&&k_(t.submitErrors));var l=function(e){var t=e.active,n=e.dirtySinceLastSubmit,r=e.modifiedSinceLastSubmit,i=e.error,s=e.errors,o=e.initialValues,a=e.pristine,l=e.submitting,u=e.submitFailed,c=e.submitSucceeded,h=e.submitError,d=e.submitErrors,f=e.valid,p=e.validating,m=e.values;return{active:t,dirty:!a,dirtySinceLastSubmit:n,modifiedSinceLastSubmit:r,error:i,errors:s,hasSubmitErrors:!!(h||d&&k_(d)),hasValidationErrors:!(!i&&!k_(s)),invalid:!f,initialValues:o,pristine:a,submitting:l,submitFailed:u,submitSucceeded:c,submitError:h,submitErrors:d,valid:f,validating:p>0,values:m}}(t),c=i.reduce((function(e,t){return e.modified[t]=r[t].modified,e.touched[t]=r[t].touched,e.visited[t]=r[t].visited,e}),{modified:{},touched:{},visited:{}}),h=c.modified,d=c.touched,f=c.visited;return l.dirtyFields=n&&y_(n.dirtyFields,o)?n.dirtyFields:o,l.dirtyFieldsSinceLastSubmit=n&&y_(n.dirtyFieldsSinceLastSubmit,a)?n.dirtyFieldsSinceLastSubmit:a,l.modified=n&&y_(n.modified,h)?n.modified:h,l.touched=n&&y_(n.touched,d)?n.touched:d,l.visited=n&&y_(n.visited,f)?n.visited:f,n&&y_(n,l)?n:l},x=!1,T=!1,k=function e(){if(x)T=!0;else{if(x=!0,t&&t(I(),Object.keys(u.fields).reduce((function(e,t){return e[t]=u.fields[t],e}),{})),!c&&(!h||!f)){var n=u.lastFormState,r=I();r!==n&&(u.lastFormState=r,A_(u.subscribers,r,n,E_))}x=!1,T&&(T=!1,e())}},C=function(){return Object.keys(u.fields).forEach((function(e){return u.fields[e].modifiedSinceLastSubmit=!1}))};S(void 0,(function(){k()}));var A={batch:function(e){c++,e(),c--,_(),k()},blur:function(e){var t=u.fields,n=u.formState,r=t[e];r&&(delete n.active,t[e]=t_({},r,{active:!1,touched:!0}),l?S(e,(function(){_(),k()})):(_(),k()))},change:function(e,t){var n=u.fields,r=u.formState;if(u_(r.values,e)!==t){g(u,e,(function(){return t}));var i=n[e];i&&(n[e]=t_({},i,{modified:!0,modifiedSinceLastSubmit:!!r.lastSubmittedValues})),l?(_(),k()):S(e,(function(){_(),k()}))}},get destroyOnUnregister(){return!!n},set destroyOnUnregister(e){n=e},focus:function(e){var t=u.fields[e];t&&!t.active&&(u.formState.active=e,t.active=!0,t.visited=!0,_(),k())},mutators:b,getFieldState:function(e){var t=u.fields[e];return t&&t.lastFieldState},getRegisteredFields:function(){return Object.keys(u.fields)},getState:function(){return I()},initialize:function(e){var t=u.fields,n=u.formState,i=t_({},t),s="function"===typeof e?e(n.values):e;r||(n.values=s);var o=r?Object.keys(i).reduce((function(e,t){return i[t].isEqual(u_(n.values,t),u_(n.initialValues||{},t))||(e[t]=u_(n.values,t)),e}),{}):{};n.initialValues=s,n.values=s,Object.keys(o).forEach((function(e){n.values=d_(n.values,e,o[e])||{}})),S(void 0,(function(){_(),k()}))},isValidationPaused:function(){return h},pauseValidation:function(e){void 0===e&&(e=!0),h=!0,f=e},registerField:function(e,t,r,i){void 0===r&&(r={}),u.fieldSubscribers[e]||(u.fieldSubscribers[e]={index:0,entries:{}});var s=u.fieldSubscribers[e].index++;u.fieldSubscribers[e].entries[s]={subscriber:I_(t),subscription:r,notified:!1};var o=u.fields[e]||{active:!1,afterSubmit:i&&i.afterSubmit,beforeSubmit:i&&i.beforeSubmit,data:i&&i.data||{},isEqual:i&&i.isEqual||T_,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:e,touched:!1,valid:!0,validateFields:i&&i.validateFields,validators:{},validating:!1,visited:!1};o.blur=o.blur||function(){return A.blur(e)},o.change=o.change||function(t){return A.change(e,t)},o.focus=o.focus||function(){return A.focus(e)},u.fields[e]=o;var a=!1,l=i&&i.silent,c=function(){l&&u.fields[e]?_(e):(k(),_())};if(i){a=!(!i.getValidator||!i.getValidator()),i.getValidator&&(u.fields[e].validators[s]=i.getValidator);var h=void 0===u_(u.formState.values,e);void 0===i.initialValue||!h&&u_(u.formState.values,e)!==u_(u.formState.initialValues,e)||(u.formState.initialValues=d_(u.formState.initialValues||{},e,i.initialValue),u.formState.values=d_(u.formState.values,e,i.initialValue),S(void 0,c)),void 0!==i.defaultValue&&void 0===i.initialValue&&void 0===u_(u.formState.initialValues,e)&&h&&(u.formState.values=d_(u.formState.values,e,i.defaultValue))}return a?S(void 0,c):c(),function(){var t=!1;u.fields[e]&&(t=!(!u.fields[e].validators[s]||!u.fields[e].validators[s]()),delete u.fields[e].validators[s]);var r=!!u.fieldSubscribers[e];r&&delete u.fieldSubscribers[e].entries[s];var i=r&&!Object.keys(u.fieldSubscribers[e].entries).length;i&&(delete u.fieldSubscribers[e],delete u.fields[e],t&&(u.formState.errors=d_(u.formState.errors,e,void 0)||{}),n&&(u.formState.values=d_(u.formState.values,e,void 0,!0)||{})),l||(t?S(void 0,(function(){k(),_()})):i&&k())}},reset:function(e){void 0===e&&(e=u.formState.initialValues),u.formState.submitting&&(u.formState.resetWhileSubmitting=!0),u.formState.submitFailed=!1,u.formState.submitSucceeded=!1,delete u.formState.submitError,delete u.formState.submitErrors,delete u.formState.lastSubmittedValues,A.initialize(e||{})},resetFieldState:function(e){u.fields[e]=t_({},u.fields[e],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),S(void 0,(function(){_(),k()}))},restart:function(e){void 0===e&&(e=u.formState.initialValues),A.batch((function(){for(var t in u.fields)A.resetFieldState(t),u.fields[t]=t_({},u.fields[t],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});A.reset(e)}))},resumeValidation:function(){h=!1,f=!1,d&&S(void 0,(function(){_(),k()})),d=!1},setConfig:function(e,i){switch(e){case"debug":t=i;break;case"destroyOnUnregister":n=i;break;case"initialValues":A.initialize(i);break;case"keepDirtyOnReinitialize":r=i;break;case"mutators":s=i,i?(Object.keys(b).forEach((function(e){e in i||delete b[e]})),Object.keys(i).forEach((function(e){b[e]=v(e)}))):Object.keys(b).forEach((function(e){delete b[e]}));break;case"onSubmit":o=i;break;case"validate":a=i,S(void 0,(function(){_(),k()}));break;case"validateOnBlur":l=i;break;default:throw new Error("Unrecognised option "+e)}},submit:function(){var e=u.formState;if(!e.submitting){if(delete e.submitErrors,delete e.submitError,e.lastSubmittedValues=t_({},e.values),u.formState.error||k_(u.formState.errors))return E(),C(),u.formState.submitFailed=!0,k(),void _();var t=Object.keys(m);if(t.length)Promise.all(t.map((function(e){return m[Number(e)]}))).then(A.submit,console.error);else if(!Object.keys(u.fields).some((function(e){return u.fields[e].beforeSubmit&&!1===u.fields[e].beforeSubmit()}))){var n,r=!1,i=function(t){e.submitting=!1;var i=e.resetWhileSubmitting;return i&&(e.resetWhileSubmitting=!1),t&&k_(t)?(e.submitFailed=!0,e.submitSucceeded=!1,e.submitErrors=t,e.submitError=t[f_],E()):(i||(e.submitFailed=!1,e.submitSucceeded=!0),Object.keys(u.fields).forEach((function(e){return u.fields[e].afterSubmit&&u.fields[e].afterSubmit()}))),k(),_(),r=!0,n&&n(t),t};e.submitting=!0,e.submitFailed=!1,e.submitSucceeded=!1,e.lastSubmittedValues=t_({},e.values),C();var s=o(e.values,A,i);if(!r){if(s&&x_(s))return k(),_(),s.then(i,(function(e){throw i(),e}));if(o.length>=3)return k(),_(),new Promise((function(e){n=e}));i(s)}}}},subscribe:function(e,t){if(!e)throw new Error("No callback given.");if(!t)throw new Error("No subscription provided. What values do you want to listen to?");var n=I_(e),r=u.subscribers,i=r.index++;r.entries[i]={subscriber:n,subscription:t,notified:!1};var s=I();return C_(n,t,s,s,E_,!0),function(){delete r.entries[i]}}};return A}var D_=["render","children","component"];function P_(e,n,r){var i=e.render,s=e.children,o=e.component,a=n_(e,D_);if(o)return t.createElement(o,Object.assign(n,a,{children:s,render:i}));if(i)return i(void 0===s?Object.assign(n,a):Object.assign(n,a,{children:s}));if("function"!==typeof s)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+r);return s(Object.assign(n,a))}function O_(e,n,r){void 0===r&&(r=function(e,t){return e===t});var i=t.useRef(e);t.useEffect((function(){r(e,i.current)||(n(),i.current=e)}))}var R_=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),s=0;s<n.length;s++){var o=n[s];if(!i(o)||e[o]!==t[o])return!1}return!0},M_=function(e){return!(!e||"function"!==typeof e.stopPropagation)},L_=t.createContext();function F_(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e})),n}var V_=function(e,t,n){n.forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},enumerable:!0})}))},j_=function(e,t){return V_(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},z_=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],B_={"final-form":"4.20.10","react-final-form":"6.5.8"},U_=S_.reduce((function(e,t){return e[t]=!0,e}),{});function q_(e){var n=e.debug,r=e.decorators,i=void 0===r?[]:r,s=e.destroyOnUnregister,o=e.form,a=e.initialValues,l=e.initialValuesEqual,u=e.keepDirtyOnReinitialize,c=e.mutators,h=e.onSubmit,d=e.subscription,f=void 0===d?U_:d,p=e.validate,m=e.validateOnBlur,g=n_(e,z_),y={debug:n,destroyOnUnregister:s,initialValues:a,keepDirtyOnReinitialize:u,mutators:c,onSubmit:h,validate:p,validateOnBlur:m},v=function(e){var n=t.useRef();return n.current||(n.current=e()),n.current}((function(){var e=o||N_(y);return e.pauseValidation(),e})),b=t.useState((function(){var e={};return v.subscribe((function(t){e=t}),f)(),e})),w=b[0],S=b[1],_=F_(w);t.useEffect((function(){v.isValidationPaused()&&v.resumeValidation();var e=[v.subscribe((function(e){R_(e,_.current)||S(e)}),f)].concat(i?i.map((function(e){return e(v)})):[]);return function(){v.pauseValidation(),e.reverse().forEach((function(e){return e()}))}}),i),O_(n,(function(){v.setConfig("debug",n)})),O_(s,(function(){v.destroyOnUnregister=!!s})),O_(u,(function(){v.setConfig("keepDirtyOnReinitialize",u)})),O_(a,(function(){v.setConfig("initialValues",a)}),l||R_),O_(c,(function(){v.setConfig("mutators",c)})),O_(h,(function(){v.setConfig("onSubmit",h)})),O_(p,(function(){v.setConfig("validate",p)})),O_(m,(function(){v.setConfig("validateOnBlur",m)}));var E={form:t_({},v,{reset:function(e){M_(e)?v.reset():v.reset(e)}}),handleSubmit:function(e){return e&&("function"===typeof e.preventDefault&&e.preventDefault(),"function"===typeof e.stopPropagation&&e.stopPropagation()),v.submit()}};return j_(E,w),t.createElement(L_.Provider,{value:v},P_(t_({},g,{__versions:B_}),E,"ReactFinalForm"))}function K_(e){var n=t.useContext(L_);if(!n)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return n}var G_="undefined"!==typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product;function Q_(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e})),t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(null,t)}),[])}var W_=g_.reduce((function(e,t){return e[t]=!0,e}),{}),H_=function(e,t){return void 0===e?"":e},Y_=function(e,t){return""===e?void 0:e},X_=function(e,t){return e===t};function J_(e,n){void 0===n&&(n={});var r=n,i=r.afterSubmit,s=r.allowNull,o=r.component,a=r.data,l=r.defaultValue,u=r.format,c=void 0===u?H_:u,h=r.formatOnBlur,d=r.initialValue,f=r.multiple,p=r.parse,m=void 0===p?Y_:p,g=r.subscription,y=void 0===g?W_:g,v=r.type,b=r.validateFields,w=r.value,S=K_("useField"),_=F_(n),E=function(t,n){return S.registerField(e,t,y,{afterSubmit:i,beforeSubmit:function(){var t=_.current,n=t.beforeSubmit,r=t.formatOnBlur,i=t.format,s=void 0===i?H_:i;if(r){var o=S.getFieldState(e).value,a=s(o,e);a!==o&&S.change(e,a)}return n&&n()},data:a,defaultValue:l,getValidator:function(){return _.current.validate},initialValue:d,isEqual:function(e,t){return(_.current.isEqual||X_)(e,t)},silent:n,validateFields:b})},I=t.useRef(!0),x=t.useState((function(){var e={},t=S.destroyOnUnregister;return S.destroyOnUnregister=!1,E((function(t){e=t}),!0)(),S.destroyOnUnregister=t,e})),T=x[0],k=x[1];t.useEffect((function(){return E((function(e){I.current?I.current=!1:k(e)}),!1)}),[e,a,l,d]);var C={};!function(e,t){V_(e,t,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(C,T);var A={name:e,get value(){var t=T.value;return h?"input"===o&&(t=H_(t)):t=c(t,e),null!==t||s||(t=""),"checkbox"===v||"radio"===v?w:"select"===o&&f?t||[]:t},get checked(){var t=T.value;return"checkbox"===v?(t=c(t,e),void 0===w?!!t:!(!Array.isArray(t)||!~t.indexOf(w))):"radio"===v?c(t,e)===w:void 0},onBlur:Q_((function(e){if(T.blur(),h){var t=S.getFieldState(T.name);T.change(c(t.value,T.name))}})),onChange:Q_((function(t){var n=t&&t.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,s=i.type,o=i.value,a=i.checked;switch(s){case"checkbox":if(void 0!==n){if(a)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var l=t.indexOf(n);return l<0?t:t.slice(0,l).concat(t.slice(l+1))}return!!a;case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return o}}(t,T.value,w,G_):t;T.change(m(n,e))})),onFocus:Q_((function(e){return T.focus()}))};return f&&(A.multiple=f),void 0!==v&&(A.type=v),{input:A,meta:C}}var Z_=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],$_=t.forwardRef((function(e,n){var r=e.afterSubmit,i=e.allowNull,s=e.beforeSubmit,o=e.children,a=e.component,l=e.data,u=e.defaultValue,c=e.format,h=e.formatOnBlur,d=e.initialValue,f=e.isEqual,p=e.multiple,m=e.name,g=e.parse,y=e.subscription,v=e.type,b=e.validate,w=e.validateFields,S=e.value,_=n_(e,Z_),E=J_(m,{afterSubmit:r,allowNull:i,beforeSubmit:s,children:o,component:a,data:l,defaultValue:u,format:c,formatOnBlur:h,initialValue:d,isEqual:f,multiple:p,parse:g,subscription:y,type:v,validate:b,validateFields:w,value:S});if("function"===typeof o)return o(t_({},E,_));if("string"===typeof a)return t.createElement(a,t_({},E.input,{children:o,ref:n},_));if(!m)throw new Error("prop name cannot be undefined in <Field> component");return P_(t_({children:o,component:a,ref:n},_),E,"Field("+m+")")}));ot("testFetch",(async()=>{const e={method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};let t;try{const n=await fetch("http://127.0.0.1:4000/createAttemptWorkflow",{mode:"cors"},e);t=await n.json()}catch(n){console.error(n)}return t}));const eE=n.p+"static/media/qrcode-extras.6c107eaa250d1731040a.png",tE=e=>{var n;const{selectedPattern:r}=e,i=g((e=>e)),s=T(),[o,a]=(0,t.useState)({message:"",result:{}}),[l,u]=(0,t.useState)({message:"",result:{}});(0,t.useEffect)((()=>{!async function(){await s(VS())}()}),[s]);const c=i.coreReducer.services;return 0===(null===r||void 0===r||null===(n=r.checkpoints)||void 0===n?void 0:n.length)?(0,JS.jsx)("div",{children:" No checkpoints available. "}):(0,JS.jsx)(q_,{onSubmit:async e=>{const t={service_slugs:Object.keys(e).map((t=>e[t]))};let n,i;try{n=await(async(e,t)=>{const{checkpoints:n}=e,{service_slugs:r}=t;let i=[],s=[];null===n||void 0===n||n.map(((e,t)=>{var n;(null===e||void 0===e||null===(n=e.satisfying_services)||void 0===n?void 0:n.filter((e=>"*"===e||r.includes(e)))).length?i.push(t):s.push(t)}));const o={proposal:t,pattern:e,unmatchedCheckpoints:s,matchedCheckpoints:i};if(s.length)throw new Error("Patterns between proposal and mission do not match",o);return Promise.resolve({message:"Services match!",result:o})})(r,t),u(n),a()}catch(i){u(),a(i)}},render:e=>{var t;let{handleSubmit:n,form:i,submitting:a,pristine:u,values:h}=e;return(0,JS.jsxs)("form",{id:"missionForm",onSubmit:n,children:[(0,JS.jsxs)("p",{children:[(0,JS.jsx)("b",{children:"Goal: "}),null===r||void 0===r?void 0:r.description]}),null===r||void 0===r||null===(t=r.checkpoints)||void 0===t?void 0:t.map(((e,t)=>(0,JS.jsx)($_,{name:"missionStep".concat(t),validate:e_($S),children:n=>{let{input:r,meta:i}=n;return(0,JS.jsxs)("div",{className:"formMissionInputWrapper",children:[(0,JS.jsx)("div",{className:"formMissionDescription",children:(0,JS.jsxs)("p",{children:[(0,JS.jsx)("b",{children:"Step ".concat(t+1,": ")}),e.description]})}),(0,JS.jsxs)("div",{className:"formMissionInput",children:[(0,JS.jsx)("label",{children:(0,JS.jsx)("b",{children:"Service: "})}),(0,JS.jsxs)("select",{...r,name:"gcp",id:"gcpService",children:[(0,JS.jsx)("option",{value:"",children:"--Choose a service--"}),null===c||void 0===c?void 0:c.map(((e,t)=>(0,JS.jsx)("option",{value:"".concat(e),children:e},t)))]}),i.error&&i.touched&&(0,JS.jsx)("span",{className:"formError",children:i.error})]})]})}},"missionStep".concat(t)))),(0,JS.jsxs)("div",{className:"buttons",children:[(0,JS.jsx)("button",{type:"submit",disabled:a,children:"Submit"}),(0,JS.jsx)("button",{type:"button",onClick:()=>(async e=>{var t;e(),s({type:"DELETE_CAR",payload:{serviceId:t}})})(i.reset),disabled:a||u,children:"Reset"})]}),(a||(null===o||void 0===o?void 0:o.message)||(null===l||void 0===l?void 0:l.message))&&(0,JS.jsxs)("div",{className:"resultContainer",children:[a&&"Calculating responses ....",(null===o||void 0===o?void 0:o.message)&&(0,JS.jsxs)("div",{children:[(0,JS.jsx)("h3",{children:"Oh no!"}),(0,JS.jsx)("p",{children:o.message})]}),(null===l||void 0===l?void 0:l.message)&&(0,JS.jsxs)("div",{children:[(0,JS.jsx)("h3",{children:"Huzzah!"}),(0,JS.jsx)("p",{children:l.message}),(0,JS.jsx)("img",{alt:"Extras",src:eE,className:"qrcode"})]})]})]})}})},nE=e=>{const{name:t}=e;return(0,JS.jsx)("div",{className:"trainCoachContainer",children:(0,JS.jsx)("div",{className:"trainCoachWrapper",children:(0,JS.jsx)("div",{className:"coach",children:"front"===t?(0,JS.jsx)("img",{alt:"FrontCar",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAyCAYAAADhna1TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABz9JREFUeNrsml1sVEUUx89ud7fb7ra7/aC0pZQWGpJaTEoVCE1QajTBQBTjgyA8FHnVxD4Q9UWiPqgPBhokMTHQ+sCDD9JGAQmibX2ooUEokSoq2IaW7lr6cbfb7mf3rvOf3lm2t3e729IPXPYkk7u9d+bMmd8958zc6ehIEefzT9vZ5Sgr1fT/lz5WOgovX21eqAIdK234cWFLZVmNzVJGySUA9AoD1D3fhnpWdqL4ZDnZoEAwpjYWDdULAZPsghTRtJBQCvNQunCBduzYkcyAGrKyso6nPGa2HHO73fUpMLHhJJRvDLEe3JsI0W/DQf77yXwjrbGmxVQy6pN5Xe9UmNdD/cUU6IV+9JNr1nP9GQadph1dzsCc+SYYCrcd/vbu5lMvlfbNG0zL3x7qGPBH/r7Y66XXKy20tdCkCfDz625uvBDAObIle9GgQD/6EQIo0A9I0VA+/MWVaDJuYXDqGBxpXqGkRb3L4ddUIDxFDeu2NLUoYKArGoqApbYRYOYhCKeWeecY9UCTVHYyr2lKJV9tqWdw6lNgtKWJwdm7bGC0Zo1HWD/gVMcFs6s8Y9a9rUXpmhq1ps4Ku2HO6X0+Aj1qXZiN1DMk7j0ELMxUmMbtcT8JomcWDD56apxrnQEoKIst0A+bAAn6F7iOmVNKrGnd28tzNz9u30qJSh37pmpPJd94K9/A6ZPku3Q2RUQNRu69TSHp3xSR1DomBebhQilZxOEPksMXjPncpNfRugwTZRnSHh8wHSNu+mvSF7fery4d7SmwU57JkPxgbrq9HMpGi5m251i5Z8TyqEv3XXRuSKL9xXkx6yVNjunz+nl4PJuXFXOwkKJ0IwcXkMM06A8kf/JFXrEaEhuOyC+jgdD8QsmxqpzOP/MG9a6p4n8/8U8XvfrDCTL7J2fV9aVb6Mdtr9G1yjr+u+h+Lz135WveZqUEtsB+2BMt5fd66OC5T4j8MXc06cu7949+tHFdnybiM7vfiUCB/L5+K33zwlsxjeis3hMxAlDP7HmXxrILVgyMFhQIxgR748jOIye81zXBaA3Kq9GR8BgtkVYITG/Jppg28Ze8YVtC2xBJt8DTCvdoyYjzPGlXvshxOeNDMZ9X3rnyeK58IQfOf0o/sQlBHf7rB25SzR9t5FgoGGTv6OQ7lwtquS7u4c2tpNccwOyzQPFM6No1wWBqBnEBB6B2/3xaU0lt9zme7DBzYUbCNI175gRj+VGTjDR968n3zIc0wSBGASdRwboFJRnk4Jq8xsLLV6XUtkNqP+YR3o9xh2Q66wlRV0hP/XojGQwGGh8fp1u3btHU1MxDABaLhSoqKvjVGAxQJU3RtjSZXrSakgtMu9tHHzjHKWicHpjP56PMzEzKzc2lqqoq6unpicABDNyTZZmcTie/7zCb6RK7toyE6bOSHMpKm+ns2FvBF3Mi4penT0ZofHRKLL+0L1soAcr7YwGyFRVTQUEBLyUlJfwZBg4QRUVFD5YL5eWRZ4CHuvn5+VRYWEjOnFX0psPNvU+9nTASmIq7UQV411yeSBuVtC6bx2AAH4/6KH/V9LdTIBDgnmBmHoDBDg0N8XACmP7+fg4pOzubhoeH+RVFeBhCD8Vlz6NTYy56O//BAu4pm4VvQmEXD5tWsfZkAA9wsG+j2t7EWeCGaDDcdcx6fRlNn4tdVPnO5SWdxTrtp5LECwQDRhjZ7XYaHR3lf9tsNu4hkImJCSotLeW/BwcHOVAIvA11Wn1hOsygi5ACCGxXAspcG1DF6SbalJ2h9hYwwEFpKRoM/w6vsVkiR+bvyLpqjxy2I7ZNJhN/w8Iw3kh5cyInWA1p0gZ9eMbpa3eY7HfD+urz4z4y5WZF3nrEpRV90D8j6RmmnRgepdfrZ9QVvwEG5fvJIFVZM6hKL7cLODW2TKqhzETfWwegiLyimXwVWtyVamtrm5gB9cPDEhUXF3MwAwNOfoUg5jEAPLdarWwQxu7Ozs4ZGx1MB45VXHfKOspmg0F9QBBwBJDoQc/YzoiCiLpqkHj+BfYHmF5130u5jrkhPAUG4M0BEJKfgAJv8Xg8wtBZZ/WZsbgnARzCAoLQgQ4U/BbhpYSP5HK5MMBD+AP3kHv4S1PawAbch13QqbRrXc4FXjMMhfFIjgHljcO9BRTcx3PF3Rtj6GkEGNRHMhUhgiKg4BnqKANsZwkYfbdDN8AAPvpAG/GyoAtQlJfSuBRgNP/rxIzzrV279k+j0biPFW4IPCcYDHJjx8bGeNJUBtTAvOOilh6mA16zi800hZOTk7wdQHi9XhoZGeGDXL16NQaOevvRr9LuBru3j8Ewo294RygU4le0AyTF45pZ30sCZs4jSCxP1LPLMYSyOuYVTwGU43F08HO12EsFFJGwRQJXwrCO6ZE0chTalYkpXtX3cdamYamWGXHPZikDA6CXVXN+IzOsL9GOmJ69ig6xJEDbDqajOU7fop09qu+vlBy2ZPKfAAMAX8JWZcvlwUgAAAAASUVORK5CYII="}):(0,JS.jsx)("img",{alt:"Car",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAyCAYAAADhna1TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABv9JREFUeNrsW21sU1UYfm9Xun6t3dZ9tKN1W2REA8kQjGYkC8OPkBgSDImCiUYwJv5RUX+7iBExRg1T+SEmyvxhgktUTIhIIGGEZIMEBjMuCEy2uTK67qtdv7uu9TxnvaNj9961dZ3E9k1OenvvOed9zvN+nXvWCZSU0ace3cM+trBWR/kjg6wNseZh7Xj1mUuD4gM1a2dbG+yl7HMD5bcc2muv6jzqdM8T07LRZKCCEFVo1C3itapAh7TAY0h7oI0Mzc15T8aqgweJ0AoeIy8FYpRCSU4uTwj0t1+gCi3RJkuc9OqlJxwPC3xcMEa00ZKgWmMiLSD3my5J9VB08PciGmKDRdGrVfThxlk2mbzy86Mq+vr6XSf8ie0Qtq2O04sPxhWBvtuTuS4srq2vKGe6JENpKCAsGCySdX5UUFQq9fzUbeVovebNTpfUvMupq5BjCsm3QEyBmBUnptawuPShpDVXK5dDqeeoFErysDk7XVLzLqcuyXKNzgdYCct0b9FcHefKM91bZKNrE5v70GOzOdOlXko5WkZvqGw/sG11ImPXvd90FXKM0itB9JvDFD71Y96TEbvQs5CY+EA/zXpG856YhNtVCKXCPiYXxw65lGg8QTf8YYomlKtDg0FLJWpVfhAzEY3RiVEvJ2fJsxNPkLZYSmitsfj/T8zpMR//3F5tJpt2lWy/O+EZOjfhp+4pP++3kp6z4j6Kxfpis9RUZlQkBYLnWyxG7llDwUh+JN90rS+St1QuWrFQ6l73DJ1oeoUmTFbSR/z0RE8Hbe/+VnGybMagP9q9stZ5hd7peENxbO+aZupo2Tevr6nvV3qu84uMMMqNwaHp/t01FeTQ3U1uzsoG+nLnZxQqNvLvM2oN3XA8QpZpFznGbkoqTHeMPxanG4EIS6Zaipbb6asdH0knaJNtfmyPN0g1zHNSQw/PP37hyAJ9A7Z1fLH1d/rSxpg6pmvKx5tsKAW1RhmwVllLZDNmwmxVrl5ZjA0WGzPGKDWmsMG7H3e+DvdN7sZysqH/fP7tfCE6RgoSbMfWNxc9a+o7SXaZfPafEWPxuiQ7IxnKiT4sbXlUFyXB4peqPsuFMZMxklUJ7o1qMG2w8EFo27uP8tImJ6bg5KIxz7MyuG7w4oJ+qVWpRF2UFglSVQkYQXqouITrhj542ZNsiyBrPIkxqetKrUqyodTI4rsxwxjPZsy/kbXDV3jLxZhCVSoQswJVycteAr9nb729pgpyJwSKRqMUj8/9TUej0VBJkYo2JaL09GyQ1pfocwZ+OBylYzNF1KvWUYC9SoXD4Tlrq1QcR70qQY9HfLTLrM09MSDlpT+dlHignuKRGRofH+f3tVotxWIxDs5kMlGgtJR+cE/Q2/4Q7bJZFs3jY0nYloY+9JMSJMnWyQiZbDU07Z0mj8fDMYCQYDDIDRWuqKABrYmOXbtF7Q02MqeZ7LMKpZ2Xr1O4uoYrdrlcnISamhoqLy+nqqoqstvtHNjk5CTZbDZqdU7SH77g3dKoUZNGJfBKI7fo1FO+02PT/LpWp1ngKa9dd86RMj1Nfr+fY4D+UmYQXFcwUtxuN/fmiHU17esbyNxj4AXpyMkxDw3EBWo0GLhSgDAajZwkABBd2Gq1ktPp5KRVVlbSp7dGqL1xzVyoMVJwFnNuwkfHbk8qnsngpA/krDfpOKGifMLmM1RWcb3wFBChVqu5x6IBA7wH5MBAwHNxVsUNlG5oQ1vnX8FwWj+AvuTxX2VWQd86hAwsBIHngBgIQAAUCIPnwJNO9vcvLJnGYn4eg/2MT8Eo2LvgzLdOr1lw/zf3FDkesvL59Xo9JwV4gEPMMfBcPAMxIMtsNg9e8PhBTJ2cvtBs/CrN/UqcE7P1g5tOer3W+ha7LlUiprXB3t4T1Oxhl+/BKvMunyQFAoBirAMQQEPgNdlIr88vmecc7DN1fjHxQkQPBg7Rk1hYf/eqPtrJHrfIqBo8PORqX5R8q89caksH6ObNmxcBAQkiOQAjkgVQkUhk3v2XvaQmPSVVr3hf/C6GVnKNIKYzV+X6ODwGborEhzyC8EnNMbCYmBATiQT6f77cpLCFv8wI2IMcg8WDCIRPKhEINZAEXEyuZjK/kA0o5jVXGIANIyMjPIcgn4gCYEjMAIpnCNWurq7O5SaGYUCuGIABYCDkOzGsRI/GVgL3GVGDDEN9JvMXZQPK4XBcZFbYrdPptF6vlwObmZkhXMOCIKqsrAxd2xigIznZ3A0PexgOgS26RRAEboxQKMQ9d2pqigKBgEgKNw7r78q5xyQthir2MyrUvTvfpOu+z0jZn+utO8OBonEoNe+JIU1z/4+0NxuPFZYBGKpU6j+AnWOtnYEZXKn3mmRYPcvajuQtlNxfkA8ZDk82c/4jwADNq6pGK4SsDAAAAABJRU5ErkJggg=="})})})})},rE=e=>{const{train:t}=e,{actual_cargo:n,reader:r,target_location:i,actual_location:s}=t||{};g((e=>e)),T();let o=n||[];"string"===typeof n&&(o=null===n||void 0===n?void 0:n.split(","));let a=[];o.forEach(((e,t)=>a.push((0,JS.jsx)(nE,{},t))));const l="train ".concat(s||"station");return(0,JS.jsxs)("div",{className:"trainContainer",children:[(0,JS.jsx)("div",{className:"cloudTrain"}),(0,JS.jsx)("div",{className:"container",children:(0,JS.jsxs)("div",{className:"content",children:[(0,JS.jsxs)("div",{className:"".concat(l),children:[null===a||void 0===a?void 0:a.map((e=>e)),(0,JS.jsx)(nE,{name:"front"})]}),(0,JS.jsx)("div",{className:"track"})]})})]})};const iE=n.p+"static/media/signal-green.6db668a038c003788a6a8a76d3ded8ff.svg";const sE=n.p+"static/media/signal-yellow.9507536749a6cac606cb410fa79c1499.svg";const oE=n.p+"static/media/signal-red.8b1665df96da36dd66fe087fff9cd6b4.svg",aE=e=>{const{isStation:t,trainLocation:n,signal:r}=e,{name:i,slug:s,actual_state:o,target_state:a}=r||{},l=t?"station":s,u="four"===s?"circle":"circle connector",c=n===l?u.concat(" here"):u;let h;switch(o){case"stop":h=(0,JS.jsx)("img",{alt:"SignalRed",src:oE});case"clear":h=(0,JS.jsx)("img",{alt:"SignalGreen",src:iE});default:h=(0,JS.jsx)("img",{alt:"SignalYellow",src:sE})}return(0,JS.jsxs)("div",{className:"signalContainer",children:[(0,JS.jsx)("div",{className:"signal ".concat(l),children:t?(0,JS.jsx)("img",{alt:"Station",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC3pJREFUeNrsWw1MVNkVPvMHCIPgH78KuLJIiqsssK5LVdDo2sS1poa1mqJgbDdp0qRNs01jQqMmmJhYd7dNaZuaTVi3u02xdZPWpt1dg6ihK7oqi1IFFfkTGPEHGIbfGab3uzN35s3jPZhhlBkiJ3l599173p1zzj3n3HPOu6OhAENpaWnxwMBAUXd3dyaek5OTa9nto5KSkvJA0qUJoECiBwcHz1VVVWXevHnTY2zFihWUn59fO2fOnA1MQD2BoE8bKMEwLfmsoqIiMzo6murq6qinp4eO/6aMt9GHMeAEij5doMzn4sWLP4uLi6M16zZSTvarFGk0Mv3V0OLERGo3PaFBSx81Nzen7N+/v6WysrKWXgRggvksJibGzoRjN5v7+SUA7Y7OLj4GHOAGgkZ9gGQTPTw8TOGRUWTu76f4uFj68KNP+MD+oh+Q0RjB+4AD3BkrmIyMjHx2O+ct/sOHD8f1xTFBCPjX52fpem2dwM1n89u9nbu+vl4zYzXGYrFQVFQUdba3Uj/TGMDWLZv4vbPL5GhbhzkOcF+YXampqYlvyQcOHKDbDY3cbC5Uf8XH+vst9GnF3/kYcID7wvgYmNKaNWuot7eXfvfBcTKGGajXMkQpSxLpyuVLdPToUZo7dy7Fx8fTpUuXZm6A56uPEZCVlUWjo6N09epVl99hOxFlZ2eTwWCga9eu+UzLjPYxAsD4vHnzuCAgEKFN7e3t9PTp04CGFAEVDAACCLQQnospmTbl5DeOjhV9NTxWHAwMFRn1h9mtKvbs11WB1pj8NIO2mF3BstgHnXe/BKOlWZgVTECdry42nnRxCWTr6qAxSz8ZlqW5xsb6zWQzdbr6Rr65Shpj5IQ4eLbea+TtkFXZfF6M69m4nY3x32S/N8pwxHPQCSY0N48i9r7DGQZjlo9PUMSeH5EWhLM+CK3v2GFXX+/Bd0nLBKOEE/bmW2RggrCc/BMXzPw/fsLnDXH2hX47n4/3//44RR3+NT0u/C7ZnqFgnrkpQQPsTFMGTv+Frza/s1Ue+uIMjdRd46sNHDAUvmO3Kg7aog/CgDb0/+E9fuE94PCVTV3O7+I5KAUDhs1staHuc39xkK/08H/Pu5NHttIwAeCBOay4Eo4cIDxoFP+NCCM3UQCEppeYYdAKBrYedegYZ1owa/zxzznx4g61B5jZymsZkxCgHEfaxp0Lr7qKmxNMVQgY5qYkyGAJ8A5JYodggcMswDs0u13PxjEzK46pYrlScrDlSgH3MVFRUVOqxTxP6O3t1QSDxjQvWLCgfMmSJeM0ZuPGja46ixwqKyv5GMqXSoCvk6jNYA4lwBjmkENnZ2c5KoN+CyYjIyOF3f0yA5Qh8fVQDjt27KBr+nTeXrVQS6YBO3Wxa0uSjhejIJT5uW+7+r55NMbbwI2OruDCeaPgHd4v5kA7LlxDa/tuKVb4QIfBYDjkp1zKoTEp/m63KE+qQYvZwVTKXA1nGs9DNvcHUGmfaAPXZRYjdo85HG0tJaj8Xl9f37PwdVWzu9J0Zddy2JtucDjpEKLlzNqgGbHhbo2ACYk+0QZuh3N85QItJUdqXXOgHcYUrrtphgvm/AOboo8RIPyK3Me4TdGu6GMSZrrGTLePeWaCYdteUVhYmF+T2O32oPENAwMDcMB+zTE0NFSkZ0xlarX++WCNRj2ecvsHDTMBRxYSJjmVE8f9jaNPtIErfAza0jnQ5nh96rT4yw9kotm+fbtfkavVanV9mJfD0qVLKSIiQnHs/v37fEwtAEQAhw/6mEMJMIY55BAeHk4hISH+Kt4GDx+za9cuxQgVgZicARF5Qii1tcoHntT6fYHq6mqf38nPz1eNvEE3LnnELY+kPQTzxtbv08nbo5SXqKPmPoffiGHR57LXNrAI1lFCxBh2mqzkBj6R0Wik3NxcSkpKCgof09ra6moLugXNANAd01JPI5kFLocu5UdRMIglEHeImAPQKPpfMnjEEt1NDr+i1+spMjKSWK7kFeGxsbG0fPlyODhqaGggtbwmLS2NcEYPhxYbGxs5vjcAEzObzW5+XjK4aAaAbrMzfgKE6jz5URQM4gy5xoj+f98e9dQYq+870bZt28ie4FDhGEZQ2ppNVFd1hp/UFIAdsmB3IbXQQkqL1lKNyUaFeZvpn6dPkelBq2/VRSfdHhrjpPvzVpunxsj48RBMd1M9R9B2EiU63qPrbAUGTM2U5TwJhrEsK/E+X2D16tXUFZ1BNfetnNBeHvxZaefarVxrWlpaON7mzZvpfN8CFq/Y+EoioGt4qqW9O96mP58o81pz+NbtpFvQLPrgTzJYEsr5sSjzo79z507mokWL+MO7P/2J4g9cv359ytu1gKRlaVRhso3r/6LNRq8zsxGCCV2yglruWj3jCvZazWM9Ny+pdikBNgOYH6Dsg+OqeKdPn1Ydwyl1/YMHD95nl18OD/4lJydnUrVWgp5hO/c7LrxBNTy2/UdPfoDz7t271NbW5q8Pf1/PVHeDiGN27tw5DuPcuXM4MaW47VVVOSqI2Jkmg+hQDeXN13kEfXmJom7hGRCKfjhNmJ0I7vq6J+cIC5Senu7atpXoZhrBeVLjZ1wcs/o7BeO36/p6WpqdR1d1aR7ON3tJo3SiSQGacb7H5iEQ4RD3xnjmVqIfQpK2l/q47IJuqfMF3TFtt2jwle95OF85Px6CESsEIqJCHIJpEqsdq/NYUb3Jt7LqdGnMuN+M1XnMCbotzkzdhaPAj4dghplQoSkQitQnDLGdqt2pQRgDzmJr8CSOqsmgk25BM0DQLeVPiZ9pO4MXCFPyq+yANF3A8UO/dFToZckenJVIBsVYDeIb57uIfieNeBGFJrujZ6lJ0RM3nrRiJyJxHvgxi2r0wpQQE4nDjh/jRAVLKmukmwmjGdHxIpl/RP+jR4/cgrly5YqrHnPjxo0pSTchIUH1M4iLYKYxNZJqnqjecQ2aQ4oVO4TtQmNQapjjBS0dHR38Aty7d8+/eoxO59/flrypf9RVnyXXAoj3nPcvJdHsjf986u7/2o2D49EicJuMFn/54fWYgoICv+oxIo5JTU0NCoeLAE+tPjTleszzBvybBDmTiHSRNStl2MnJybRy5UqOj/8sIV1AKuBLnhT0xXAB69evp1dWr6ULHSw5XKTj2W1KxmLak7uOLlR+yRmHqSEDD41/mWfVeQzvPMNb9Woq/ZAJ9NQplmGbTIEVDBJLpAgiwWxubuaETeX/Q9CStOy1dKJ+lCeEqxbq+LbcYoYD1tGeN9/iWgO8wfmp9FdnieP1WIE3xnaqCCosLKSysrIpaQ521eLiYhc/2GnLy8tV+VH0mikpKVR69Bi1xq0lY9K3+PV42RZ677dlqjXcCQXDtAKpxpBNOb75x30bMV9HMckvs7ZVcQ4I5/ITA61bt87n34cwQLuUH7TRJwTllWAg2b+1hbi+5wjCznSE8jFfAP6ieTBEUSjSuXvHQumyaWzCuWq6bHw+X2Hfvn2K/KAPY14LBhJVKhNgsqSMHJ8Jw0ezSWMHm+Pj22Q40hKFtwCalfhBnxo/erXwXUSf4huQeJ6KKUmTOHlyKO1D4Cf9CqmEN1VQ4yegu5I0/5HnQNI+RLxSdVfCW58wPf+h16upviBQfGeWP88kgAn6yo+iYKSfReWqFzbz5MJp9pUfvVqBR9h6qPNF+bMvIM2Y5VmztE+cj5kIbyoAmn3lRz+ZTxAMyZ998zHujFmeNUv7xPmYifD2pvvuFntHyGd+psWUpD5L2LX0WfSJ8zET4U2XKc2ewfNlV7K03aKFww6Vbh9x2OLCAc/nmeRj2u/+bxz9k/HzTP7VXlpaqlrTQQiftHG3h68Asydvj8p8h4HjSE1HCe9Xr4XQkSNHJqyllJSUVAVL2QGlNVViEJTJAzMwKAclx6qE5wUtfsP/BRgAFFQsTW5wgHEAAAAASUVORK5CYII="}):h}),(0,JS.jsx)("div",{className:c})]})},lE=()=>(0,JS.jsx)("div",{className:"ribbonContainer",children:(0,JS.jsxs)("div",{className:"ribbon",children:[(0,JS.jsx)("div",{className:"blue"}),(0,JS.jsx)("div",{className:"red"}),(0,JS.jsx)("div",{className:"yellow"}),(0,JS.jsx)("div",{className:"green"})]})}),uE=e=>{const t=g((e=>e)),n=T(),{isRealtime:r,isSimulator:i}=e,s=!r&&!i,{services:o,selectedPattern:a,worldState:l}=t.coreReducer,{cargo:u,proposal:c,session_mailbox:h,signals:d,train:f,train_mailbox:p}=l;return(0,JS.jsxs)("div",{className:"dashboardContainer",children:[(0,JS.jsxs)("div",{className:"dashboardWrapper",children:[s&&(0,JS.jsxs)("div",{className:"dashboardPanel",children:[(0,JS.jsx)("div",{className:"missionTitle",children:(0,JS.jsx)("h3",{children:"Your Mission: ".concat(null===a||void 0===a?void 0:a.name)})}),a&&(0,JS.jsx)(tE,{services:o,selectedPattern:a})]}),(0,JS.jsxs)("div",{className:"dashboardPanel",children:[(0,JS.jsx)("div",{className:"dashboardSignals",children:(0,JS.jsxs)("div",{className:"columns",children:[(0,JS.jsx)("p",{children:"Loaded cargo ..."}),(0,JS.jsx)(aE,{isStation:!0,trainLocation:null===f||void 0===f?void 0:f.actual_location}),(0,JS.jsx)(aE,{trainLocation:null===f||void 0===f?void 0:f.actual_location,signal:null===d||void 0===d?void 0:d.one}),(0,JS.jsx)(aE,{trainLocation:null===f||void 0===f?void 0:f.actual_location,signal:null===d||void 0===d?void 0:d.two}),(0,JS.jsx)(aE,{trainLocation:null===f||void 0===f?void 0:f.actual_location,signal:null===d||void 0===d?void 0:d.three}),(0,JS.jsx)(aE,{trainLocation:null===f||void 0===f?void 0:f.actual_location,signal:null===d||void 0===d?void 0:d.four})]})}),(0,JS.jsx)(rE,{train:f}),(0,JS.jsx)(ZS,{worldState:l})]})]}),(0,JS.jsxs)("div",{className:"actionPanel",children:[(0,JS.jsx)("button",{className:"stop",onClick:e=>{n(GS()),window.location.replace("/")},children:"Stop Mission"}),(0,JS.jsx)("button",{className:"reset",onClick:e=>{n(KS())},children:"Reset Mission"})]}),(0,JS.jsx)(lE,{})]})},cE=e=>{const{label:n,onChange:r}=e,[i,s]=(0,t.useState)(!1);return(0,JS.jsxs)("div",{className:"toggleContainer",children:[n," ",(0,JS.jsxs)("div",{className:"toggleWrapper",children:[(0,JS.jsx)("input",{type:"checkbox",className:"checkbox",checked:i&&"checked",name:n,id:n,onChange:e=>{s(e.target.checked),null===r||void 0===r||r(e)}}),(0,JS.jsxs)("label",{className:"label",htmlFor:n,children:[(0,JS.jsx)("span",{className:"inner"}),(0,JS.jsx)("span",{className:"switch"})]})]})]})},hE=e=>{var n;const r=g((e=>e)),i=T(),[s,o]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[u,c]=(0,t.useState)(!1),[h,d]=(0,t.useState)(!1);(0,t.useEffect)((()=>{!async function(){await Promise.all([i(VS()),i(jS())])}()}),[i]);const f=!a&&!s&&!h;return(0,JS.jsx)("div",{className:"mainContainer",children:(0,JS.jsxs)("div",{className:"mainWrapper",children:[(0,JS.jsx)("div",{children:!u&&(0,JS.jsx)("a",{href:"#",onClick:async e=>{c(!0),o(!0)},children:"Watch in real-time!"})}),(0,JS.jsx)("div",{children:!u&&(0,JS.jsx)("a",{href:"#",onClick:()=>l(!a),children:"Toggle admin view"})}),f&&(0,JS.jsxs)("div",{className:"mainContent",children:[(0,JS.jsx)("h2",{children:"Choose your adventure"}),(0,JS.jsx)("div",{className:"row",children:null===(n=r.coreReducer.patterns)||void 0===n?void 0:n.map(((e,t)=>(0,JS.jsx)("button",{type:"button",onClick:t=>(async(e,t)=>{c(!0),await BS({pattern:t,dispatch:i})})(0,e),children:"".concat(e.name)},t)))})]}),a&&(0,JS.jsxs)("div",{children:[(0,JS.jsx)("h2",{children:"Admin View"}),!u&&(0,JS.jsx)("div",{className:"row",children:(0,JS.jsx)(cE,{label:"(Admin) Switch on simulator: ",onChange:async e=>{c(e.target.checked),d(e.target.checked),await BS({dispatch:i,isSimulator:e.target.checked})}})})]}),u&&(0,JS.jsx)(uE,{isRealtime:s,isSimulator:h})]})})},dE=()=>(0,JS.jsxs)("div",{className:"headerContainer",children:[(0,JS.jsx)("div",{className:"headerBanner"}),(0,JS.jsx)(lE,{})]});const fE=function(){return(0,JS.jsxs)(S,{store:XS,children:[(0,JS.jsx)(dE,{}),(0,JS.jsx)(hE,{})]})};r.createRoot(document.getElementById("root")).render((0,JS.jsx)(t.StrictMode,{children:(0,JS.jsx)(fE,{})}))})()})();
//# sourceMappingURL=main.9c19815b.js.map