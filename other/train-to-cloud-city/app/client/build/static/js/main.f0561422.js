/*! For license information please see main.f0561422.js.LICENSE.txt */
(()=>{"use strict";var e={463:(e,t,n)=>{var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,F=Object.assign;function V(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function xe(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Ie)&&(Ae(),ke())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Oe=!1}function Me(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Ve=!1,je=null,ze={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Ue(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,Tt,xt=!1,kt=[],Ct=null,At=null,Nt=null,Dt=new Map,Pt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Vt(e)&&n.delete(t)}function zt(){xt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Nt&&Vt(Nt)&&(Nt=null),Dt.forEach(jt),Pt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Qt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Ht,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if(Ht=null,null!==(e=vi(e=_e(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return In}var xn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(xn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Dn),On=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){xe(r),0<(t=Qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Wn=null;function Hn(e){Vr(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Wn=Qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,_e(e)),De(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==H(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var xr=Tr("animationend"),kr=Tr("animationiteration"),Cr=Tr("animationstart"),Ar=Tr("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Rr=Dr[Or];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(xr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Ve||(Ve=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ve)throw e=je,Ve=!1,je=null,e}function jr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}De((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case xr:case kr:case Cr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pe(p,d))&&u.push(Gr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,g=d;g;g=Wr(g))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Hr(o,a,l,u,!1),null!==c&&null!==h&&Hr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Kn(a))if(Jn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Un?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==w?"onCompositionEnd"===w&&Un&&(v=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Un=!0)),0<(y=Qr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Vn);case"textInput":return(e=t.data)===Vn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),$t=Zt=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function Ti(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function xi(e,t){Ei++,Si[Ei]=e.current,e.current=t}var ki={},Ci=Ii(ki),Ai=Ii(!1),Ni=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ai),Ti(Ci)}function Ri(e,t,n){if(Ci.current!==ki)throw Error(s(168));xi(Ci,t),xi(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ni=Ci.current,xi(Ci,e),xi(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(Ci),xi(Ci,e)):Ti(Ai),xi(Ai,n)}var Vi=null,ji=!1,zi=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function Ui(){if(!zi&&null!==Vi){zi=!0;var e=0,t=wt;try{var n=Vi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,ji=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We($e,Ui),i}finally{wt=t,zi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Wi=[],Hi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function $i(e,t,n){Wi[Hi++]=Xi,Wi[Hi++]=Ji,Wi[Hi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Hi],Wi[Hi]=null,Ji=Wi[--Hi],Wi[Hi]=null,Xi=Wi[--Hi],Wi[Hi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var xs=null;function ks(e){null===xs?xs=[e]:xs.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(rc(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(rc(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Rs(e,i,r))&&(rc(t,e,r,n),Ms(t,e,r))}};function Us(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Pi(t)?Ni:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Pi(t)?Ni:Ci.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Hs(s)===t.type)?((r=i(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ws(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Ws(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Ws(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),is&&Zi(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Zi(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Zi(i,g),c}function m(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var w=f(i,g,v.value,c);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(i,g),a=o(w,a,m),null===h?u=w:h.sibling=w,h=w,g=y}if(v.done)return n(i,g),is&&Zi(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return is&&Zi(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),is&&Zi(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Hs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Qs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=Qs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(M(o))return m(r,s,o,l);Ws(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Xs=Ys(!0),Js=Ys(!1),Zs={},$s=Ii(Zs),eo=Ii(Zs),to=Ii(Zs);function no(e){if(e===Zs)throw Error(s(174));return e}function ro(e,t){switch(xi(to,t),xi(eo,e),xi($s,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti($s),xi($s,t)}function io(){Ti($s),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no($s.current),n=le(t,e.type);t!==n&&(xi(eo,e),xi($s,n))}function oo(e){eo.current===e&&(Ti($s),Ti(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,go=null,mo=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,yo=mo=go=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=e:yo=yo.next=e,yo}function ko(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?go.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,go.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=go,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return ko().memoizedState}function Bo(e,t,n,r){var i=xo();go.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}go.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return Uo(2048,8,e,t)}function Go(e,t){return Uo(4,2,e,t)}function Qo(e,t){return Uo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),go.lanes|=n,Fl|=n,e.baseState=!0),t)}function $o(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return ko().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===go||null!==t&&t===go}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=$o.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=xo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Xo,useContext:Ts,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(ko(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Xo,useContext:Ts,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=ko();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),da(0,t)},n}function ga(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Xs(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xi(Rl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xi(Rl,Ol),Ol|=r;return _a(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Pi(n)?Ni:Ci.current;return s=Di(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Di(t,c=Pi(n)?Ni:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ks(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ns?("function"===typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Ns||Us(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Di(t,l=Pi(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ks(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Ns||Us(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){xa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Oa,Ra,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rc(r,e,i,-1))}return mc(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Hi++]=Xi,Wi[Hi++]=Ji,Wi[Hi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Xs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ua(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,s);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ha(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,io(),Ti(Ai),Ti(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oa(e,t),Wa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=no($s.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":Q(r),$(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":Q(e),$(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no($s.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return io(),Oa(e,t),null===e&&Ur(t.stateNode.containerInfo),Wa(t),null;case 10:return Ss(t.type._context),Wa(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qa(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,xi(ao,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($s.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Tc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Tc(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tc(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,$a=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Tc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){$a=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Xa;var c=Ja;if(Xa=o,(Ja=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,$a=l):El(i);for(;null!==s;)$a=s,bl(s,t,n),s=s.sibling;$a=i,Xa=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):_l(e)}}function _l(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function Sl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Il,Tl=Math.ceil,xl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Nl=null,Dl=null,Pl=0,Ol=0,Rl=Ii(0),Ml=0,Ll=null,Fl=0,Vl=0,jl=0,zl=null,Bl=null,Ul=0,ql=1/0,Kl=null,Gl=!1,Ql=null,Wl=null,Hl=!1,Yl=null,Xl=0,Jl=0,Zl=null,$l=-1,ec=0;function tc(){return 0!==(6&Al)?Je():-1!==$l?$l:$l=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Vl|=n),4===Ml&&lc(e,Pl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,ji&&Ui()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Al)&&Ui()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if($l=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Al;Al|=2;var o=gc();for(Nl===e&&Pl===t||(Kl=null,ql=Je()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),xl.current=o,Al=i,null!==Dl?t=0:(Nl=null,Pl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,Kl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Bl,Kl),t);break}Sc(e,Bl,Kl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Bl,Kl),r);break}Sc(e,Bl,Kl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~jl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,Kl),ic(e,Je()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,ji&&Ui())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Ec();var t=Al;Al|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Al=t))&&Ui()}}function dc(){Ol=Rl.current,Ti(Rl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ti(Ai),Ti(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Dl=e=Rc(e.current,null),Pl=Ol=t,Ml=0,Ll=null,jl=Vl=Fl=0,Bl=zl=null,null!==xs){for(t=0;t<xs.length;t++)if(null!==(r=(n=xs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}xs=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(_s(),ho.current=oa,vo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=mo=go=null,wo=!1,bo=0,kl.current=null,null===n||null===n.return){Ml=1,Ll=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ml&&(Ml=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gc(){var e=xl.current;return xl.current=oa,null===e?oa:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Vl)||lc(Nl,Pl)}function yc(e,t){var n=Al;Al|=2;var r=gc();for(Nl===e&&Pl===t||(Kl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_s(),Al=n,xl.current=r,null!==Dl)throw Error(s(261));return Nl=null,Pl=0,Ml}function vc(){for(;null!==Dl;)bc(Dl)}function wc(){for(;null!==Dl&&!Ye();)bc(Dl)}function bc(e){var t=Il(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?_c(e):Dl=t,kl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ha(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Sc(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Dl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Xe(),Al=l,wt=a,Cl.transition=o}else e.current=n;if(Hl&&(Hl=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Xl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Ui()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ec(){if(null!==Yl){var e=bt(Xl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(ol(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var w=e.current;for($a=w;null!==$a;){var b=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,$a=b;else e:for(a=w;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Tc(l,l.return,S)}if(l===a){$a=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,$a=_;break e}$a=l.return}}if(Al=i,Ui(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Ic(e,t,n){e=Rs(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Rs(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ml||3===Ml&&(130023424&Pl)===Pl&&500>Je()-Ul?fc(e,0):jl|=n),ic(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=As(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Nc(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case k:a=9;break e;case C:a=11;break e;case D:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Uc(e){if(!e)return ki;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=Uc(null),n=e.current,(s=Os(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Rs(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rs(i,t,o))&&(rc(e,i,o,s),Ms(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(xi(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);xi(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&$i(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ms(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,ms(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),xa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Va(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,xi(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=ms(r=t.type,t.pendingProps),Ea(e,t,r,i=ms(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ms(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Is(t,n),qs(t,r,i),Gs(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gc(o);a.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Ur(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Ur(8===e.nodeType?e.parentNode:e),hc((function(){Kc(t,l,n,r)})),l}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Al)&&(ql=Je()+500,Ui()))}break;case 13:hc((function(){var t=As(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},St=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,xe,ke,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},117:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{e.exports=n(117)},184:(e,t,n)=>{e.exports=n(374)},813:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,O(S);else{var t=r(u);null!==t&&R(_,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(x),x=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,T=null,x=-1,k=5,C=-1;function A(){return!(t.unstable_now()-C<k)}function N(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?E():(I=!1,T=null)}}else I=!1}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){y(N,0)};function O(e){T=e,I||(I=!0,E())}function R(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(x),x=-1):m=!0,R(_,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,O(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{e.exports=n(813)},637:(e,t,n)=>{var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},995:(e,t,n)=>{e.exports=n(637)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>zt,SDK_VERSION:()=>Wn,_DEFAULT_ENTRY_NAME:()=>Mn,_addComponent:()=>jn,_addOrOverwriteComponent:()=>zn,_apps:()=>Fn,_clearComponents:()=>Kn,_components:()=>Vn,_getProvider:()=>Un,_registerComponent:()=>Bn,_removeServiceInstance:()=>qn,deleteApp:()=>Jn,getApp:()=>Yn,getApps:()=>Xn,initializeApp:()=>Hn,onLog:()=>$n,registerVersion:()=>Zn,setLogLevel:()=>er});var t=n(791),r=n(250),i=n(995),s=t,o=Symbol.for("react-redux-context"),a="undefined"!==typeof globalThis?globalThis:{};function l(){var e;if(!s.createContext)return{};const t=null!==(e=a[o])&&void 0!==e?e:a[o]=new Map;let n=t.get(s.createContext);return n||(n=s.createContext(null),t.set(s.createContext,n)),n}var c=l(),u=()=>{throw new Error("uSES not initialized!")};function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return function(){return s.useContext(e)}}var d=h(),f=u,p=(e,t)=>e===t;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const t=e===c?d:h(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=p,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:a,getServerState:l,stabilityCheck:c,identityFunctionCheck:u}=t(),h=(s.useRef(!0),s.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i.stabilityCheck])),d=f(a.addNestedSub,o.getState,l||o.getState,h,r);return s.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var m=g();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function y(e){e()}var v={notify(){},get:()=>[]};function w(e,t){let n,r=v,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){y((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=v)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var b=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?s.useLayoutEffect:s.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var _=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:a="once"}=e;const l=s.useMemo((()=>{const e=w(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:a}}),[t,i,o,a]),u=s.useMemo((()=>t.getState()),[t]);b((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,u]);const h=n||c;return s.createElement(h.Provider,{value:l},r)};function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const t=e===c?d:h(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var E=S();function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const t=e===c?E:S(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var T,x=I();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:String(t)}function A(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T=i.useSyncExternalStoreWithSelector,f=T,(e=>{e})(t.useSyncExternalStore);var N=Symbol.for("immer-nothing"),D=Symbol.for("immer-draftable"),P=Symbol.for("immer-state");function O(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var R=Object.getPrototypeOf;function M(e){return!!e&&!!e[P]}function L(e){var t;return!!e&&(V(e)||Array.isArray(e)||!!e[D]||!(null===(t=e.constructor)||void 0===t||!t[D])||q(e)||K(e))}var F=Object.prototype.constructor.toString();function V(e){if(!e||"object"!==typeof e)return!1;const t=R(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===F}function j(e,t){0===z(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function z(e){const t=e[P];return t?t.type_:Array.isArray(e)?1:q(e)?2:K(e)?3:0}function B(e,t){return 2===z(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){const r=z(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function q(e){return e instanceof Map}function K(e){return e instanceof Set}function G(e){return e.copy_||e.base_}function Q(e,t){if(q(e))return new Map(e);if(K(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&V(e)){if(!R(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[P];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],s=n[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(R(e),n)}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Y(e)||M(e)||!L(e)||(z(e)>1&&(e.set=e.add=e.clear=e.delete=H),Object.freeze(e),t&&j(e,((e,t)=>W(t,!0)))),e}function H(){O(2)}function Y(e){return Object.isFrozen(e)}var X,J={};function Z(e){const t=J[e];return t||O(0),t}function $(){return X}function ee(e,t){t&&(Z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function te(e){ne(e),e.drafts_.forEach(ie),e.drafts_=null}function ne(e){e===X&&(X=e.parent_)}function re(e){return X={drafts_:[],parent_:X,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ie(e){const t=e[P];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function se(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[P].modified_&&(te(t),O(4)),L(e)&&(e=oe(t,e),t.parent_||le(t,e)),t.patches_&&Z("Patches").generateReplacementPatches_(n[P].base_,e,t.patches_,t.inversePatches_)):e=oe(t,n,[]),te(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==N?e:void 0}function oe(e,t,n){if(Y(t))return t;const r=t[P];if(!r)return j(t,((i,s)=>ae(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return le(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),j(i,((i,o)=>ae(e,r,t,i,o,n,s))),le(e,t,!1),n&&e.patches_&&Z("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ae(e,t,n,r,i,s,o){if(M(i)){const o=oe(e,i,s&&t&&3!==t.type_&&!B(t.assigned_,r)?s.concat(r):void 0);if(U(n,r,o),!M(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(L(i)&&!Y(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;oe(e,i),t&&t.scope_.parent_||le(e,i)}}function le(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W(t,n)}var ce={get(e,t){if(t===P)return e;const n=G(e);if(!B(n,t))return function(e,t,n){var r;const i=de(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!L(r)?r:r===he(e.base_,t)?(pe(e),e.copy_[t]=ge(r,e)):r},has:(e,t)=>t in G(e),ownKeys:e=>Reflect.ownKeys(G(e)),set(e,t,n){const r=de(G(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=he(G(e),t),i=null===r||void 0===r?void 0:r[P];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||B(e.base_,t)))return!0;pe(e),fe(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==he(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,pe(e),fe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=G(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){O(11)},getPrototypeOf:e=>R(e.base_),setPrototypeOf(){O(12)}},ue={};function he(e,t){const n=e[P];return(n?G(n):e)[t]}function de(e,t){if(!(t in e))return;let n=R(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=R(n)}}function fe(e){e.modified_||(e.modified_=!0,e.parent_&&fe(e.parent_))}function pe(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}j(ce,((e,t)=>{ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ue.deleteProperty=function(e,t){return ue.set.call(this,e,t,void 0)},ue.set=function(e,t,n){return ce.set.call(this,e[0],t,n,e[0])};function ge(e,t){const n=q(e)?Z("MapSet").proxyMap_(e,t):K(e)?Z("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ce;n&&(i=[r],s=ue);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:$()).drafts_.push(n),n}function me(e){return M(e)||O(10),ye(e)}function ye(e){if(!L(e)||Y(e))return e;const t=e[P];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Q(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Q(e,!0);return j(n,((e,t)=>{U(n,e,ye(t))})),t&&(t.finalized_=!1),n}var ve=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&O(6),void 0!==n&&"function"!==typeof n&&O(7),L(e)){const i=re(this),s=ge(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?te(i):ne(i)}return ee(i,n),se(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===N&&(r=void 0),this.autoFreeze_&&W(r,!0),n){const t=[],i=[];Z("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}O(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){L(e)||O(8),M(e)&&(e=me(e));const t=re(this),n=ge(e,void 0);return n[P].isManual_=!0,ne(t),n}finishDraft(e,t){const n=e&&e[P];n&&n.isManual_||O(9);const{scope_:r}=n;return ee(r,t),se(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Z("Patches").applyPatches_;return M(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},we=ve.produce;ve.produceWithPatches.bind(ve),ve.setAutoFreeze.bind(ve),ve.setUseStrictShallowCopy.bind(ve),ve.applyPatches.bind(ve),ve.createDraft.bind(ve),ve.finishDraft.bind(ve);function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var _e=e=>Array.isArray(e)?e:[e];function Se(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Ee="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Ie=0,Te=1;function xe(){return{s:Ie,v:void 0,o:null,p:null}}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=xe();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=xe(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=xe(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===Te?l=t.v:(l=e.apply(null,arguments),s++),a.s=Te,r){var c,u,h;const e=null!==(c=null===(u=i)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Ee(l):l}return a.v=l,l}return o.clearCache=()=>{n=xe(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),be(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=ke,argsMemoizeOptions:f=[],devModeChecks:p={}}=c,g=_e(h),m=_e(f),y=Se(t),v=u((function(){return s++,l.apply(null,arguments)}),...g);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...m);return Object.assign(w,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var Ae=Ce(ke),Ne=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Ne});function De(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Pe=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Oe=()=>Math.random().toString(36).substring(7).split("").join("."),Re={INIT:"@@redux/INIT".concat(Oe()),REPLACE:"@@redux/REPLACE".concat(Oe()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Oe())};function Me(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Le(e,t,n){if("function"!==typeof e)throw new Error(De(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(De(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(De(1));return n(Le)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(De(3));return i}function h(e){if("function"!==typeof e)throw new Error(De(4));if(l)throw new Error(De(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(De(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!Me(e))throw new Error(De(7));if("undefined"===typeof e.type)throw new Error(De(8));if("string"!==typeof e.type)throw new Error(De(17));if(l)throw new Error(De(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:Re.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(De(10));r=e,d({type:Re.REPLACE})},[Pe]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(De(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Pe](){return this}}}}}function Fe(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Re.INIT}))throw new Error(De(12));if("undefined"===typeof n(void 0,{type:Re.PROBE_UNKNOWN_ACTION()}))throw new Error(De(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(De(14))}o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function je(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var ze=je(),Be=je,Ue=(function(){const e=Ce(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(M(e)?me(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(ke),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ve:Ve.apply(null,arguments)}),qe=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function Ke(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Et(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Me(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var Ge=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Qe(e){return L(e)?we(e,(()=>{})):e}function We(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Et(10));const r=n.insert(t,e);return e.set(t,r),r}var He="RTK_autoBatch",Ye=e=>t=>{setTimeout(t,e)},Xe="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ye(10),Je=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new Ge(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Xe:"callback"===e.type?e.queueNotification:Ye(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[He]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Ze(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Et(28));if(r in t)throw new Error(Et(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var $e=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},et=(e,t)=>qe(e)?e.match(t):e(t);function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>et(t,e)))}var nt=["name","message","stack","code"],rt=class{constructor(e,t){A(this,"_type",void 0),this.payload=e,this.meta=t}},it=class{constructor(e,t){A(this,"_type",void 0),this.payload=e,this.meta=t}},st=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of nt)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},ot=(()=>{function e(e,t,n){const r=Ke(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),i=Ke(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),s=Ke(e+"/rejected",((e,t,r,i,s)=>({payload:i,error:(n&&n.serializeError||st)(e||"Rejected"),meta:{...s||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)}})));return Object.assign((function(e){return(o,a,l)=>{const c=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):$e(),u=new AbortController;let h,d;function f(e){d=e,u.abort()}const p=async function(){let p;try{var g,m;let s=null===n||void 0===n||null===(g=n.condition)||void 0===g?void 0:g.call(n,e,{getState:a,extra:l});if(null!==(y=s)&&"object"===typeof y&&"function"===typeof y.then&&(s=await s),!1===s||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise(((e,t)=>{h=()=>{t({name:"AbortError",message:d||"Aborted"})},u.signal.addEventListener("abort",h)}));o(i(c,e,null===n||void 0===n||null===(m=n.getPendingMeta)||void 0===m?void 0:m.call(n,{requestId:c,arg:e},{getState:a,extra:l}))),p=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:a,extra:l,requestId:c,signal:u.signal,abort:f,rejectWithValue:(e,t)=>new rt(e,t),fulfillWithValue:(e,t)=>new it(e,t)})).then((t=>{if(t instanceof rt)throw t;return t instanceof it?r(t.payload,c,e,t.meta):r(t,c,e)}))])}catch(v){p=v instanceof rt?s(null,c,e,v.payload,v.meta):s(v,c,e)}finally{h&&u.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&s.match(p)&&p.meta.condition||o(p),p}();return Object.assign(p,{abort:f,requestId:c,arg:e,unwrap:()=>p.then(at)})}}),{pending:i,rejected:s,fulfilled:r,settled:tt(s,r),typePrefix:e})}return e.withTypes=()=>e,e})();function at(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var lt=Symbol.for("rtk-slice-createasyncthunk");function ct(e,t){return"".concat(e,"/").concat(t)}function ut(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return i.unwrapped=e,i}var ht=function(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[lt];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Et(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Et(12));if(n in o.sliceCaseReducersByType)throw new Error(Et(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Ze(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=Ze(t);if(function(e){return"function"===typeof e}(e))n=()=>Qe(e());else{const t=Qe(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(M(e)){const r=n(e,t);return void 0===r?e:r}if(L(e))return we(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Et(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:ct(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Et(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?Ke(s,i):Ke(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Et(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:c,settled:u,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||dt,pending:l||dt,rejected:c||dt,settled:u||dt})}(o,s,a,n)}));const c=e=>e,u=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=We(u,n,{insert:()=>new WeakMap});return We(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=ut(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...g,...p(i,!0)}}};return g}}();function dt(){}var ft="listener",pt="completed",gt="cancelled",mt=("task-".concat(gt),"task-".concat(pt),"".concat(ft,"-").concat(gt),"".concat(ft,"-").concat(pt),(e,t)=>{if("function"!==typeof e)throw new Error(Et(32))});var{assign:yt}=Object,vt="listenerMiddleware",wt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Ke(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Et(21));return mt(s),{predicate:i,type:t,effect:s}},bt=Object.assign((e=>{const{type:t,predicate:n,effect:r}=wt(e);return{id:$e(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Et(22))}}}),{withTypes:()=>bt}),_t=Object.assign(Ke("".concat(vt,"/add")),{withTypes:()=>_t}),St=(Ke("".concat(vt,"/removeAll")),Object.assign(Ke("".concat(vt,"/remove")),{withTypes:()=>St}));Symbol.for("rtk-state-proxy-original");function Et(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const It=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(It(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new xt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kt=function(e){return function(e){const t=It(e);return Tt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ct=function(e){try{return Tt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function At(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=At(e[n],t[n]));return e}const Nt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Dt=()=>{try{return Nt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCPYZS7BZ56en6ijZcmOyg28BhWJ-GOkYw",REACT_APP_FIREBASE_AUTH_DOMAIN:"train-to-cloud-city-5.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"train-to-cloud-city-5",REACT_APP_FIREBASE_STORAGE_BUCKET:"train-to-cloud-city-5.appspot.com",REACT_APP_FIREBASE_MSG_SENDER_ID:"1016980810684",REACT_APP_FIREBASE_APP_ID:"1:1016980810684:web:c70a094fff44ef39ca19b9",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-TN9ZESGEWG"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ct(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Pt=()=>{var e;return null===(e=Dt())||void 0===e?void 0:e.config};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Rt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Mt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Lt(){return!function(){var e;const t=null===(e=Dt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ft(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Vt(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function jt(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class zt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bt.prototype.create)}}class Bt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ut,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new zt(n,s,t)}}const Ut=/\{\$([^}]+)}/g;function qt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Gt(n)&&Gt(s)){if(!Kt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gt(e){return null!==e&&"object"===typeof e}function Qt(e,t){const n=new Wt(e,t);return n.subscribe.bind(n)}class Wt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ht),void 0===r.error&&(r.error=Ht),void 0===r.complete&&(r.complete=Ht);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ht(){}const Yt=1e3,Xt=2,Jt=144e5,Zt=.5;function $t(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xt;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt)*Math.pow(t,e),r=Math.round(Zt*n*(Math.random()-.5)*2);return Math.min(Jt,n+r)}function en(e){return e&&e._delegate?e._delegate:e}class tn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const nn="[DEFAULT]";class rn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ot;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:nn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===nn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.component?this.component.multipleInstances?e:nn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class sn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const on=[];var an;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(an||(an={}));const ln={debug:an.DEBUG,verbose:an.VERBOSE,info:an.INFO,warn:an.WARN,error:an.ERROR,silent:an.SILENT},cn=an.INFO,un={[an.DEBUG]:"log",[an.VERBOSE]:"log",[an.INFO]:"info",[an.WARN]:"warn",[an.ERROR]:"error"},hn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=un[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class dn{constructor(e){this.name=e,this._logLevel=cn,this._logHandler=hn,this._userLogHandler=null,on.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in an))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ln[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,an.DEBUG,...t),this._logHandler(this,an.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,an.VERBOSE,...t),this._logHandler(this,an.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,an.INFO,...t),this._logHandler(this,an.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,an.WARN,...t),this._logHandler(this,an.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,an.ERROR,...t),this._logHandler(this,an.ERROR,...t)}}const fn=(e,t)=>t.some((t=>e instanceof t));let pn,gn;const mn=new WeakMap,yn=new WeakMap,vn=new WeakMap,wn=new WeakMap,bn=new WeakMap;let _n={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return yn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return In(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gn||(gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tn(this),n),In(mn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return In(e.apply(Tn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Tn(this),t,...r);return vn.set(s,t.sort?t.sort():[t]),In(s)}}function En(e){return"function"===typeof e?Sn(e):(e instanceof IDBTransaction&&function(e){if(yn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));yn.set(e,t)}(e),fn(e,pn||(pn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,_n):e)}function In(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(In(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&mn.set(t,e)})).catch((()=>{})),bn.set(t,e),t}(e);if(wn.has(e))return wn.get(e);const t=En(e);return t!==e&&(wn.set(e,t),bn.set(t,e)),t}const Tn=e=>bn.get(e);function xn(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=In(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(In(o.result),e.oldVersion,e.newVersion,In(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const kn=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],An=new Map;function Nn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(An.get(t))return An.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Cn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!kn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return An.set(t,s),s}_n=(e=>({...e,get:(t,n,r)=>Nn(t,n)||e.get(t,n,r),has:(t,n)=>!!Nn(t,n)||e.has(t,n)}))(_n);class Dn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Pn="@firebase/app",On="0.9.28",Rn=new dn("@firebase/app"),Mn="[DEFAULT]",Ln={[Pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fn=new Map,Vn=new Map;function jn(e,t){try{e.container.addComponent(t)}catch(n){Rn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function zn(e,t){e.container.addOrOverwriteComponent(t)}function Bn(e){const t=e.name;if(Vn.has(t))return Rn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Vn.set(t,e);for(const n of Fn.values())jn(n,e);return!0}function Un(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mn;Un(e,t).clearInstance(n)}function Kn(){Vn.clear()}const Gn=new Bt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const Wn="10.8.1";function Hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Mn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(n||(n=Pt()),!n)throw Gn.create("no-options");const s=Fn.get(i);if(s){if(Kt(n,s.options)&&Kt(r,s.config))return s;throw Gn.create("duplicate-app",{appName:i})}const o=new sn(i);for(const l of Vn.values())o.addComponent(l);const a=new Qn(n,r,o);return Fn.set(i,a),a}function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn;const t=Fn.get(e);if(!t&&e===Mn&&Pt())return Hn();if(!t)throw Gn.create("no-app",{appName:e});return t}function Xn(){return Array.from(Fn.values())}async function Jn(e){const t=e.name;Fn.has(t)&&(Fn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zn(e,t,n){var r;let i=null!==(r=Ln[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Rn.warn(e.join(" "))}Bn(new tn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function $n(e,t){if(null!==e&&"function"!==typeof e)throw Gn.create("invalid-log-argument");!function(e,t){for(const n of on){let r=null;t&&t.level&&(r=ln[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:an[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function er(e){var t;t=e,on.forEach((e=>{e.setLogLevel(t)}))}const tr="firebase-heartbeat-database",nr=1,rr="firebase-heartbeat-store";let ir=null;function sr(){return ir||(ir=xn(tr,nr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(rr)}catch(n){console.warn(n)}}}).catch((e=>{throw Gn.create("idb-open",{originalErrorMessage:e.message})}))),ir}async function or(e,t){try{const n=(await sr()).transaction(rr,"readwrite"),r=n.objectStore(rr);await r.put(t,ar(e)),await n.done}catch(n){if(n instanceof zt)Rn.warn(n.message);else{const e=Gn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Rn.warn(e.message)}}}function ar(e){return"".concat(e.name,"!").concat(e.options.appId)}class lr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ur(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cr();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=cr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),hr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=kt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function cr(){return(new Date).toISOString().substring(0,10)}class ur{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ft()&&Vt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await sr()).transaction(rr),n=await t.objectStore(rr).get(ar(e));return await t.done,n}catch(t){if(t instanceof zt)Rn.warn(t.message);else{const e=Gn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Rn.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return or(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return or(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function hr(e){return kt(JSON.stringify({version:2,heartbeats:e})).length}var dr;dr="",Bn(new tn("platform-logger",(e=>new Dn(e)),"PRIVATE")),Bn(new tn("heartbeat",(e=>new lr(e)),"PRIVATE")),Zn(Pn,On,dr),Zn(Pn,On,"esm2017"),Zn("fire-js","");class fr{constructor(e,t){this._delegate=e,this.firebase=t,jn(e,new tn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Jn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){jn(this._delegate,e)}_addOrOverwriteComponent(e){zn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pr=new Bt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const gr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(qt(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Zn,setLogLevel:er,onLog:$n,apps:null,SDK_VERSION:Wn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Bn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw pr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&At(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!qt(n,e=e||Mn))throw pr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(fr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){At(n,e)},createSubscribe:Qt,ErrorFactory:Bt,deepExtend:At}),n}(),mr=new dn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){mr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&mr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yr=gr;!function(e){Zn("@firebase/app-compat","0.2.28",e)}();yr.registerVersion("firebase","10.8.1","app-compat");const vr="@firebase/installations",wr="0.6.5",br=1e4,_r="w:".concat(wr),Sr="FIS_v2",Er="https://firebaseinstallations.googleapis.com/v1",Ir=36e5,Tr=new Bt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xr(e){return e instanceof zt&&e.code.includes("request-failed")}function kr(e){let{projectId:t}=e;return"".concat(Er,"/projects/").concat(t,"/installations")}function Cr(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ar(e,t){const n=(await t.json()).error;return Tr.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Nr(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Dr(e,t){let{refreshToken:n}=t;const r=Nr(e);return r.append("Authorization",function(e){return"".concat(Sr," ").concat(e)}(n)),r}async function Pr(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Or(e){return new Promise((t=>{setTimeout(t,e)}))}const Rr=/^[cdef][\w-]{21}$/,Mr="";function Lr(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Rr.test(t)?t:Mr}catch(e){return Mr}}function Fr(e){return"".concat(e.appName,"!").concat(e.appId)}const Vr=new Map;function jr(e,t){const n=Fr(e);zr(n,t),function(e,t){const n=Ur();n&&n.postMessage({key:e,fid:t});qr()}(n,t)}function zr(e,t){const n=Vr.get(e);if(n)for(const r of n)r(t)}let Br=null;function Ur(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=e=>{zr(e.data.key,e.data.fid)}),Br}function qr(){0===Vr.size&&Br&&(Br.close(),Br=null)}const Kr="firebase-installations-database",Gr=1,Qr="firebase-installations-store";let Wr=null;function Hr(){return Wr||(Wr=xn(Kr,Gr,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Qr)}})),Wr}async function Yr(e,t){const n=Fr(e),r=(await Hr()).transaction(Qr,"readwrite"),i=r.objectStore(Qr),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||jr(e,t.fid),t}async function Xr(e){const t=Fr(e),n=(await Hr()).transaction(Qr,"readwrite");await n.objectStore(Qr).delete(t),await n.done}async function Jr(e,t){const n=Fr(e),r=(await Hr()).transaction(Qr,"readwrite"),i=r.objectStore(Qr),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||jr(e,o.fid),o}async function Zr(e){let t;const n=await Jr(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Lr(),registrationStatus:0};return ti(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Tr.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=kr(n),o=Nr(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:Sr,appId:n.appId,sdkVersion:_r},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await Pr((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Cr(e.authToken)}}throw await Ar("Create Installation",u)}(e,t);return Yr(e.appConfig,n)}catch(n){throw xr(n)&&409===n.customData.serverCode?await Xr(e.appConfig):await Yr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:$r(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===Mr?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function $r(e){let t=await ei(e.appConfig);for(;1===t.registrationStatus;)await Or(100),t=await ei(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Zr(e);return n||t}return t}function ei(e){return Jr(e,(e=>{if(!e)throw Tr.create("installation-not-found");return ti(e)}))}function ti(e){return 1===(t=e).registrationStatus&&t.registrationTime+br<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ni(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(kr(e),"/").concat(n,"/authTokens:generate")}(n,t),s=Dr(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:_r,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await Pr((()=>fetch(i,l)));if(c.ok){return Cr(await c.json())}throw await Ar("Generate Auth Token",c)}async function ri(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Jr(e.appConfig,(r=>{if(!si(r))throw Tr.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ir}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ii(e.appConfig);for(;1===n.authToken.requestStatus;)await Or(100),n=await ii(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ri(e,t):r}(e,n),r;{if(!navigator.onLine)throw Tr.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await ni(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Yr(e.appConfig,r),n}catch(n){if(!xr(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Yr(e.appConfig,n)}else await Xr(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function ii(e){return Jr(e,(e=>{if(!si(e))throw Tr.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+br<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function si(e){return void 0!==e&&2===e.registrationStatus}async function oi(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Zr(e);t&&await t}(n);return(await ri(n,t)).token}function ai(e){return Tr.create("missing-app-config-values",{valueName:e})}const li="installations",ci=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ai("App Configuration");if(!e.name)throw ai("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ai(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Un(t,"heartbeat"),_delete:()=>Promise.resolve()}},ui=e=>{const t=Un(e.getProvider("app").getImmediate(),li).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Zr(t);return r?r.catch(console.error):ri(t).catch(console.error),n.fid}(t),getToken:e=>oi(t,e)}};Bn(new tn(li,ci,"PUBLIC")),Bn(new tn("installations-internal",ui,"PRIVATE")),Zn(vr,wr),Zn(vr,wr,"esm2017");const hi="analytics",di="firebase_id",fi="origin",pi=6e4,gi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mi="https://www.googletagmanager.com/gtag/js",yi=new dn("@firebase/analytics"),vi=new Bt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wi(e){if(!e.startsWith(mi)){const t=vi.create("invalid-gtag-resource",{gtagURL:e});return yi.warn(t.message),""}return e}function bi(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function _i(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:wi}),r=document.createElement("script"),i="".concat(mi,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Si(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await bi(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){yi.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await bi(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){yi.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=o;e("consent","update",t)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){yi.error(l)}}}const Ei=30;const Ii=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ti(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw vi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw vi.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ci;return setTimeout((async()=>{a.abort()}),void 0!==n?n:pi),ki({appId:r,apiKey:i,measurementId:s},o,a,t)}async function ki(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ii;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(vi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return yi.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:a,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ti(r)},s=gi.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw vi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(c){const t=c;if(!function(e){if(!(e instanceof zt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return yi.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:l};throw c}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?$t(i,s.intervalMillis,Ei):$t(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,u),yi.debug("Calling attemptFetch again in ".concat(r," millis")),ki(e,u,n,s)}}class Ci{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ai,Ni;function Di(e){Ni=e}function Pi(e){Ai=e}async function Oi(e,t,n,r,i,s,o){var a;const l=xi(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&yi.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>yi.error(e))),t.push(l);const c=async function(){if(!Ft())return yi.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Vt()}catch(e){return yi.warn(vi.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(mi)&&n.src.includes(e))return n;return null})(s)||_i(s,u.measurementId),Ni&&(i("consent","default",Ni),Di(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[fi]="firebase",d.update=!0,null!=h&&(d[di]=h),i("config",u.measurementId,d),Ai&&(i("set",Ai),Pi(void 0)),u.measurementId}class Ri{constructor(e){this.app=e}_delete(){return delete Mi[this.app.options.appId],Promise.resolve()}}let Mi={},Li=[];const Fi={};let Vi,ji,zi="dataLayer",Bi="gtag",Ui=!1;function qi(e){if(Ui)throw vi.create("already-initialized");e.dataLayerName&&(zi=e.dataLayerName),e.gtagName&&(Bi=e.gtagName)}function Ki(e,t,n){!function(){const e=[];if(Mt()&&e.push("This is a browser extension environment."),jt()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=vi.create("invalid-analytics-context",{errorInfo:t});yi.warn(n.message)}}();const r=e.options.appId;if(!r)throw vi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw vi.create("no-api-key");yi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Mi[r])throw vi.create("already-exists",{id:r});if(!Ui){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(zi);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Si(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Mi,Li,Fi,zi,Bi);ji=e,Vi=t,Ui=!0}Mi[r]=Oi(e,Li,Fi,t,Vi,zi,n);return new Ri(e)}async function Gi(){if(Mt())return!1;if(!jt())return!1;if(!Ft())return!1;try{return await Vt()}catch(e){return!1}}function Qi(e,t,n){e=en(e),async function(e,t,n,r){if(r&&r.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}(ji,Mi[e.app.options.appId],t,n).catch((e=>yi.error(e)))}function Wi(e,t,n){e=en(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(ji,Mi[e.app.options.appId],t,n).catch((e=>yi.error(e)))}function Hi(e,t,n){e=en(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(ji,Mi[e.app.options.appId],t,n).catch((e=>yi.error(e)))}function Yi(e,t){e=en(e),async function(e,t){const n=await e;window["ga-disable-".concat(n)]=!t}(Mi[e.app.options.appId],t).catch((e=>yi.error(e)))}function Xi(e,t,n,r){e=en(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(ji,Mi[e.app.options.appId],t,n,r).catch((e=>yi.error(e)))}const Ji="@firebase/analytics",Zi="0.10.1";Bn(new tn(hi,((e,t)=>{let{options:n}=t;return Ki(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Bn(new tn("analytics-internal",(function(e){try{const t=e.getProvider(hi).getImmediate();return{logEvent:(e,n,r)=>Xi(t,e,n,r)}}catch(t){throw vi.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Zn(Ji,Zi),Zn(Ji,Zi,"esm2017");class $i{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,n){Xi(this._delegate,e,t,n)}setCurrentScreen(e,t){Qi(this._delegate,e,t)}setUserId(e,t){Wi(this._delegate,e,t)}setUserProperties(e,t){Hi(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){Yi(this._delegate,e)}}var es;!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(es||(es={}));const ts=e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new $i(t,n)};!function(){const e={Analytics:$i,settings:qi,isSupported:Gi,EventName:es};yr.INTERNAL.registerComponent(new tn("analytics-compat",ts,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),yr.registerVersion("@firebase/analytics-compat","0.2.7");var ns,rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},is={},ss=ss||{},os=rs||self;function as(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ls(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var cs="closure_uid_"+(1e9*Math.random()>>>0),us=0;function hs(e,t,n){return e.call.apply(e.bind,arguments)}function ds(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fs(e,t,n){return(fs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hs:ds).apply(null,arguments)}function ps(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ms(){this.s=this.s,this.o=this.o}ms.prototype.s=!1,ms.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,cs)&&e[cs]||(e[cs]=++us))},ms.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ys=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function vs(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ws(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(as(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function bs(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bs.prototype.h=function(){this.defaultPrevented=!0};var _s=function(){if(!os.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};os.addEventListener("test",e,t),os.removeEventListener("test",e,t)}catch(n){}return e}();function Ss(e){return/^[\s\xa0]*$/.test(e)}function Es(){var e=os.navigator;return e&&(e=e.userAgent)?e:""}function Is(e){return-1!=Es().indexOf(e)}function Ts(e){return Ts[" "](e),e}Ts[" "]=function(){};var xs,ks,Cs=Is("Opera"),As=Is("Trident")||Is("MSIE"),Ns=Is("Edge"),Ds=Ns||As,Ps=Is("Gecko")&&!(-1!=Es().toLowerCase().indexOf("webkit")&&!Is("Edge"))&&!(Is("Trident")||Is("MSIE"))&&!Is("Edge"),Os=-1!=Es().toLowerCase().indexOf("webkit")&&!Is("Edge");function Rs(){var e=os.document;return e?e.documentMode:void 0}e:{var Ms="",Ls=function(){var e=Es();return Ps?/rv:([^\);]+)(\)|;)/.exec(e):Ns?/Edge\/([\d\.]+)/.exec(e):As?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Os?/WebKit\/(\S+)/.exec(e):Cs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ls&&(Ms=Ls?Ls[1]:""),As){var Fs=Rs();if(null!=Fs&&Fs>parseFloat(Ms)){xs=String(Fs);break e}}xs=Ms}if(os.document&&As){var Vs=Rs();ks=Vs||(parseInt(xs,10)||void 0)}else ks=void 0;var js=ks;function zs(e,t){if(bs.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ps){e:{try{Ts(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Bs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zs.$.h.call(this)}}gs(zs,bs);var Bs={2:"touch",3:"pen",4:"mouse"};zs.prototype.h=function(){zs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Us="closure_listenable_"+(1e6*Math.random()|0),qs=0;function Ks(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++qs,this.fa=this.ia=!1}function Gs(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qs(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ws(e){const t={};for(const n in e)t[n]=e[n];return t}const Hs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ys(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Hs.length;t++)n=Hs[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Xs(e){this.src=e,this.g={},this.h=0}function Js(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ys(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Gs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Xs.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Zs(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ks(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var $s="closure_lm_"+(1e6*Math.random()|0),eo={};function to(e,t,n,r,i){if(r&&r.once)return ro(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)to(e,t[s],n,r,i);return null}return n=uo(n),e&&e[Us]?e.O(t,n,ls(r)?!!r.capture:!!r,i):no(e,t,n,!1,r,i)}function no(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ls(i)?!!i.capture:!!i,a=lo(e);if(a||(e[$s]=a=new Xs(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ao;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_s||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ro(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ro(e,t[s],n,r,i);return null}return n=uo(n),e&&e[Us]?e.P(t,n,ls(r)?!!r.capture:!!r,i):no(e,t,n,!0,r,i)}function io(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)io(e,t[s],n,r,i);else r=ls(r)?!!r.capture:!!r,n=uo(n),e&&e[Us]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zs(s=e.g[t],n,r,i))&&(Gs(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=lo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zs(t,n,r,i)),(n=-1<e?t[e]:null)&&so(n))}function so(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Us])Js(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lo(t))?(Js(n,e),0==n.h&&(n.src=null,t[$s]=null)):Gs(e)}}}function oo(e){return e in eo?eo[e]:eo[e]="on"+e}function ao(e,t){if(e.fa)e=!0;else{t=new zs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&so(e),e=n.call(r,t)}return e}function lo(e){return(e=e[$s])instanceof Xs?e:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function uo(e){return"function"===typeof e?e:(e[co]||(e[co]=function(t){return e.handleEvent(t)}),e[co])}function ho(){ms.call(this),this.i=new Xs(this),this.S=this,this.J=null}function fo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new bs(t,e);else if(t instanceof bs)t.target=t.target||e;else{var i=t;Ys(t=new bs(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=po(o,r,!0,t)&&i}if(i=po(o=t.g=e,r,!0,t)&&i,i=po(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=po(o=t.g=n[s],r,!1,t)&&i}function po(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Js(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}gs(ho,ms),ho.prototype[Us]=!0,ho.prototype.removeEventListener=function(e,t,n,r){io(this,e,t,n,r)},ho.prototype.N=function(){if(ho.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gs(n[r]);delete t.g[e],t.h--}}this.J=null},ho.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ho.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var go=os.JSON.stringify;function mo(){var e=Eo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var yo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new vo),(e=>e.reset()));class vo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wo(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function bo(e){os.setTimeout((()=>{throw e}),0)}let _o,So=!1,Eo=new class{constructor(){this.h=this.g=null}add(e,t){const n=yo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Io=()=>{const e=os.Promise.resolve(void 0);_o=()=>{e.then(To)}};var To=()=>{for(var e;e=mo();){try{e.h.call(e.g)}catch(n){bo(n)}var t=yo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}So=!1};function xo(e,t){ho.call(this),this.h=e||1,this.g=t||os,this.j=fs(this.qb,this),this.l=Date.now()}function ko(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Co(e,t,n){if("function"===typeof e)n&&(e=fs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fs(e.handleEvent,e)}return 2147483647<Number(t)?-1:os.setTimeout(e,t||0)}function Ao(e){e.g=Co((()=>{e.g=null,e.i&&(e.i=!1,Ao(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}gs(xo,ho),(ns=xo.prototype).ga=!1,ns.T=null,ns.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fo(this,"tick"),this.ga&&(ko(this),this.start()))}},ns.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ns.N=function(){xo.$.N.call(this),ko(this),delete this.g};class No extends ms{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ao(this)}N(){super.N(),this.g&&(os.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(e){ms.call(this),this.h=e,this.g={}}gs(Do,ms);var Po=[];function Oo(e,t,n,r){Array.isArray(n)||(n&&(Po[0]=n.toString()),n=Po);for(var i=0;i<n.length;i++){var s=to(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ro(e){Qs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&so(e)}),e),e.g={}}function Mo(){this.g=!0}function Lo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return go(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Do.prototype.N=function(){Do.$.N.call(this),Ro(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mo.prototype.Ea=function(){this.g=!1},Mo.prototype.info=function(){};var Fo={},Vo=null;function jo(){return Vo=Vo||new ho}function zo(e){bs.call(this,Fo.Ta,e)}function Bo(e){const t=jo();fo(t,new zo(t))}function Uo(e,t){bs.call(this,Fo.STAT_EVENT,e),this.stat=t}function qo(e){const t=jo();fo(t,new Uo(t,e))}function Ko(e,t){bs.call(this,Fo.Ua,e),this.size=t}function Go(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return os.setTimeout((function(){e()}),t)}Fo.Ta="serverreachability",gs(zo,bs),Fo.STAT_EVENT="statevent",gs(Uo,bs),Fo.Ua="timingevent",gs(Ko,bs);var Qo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Wo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ho(){}function Yo(e){return e.h||(e.h=e.i())}function Xo(){}Ho.prototype.h=null;var Jo,Zo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $o(){bs.call(this,"d")}function ea(){bs.call(this,"c")}function ta(){}function na(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Do(this),this.P=ia,e=Ds?125:void 0,this.V=new xo(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ra}function ra(){this.i=null,this.g="",this.h=!1}gs($o,bs),gs(ea,bs),gs(ta,Ho),ta.prototype.g=function(){return new XMLHttpRequest},ta.prototype.i=function(){return{}},Jo=new ta;var ia=45e3,sa={},oa={};function aa(e,t,n){e.L=1,e.A=xa(_a(t)),e.u=n,e.S=!0,la(e,null)}function la(e,t){e.G=Date.now(),da(e),e.B=_a(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),ja(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ra,e.g=zl(e.l,n?t:null,!e.u),0<e.O&&(e.M=new No(fs(e.Pa,e,e.g),e.O)),Oo(e.U,e.g,"readystatechange",e.nb),t=e.I?Ws(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Bo(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ca(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ua(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ha(e,n),r==oa){4==t&&(e.s=4,qo(14),i=!1),Lo(e.j,e.m,null,"[Incomplete Response]");break}if(r==sa){e.s=4,qo(15),Lo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Lo(e.j,e.m,r,null),ya(e,r)}ca(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,qo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pl(t),t.M=!0,qo(11))):(Lo(e.j,e.m,n,"[Invalid Chunked Response]"),ma(e),ga(e))}function ha(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?oa:(n=Number(t.substring(n,r)),isNaN(n)?sa:(r+=1)+n>t.length?oa:(t=t.slice(r,r+n),e.o=r+n,t))}function da(e){e.Y=Date.now()+e.P,fa(e,e.P)}function fa(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Go(fs(e.lb,e),t)}function pa(e){e.C&&(os.clearTimeout(e.C),e.C=null)}function ga(e){0==e.l.H||e.J||Ml(e.l,e)}function ma(e){pa(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ko(e.V),Ro(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ya(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Qa(n.i,e)))if(!e.K&&Qa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Rl(n),Il(n)}Dl(n),qo(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Go(fs(n.ib,n),6e3));if(1>=Ga(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Fl(n,11)}else if((e.K||n.g==e)&&Rl(n),!Ss(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Wa(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ta(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=jl(r,r.J?r.pa:null,r.Y),o.K){Ha(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(pa(a),da(a)),r.g=o}else Nl(r);0<n.j.length&&xl(n)}else"stop"!=c[0]&&"close"!=c[0]||Fl(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Fl(n,7):El(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Bo()}catch(c){}}function va(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(as(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(as(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(as(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ns=na.prototype).setTimeout=function(e){this.P=e},ns.nb=function(e){e=e.target;const t=this.M;t&&3==yl(e)?t.l():this.Pa(e)},ns.Pa=function(e){try{if(e==this.g)e:{const u=yl(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ds||this.g&&(this.h.h||this.g.ja()||vl(this.g)))){this.J||4!=u||7==t||Bo(),pa(this);var n=this.g.da();this.ca=n;t:if(ca(this)){var r=vl(this.g);e="";var i=r.length,s=4==yl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ma(this),ga(this);var o="";break t}this.h.i=new os.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ss(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,qo(12),ma(this),ga(this);break e}Lo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,n)}this.S?(ua(this,u,o),Ds&&this.i&&3==u&&(Oo(this.U,this.V,"tick",this.mb),this.V.start())):(Lo(this.j,this.m,o,null),ya(this,o)),4==u&&ma(this),this.i&&!this.J&&(4==u?Ml(this.l,this):(this.i=!1,da(this)))}else(function(e){const t={};e=(e.g&&2<=yl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ss(e[r]))continue;var n=wo(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,qo(12)):(this.s=0,qo(13)),ma(this),ga(this)}}}catch(u){}},ns.mb=function(){if(this.g){var e=yl(this.g),t=this.g.ja();this.o<t.length&&(pa(this),ua(this,e,t),this.i&&4!=e&&da(this))}},ns.cancel=function(){this.J=!0,ma(this)},ns.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Bo(),qo(17)),ma(this),this.s=2,ga(this)):fa(this,this.Y-e)};var wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ba){this.h=e.h,Sa(this,e.j),this.s=e.s,this.g=e.g,Ea(this,e.m),this.l=e.l;var t=e.i,n=new Ma;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ia(this,n),this.o=e.o}else e&&(t=String(e).match(wa))?(this.h=!1,Sa(this,t[1]||"",!0),this.s=ka(t[2]||""),this.g=ka(t[3]||"",!0),Ea(this,t[4]),this.l=ka(t[5]||"",!0),Ia(this,t[6]||"",!0),this.o=ka(t[7]||"")):(this.h=!1,this.i=new Ma(null,this.h))}function _a(e){return new ba(e)}function Sa(e,t,n){e.j=n?ka(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ea(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ia(e,t,n){t instanceof Ma?(e.i=t,function(e,t){t&&!e.j&&(La(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fa(this,t),ja(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ca(t,Oa)),e.i=new Ma(t,e.h))}function Ta(e,t,n){e.i.set(t,n)}function xa(e){return Ta(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ka(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ca(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Aa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Aa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ba.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ca(t,Na,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ca(t,Na,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ca(n,"/"==n.charAt(0)?Pa:Da,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ca(n,Ra)),e.join("")};var Na=/[#\/\?@]/g,Da=/[#\?:]/g,Pa=/[#\?]/g,Oa=/[#\?@]/g,Ra=/#/g;function Ma(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function La(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fa(e,t){La(e),t=za(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Va(e,t){return La(e),t=za(e,t),e.g.has(t)}function ja(e,t,n){Fa(e,t),0<n.length&&(e.i=null,e.g.set(za(e,t),vs(n)),e.h+=n.length)}function za(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ns=Ma.prototype).add=function(e,t){La(this),this.i=null,e=za(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ns.forEach=function(e,t){La(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ns.ta=function(){La(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ns.Z=function(e){La(this);let t=[];if("string"===typeof e)Va(this,e)&&(t=t.concat(this.g.get(za(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ns.set=function(e,t){return La(this),this.i=null,Va(this,e=za(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ns.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ns.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ba=class{constructor(e,t){this.g=e,this.map=t}};function Ua(e){this.l=e||qa,os.PerformanceNavigationTiming?e=0<(e=os.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(os.g&&os.g.Ka&&os.g.Ka()&&os.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qa=10;function Ka(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ga(e){return e.h?1:e.g?e.g.size:0}function Qa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Wa(e,t){e.g?e.g.add(t):e.h=t}function Ha(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ya(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return vs(e.i)}Ua.prototype.cancel=function(){if(this.i=Ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xa,Ja=class{stringify(e){return os.JSON.stringify(e,void 0)}parse(e){return os.JSON.parse(e,void 0)}};function Za(){this.g=new Ja}function $a(e,t,n){const r=n||"";try{va(e,(function(e,n){let i=e;ls(e)&&(i=go(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function el(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function tl(e){this.l=e.ec||null,this.j=e.ob||!1}function nl(e,t){ho.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=rl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gs(tl,Ho),tl.prototype.g=function(){return new nl(this.l,this.j)},tl.prototype.i=(Xa={},function(){return Xa}),gs(nl,ho);var rl=0;function il(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function sl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ol(e)}function ol(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ns=nl.prototype).open=function(e,t){if(this.readyState!=rl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ol(this)},ns.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||os).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ns.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sl(this)),this.readyState=rl},ns.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof os.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;il(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ns.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?sl(this):ol(this),3==this.readyState&&il(this)}},ns.Za=function(e){this.g&&(this.response=this.responseText=e,sl(this))},ns.Ya=function(e){this.g&&(this.response=e,sl(this))},ns.ka=function(){this.g&&sl(this)},ns.setRequestHeader=function(e,t){this.v.append(e,t)},ns.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ns.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var al=os.JSON.parse;function ll(e){ho.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cl,this.L=this.M=!1}gs(ll,ho);var cl="",ul=/^https?$/i,hl=["POST","PUT"];function dl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fl(e),gl(e)}function fl(e){e.F||(e.F=!0,fo(e,"complete"),fo(e,"error"))}function pl(e){if(e.h&&"undefined"!=typeof ss&&(!e.C[1]||4!=yl(e)||2!=e.da()))if(e.v&&4==yl(e))Co(e.La,0,e);else if(fo(e,"readystatechange"),4==yl(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(wa)[1]||null;!i&&os.self&&os.self.location&&(i=os.self.location.protocol.slice(0,-1)),r=!ul.test(i?i.toLowerCase():"")}n=r}if(n)fo(e,"complete"),fo(e,"success");else{e.m=6;try{var s=2<yl(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",fl(e)}}finally{gl(e)}}}function gl(e,t){if(e.g){ml(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||fo(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ml(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(os.clearTimeout(e.A),e.A=null)}function yl(e){return e.g?e.g.readyState:0}function vl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case cl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tc){return null}}function wl(e){let t="";return Qs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function bl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ta(e,t,n))}function _l(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sl(e){this.Ga=0,this.j=[],this.l=new Mo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_l("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_l("baseRetryDelayMs",5e3,e),this.hb=_l("retryDelaySeedMs",1e4,e),this.eb=_l("forwardChannelMaxRetries",2,e),this.xa=_l("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ua(e&&e.concurrentRequestLimit),this.Ja=new Za,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function El(e){if(Tl(e),3==e.H){var t=e.W++,n=_a(e.I);if(Ta(n,"SID",e.K),Ta(n,"RID",t),Ta(n,"TYPE","terminate"),Cl(e,n),(t=new na(e,e.l,t)).L=2,t.A=xa(_a(n)),n=!1,os.navigator&&os.navigator.sendBeacon)try{n=os.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&os.Image&&((new Image).src=t.A,n=!0),n||(t.g=zl(t.l,null),t.g.ha(t.A)),t.G=Date.now(),da(t)}Vl(e)}function Il(e){e.g&&(Pl(e),e.g.cancel(),e.g=null)}function Tl(e){Il(e),e.u&&(os.clearTimeout(e.u),e.u=null),Rl(e),e.i.cancel(),e.m&&("number"===typeof e.m&&os.clearTimeout(e.m),e.m=null)}function xl(e){if(!Ka(e.i)&&!e.m){e.m=!0;var t=e.Na;_o||Io(),So||(_o(),So=!0),Eo.add(t,e),e.C=0}}function kl(e,t){var n;n=t?t.m:e.W++;const r=_a(e.I);Ta(r,"SID",e.K),Ta(r,"RID",n),Ta(r,"AID",e.V),Cl(e,r),e.o&&e.s&&bl(r,e.o,e.s),n=new na(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Al(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Wa(e.i,n),aa(n,r,t)}function Cl(e,t){e.na&&Qs(e.na,(function(e,n){Ta(t,n,e)})),e.h&&va({},(function(e,n){Ta(t,n,e)}))}function Al(e,t,n){n=Math.min(e.j.length,n);var r=e.h?fs(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{$a(a,e,"req"+n+"_")}catch(Uu){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Nl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_o||Io(),So||(_o(),So=!0),Eo.add(t,e),e.A=0}}function Dl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Go(fs(e.Ma,e),Ll(e,e.A)),e.A++,!0)}function Pl(e){null!=e.B&&(os.clearTimeout(e.B),e.B=null)}function Ol(e){e.g=new na(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_a(e.wa);Ta(t,"RID","rpc"),Ta(t,"SID",e.K),Ta(t,"AID",e.V),Ta(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ta(t,"TO",e.qa),Ta(t,"TYPE","xmlhttp"),Cl(e,t),e.o&&e.s&&bl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=xa(_a(t)),n.u=null,n.S=!0,la(n,e)}function Rl(e){null!=e.v&&(os.clearTimeout(e.v),e.v=null)}function Ml(e,t){var n=null;if(e.g==t){Rl(e),Pl(e),e.g=null;var r=2}else{if(!Qa(e.i,t))return;n=t.F,Ha(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;fo(r=jo(),new Ko(r,n)),xl(e)}else Nl(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ga(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Go(fs(e.Na,e,t),Ll(e,e.C)),e.C++,!0))}(e,t)||2==r&&Dl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Fl(e,5);break;case 4:Fl(e,10);break;case 3:Fl(e,6);break;default:Fl(e,2)}}function Ll(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Fl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=fs(e.pb,e);n||(n=new ba("//www.google.com/images/cleardot.gif"),os.location&&"http"==os.location.protocol||Sa(n,"https"),xa(n)),function(e,t){const n=new Mo;if(os.Image){const r=new Image;r.onload=ps(el,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ps(el,n,r,"TestLoadImage: error",!1,t),r.onabort=ps(el,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ps(el,n,r,"TestLoadImage: timeout",!1,t),os.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qo(2);e.H=0,e.h&&e.h.za(t),Vl(e),Tl(e)}function Vl(e){if(e.H=0,e.ma=[],e.h){const t=Ya(e.i);0==t.length&&0==e.j.length||(ws(e.ma,t),ws(e.ma,e.j),e.i.i.length=0,vs(e.j),e.j.length=0),e.h.ya()}}function jl(e,t,n){var r=n instanceof ba?_a(n):new ba(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ea(r,r.m);else{var i=os.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ba(null);r&&Sa(s,r),t&&(s.g=t),i&&Ea(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Ta(r,n,t),Ta(r,"VER",e.ra),Cl(e,r),r}function zl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ll(new tl({ob:n})):new ll(e.va)).Oa(e.J),t}function Bl(){}function Ul(){if(As&&!(10<=Number(js)))throw Error("Environmental error: no available transport.")}function ql(e,t){ho.call(this),this.g=new Sl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ss(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ss(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ql(this)}function Kl(e){$o.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gl(){ea.call(this),this.status=1}function Ql(e){this.g=e}function Wl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Hl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Yl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ns=ll.prototype).Oa=function(e){this.M=e},ns.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Jo.g(),this.C=this.u?Yo(this.u):Yo(Jo),this.g.onreadystatechange=fs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void dl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=os.FormData&&e instanceof os.FormData,!(0<=ys(hl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ml(this),0<this.B&&((this.L=function(e){return As&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fs(this.ua,this)):this.A=Co(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){dl(this,s)}},ns.ua=function(){"undefined"!=typeof ss&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fo(this,"timeout"),this.abort(8))},ns.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,fo(this,"complete"),fo(this,"abort"),gl(this))},ns.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gl(this,!0)),ll.$.N.call(this)},ns.La=function(){this.s||(this.G||this.v||this.l?pl(this):this.kb())},ns.kb=function(){pl(this)},ns.isActive=function(){return!!this.g},ns.da=function(){try{return 2<yl(this)?this.g.status:-1}catch(Xa){return-1}},ns.ja=function(){try{return this.g?this.g.responseText:""}catch(Xa){return""}},ns.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),al(t)}},ns.Ia=function(){return this.m},ns.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ns=Sl.prototype).ra=8,ns.H=1,ns.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new na(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ws(s),Ys(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Al(this,i,t),Ta(n=_a(this.I),"RID",e),Ta(n,"CVER",22),this.F&&Ta(n,"X-HTTP-Session-Id",this.F),Cl(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(wl(s)))+"&"+t:this.o&&bl(n,this.o,s)),Wa(this.i,i),this.bb&&Ta(n,"TYPE","init"),this.P?(Ta(n,"$req",t),Ta(n,"SID","null"),i.aa=!0,aa(i,n,null)):aa(i,n,t),this.H=2}}else 3==this.H&&(e?kl(this,e):0==this.j.length||Ka(this.i)||kl(this))},ns.Ma=function(){if(this.u=null,Ol(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Go(fs(this.jb,this),e)}},ns.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qo(10),Il(this),Ol(this))},ns.ib=function(){null!=this.v&&(this.v=null,Il(this),Dl(this),qo(19))},ns.pb=function(e){e?(this.l.info("Successfully pinged google.com"),qo(2)):(this.l.info("Failed to ping google.com"),qo(1))},ns.isActive=function(){return!!this.h&&this.h.isActive(this)},(ns=Bl.prototype).Ba=function(){},ns.Aa=function(){},ns.za=function(){},ns.ya=function(){},ns.isActive=function(){return!0},ns.Va=function(){},Ul.prototype.g=function(e,t){return new ql(e,t)},gs(ql,ho),ql.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;qo(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=jl(e,null,e.Y),xl(e)},ql.prototype.close=function(){El(this.g)},ql.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=go(e),e=n);t.j.push(new Ba(t.fb++,e)),3==t.H&&xl(t)},ql.prototype.N=function(){this.g.h=null,delete this.j,El(this.g),delete this.g,ql.$.N.call(this)},gs(Kl,$o),gs(Gl,ea),gs(Ql,Bl),Ql.prototype.Ba=function(){fo(this.g,"a")},Ql.prototype.Aa=function(e){fo(this.g,new Kl(e))},Ql.prototype.za=function(e){fo(this.g,new Gl)},Ql.prototype.ya=function(){fo(this.g,"b")},gs(Wl,(function(){this.blockSize=-1})),Wl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Hl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Hl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Hl(this,r),i=0;break}}this.h=i,this.i+=t},Wl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Xl={};function Jl(e){return-128<=e&&128>e?function(e,t){var n=Xl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Yl([0|e],0>e?-1:0)})):new Yl([0|e],0>e?-1:0)}function Zl(e){if(isNaN(e)||!isFinite(e))return ec;if(0>e)return sc(Zl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=$l;return new Yl(t,0)}var $l=4294967296,ec=Jl(0),tc=Jl(1),nc=Jl(16777216);function rc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ic(e){return-1==e.h}function sc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Yl(n,~e.h).add(tc)}function oc(e,t){return e.add(sc(t))}function ac(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function lc(e,t){this.g=e,this.h=t}function cc(e,t){if(rc(t))throw Error("division by zero");if(rc(e))return new lc(ec,ec);if(ic(e))return t=cc(sc(e),t),new lc(sc(t.g),sc(t.h));if(ic(t))return t=cc(e,sc(t)),new lc(sc(t.g),t.h);if(30<e.g.length){if(ic(e)||ic(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tc,r=t;0>=r.X(e);)n=uc(n),r=uc(r);var i=hc(n,1),s=hc(r,1);for(r=hc(r,2),n=hc(n,2);!rc(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=hc(r,1),n=hc(n,1)}return t=oc(e,i.R(t)),new lc(i,t)}for(i=ec;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Zl(n)).R(t);ic(o)||0<o.X(e);)o=(s=Zl(n-=r)).R(t);rc(s)&&(s=tc),i=i.add(s),e=oc(e,o)}return new lc(i,e)}function uc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Yl(n,e.h)}function hc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Yl(i,e.h)}(ns=Yl.prototype).ea=function(){if(ic(this))return-sc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:$l+r)*t,t*=$l}return e},ns.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rc(this))return"0";if(ic(this))return"-"+sc(this).toString(e);for(var t=Zl(Math.pow(e,6)),n=this,r="";;){var i=cc(n,t).g,s=((0<(n=oc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(rc(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ns.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ns.X=function(e){return ic(e=oc(this,e))?-1:rc(e)?0:1},ns.abs=function(){return ic(this)?sc(this):this},ns.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Yl(n,-2147483648&n[n.length-1]?-1:0)},ns.R=function(e){if(rc(this)||rc(e))return ec;if(ic(this))return ic(e)?sc(this).R(sc(e)):sc(sc(this).R(e));if(ic(e))return sc(this.R(sc(e)));if(0>this.X(nc)&&0>e.X(nc))return Zl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,ac(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ac(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ac(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ac(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Yl(n,0)},ns.gb=function(e){return cc(this,e).h},ns.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Yl(n,this.h&e.h)},ns.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Yl(n,this.h|e.h)},ns.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Yl(n,this.h^e.h)},Ul.prototype.createWebChannel=Ul.prototype.g,ql.prototype.send=ql.prototype.u,ql.prototype.open=ql.prototype.m,ql.prototype.close=ql.prototype.close,Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,Wo.COMPLETE="complete",Xo.EventType=Zo,Zo.OPEN="a",Zo.CLOSE="b",Zo.ERROR="c",Zo.MESSAGE="d",ho.prototype.listen=ho.prototype.O,ll.prototype.listenOnce=ll.prototype.P,ll.prototype.getLastError=ll.prototype.Sa,ll.prototype.getLastErrorCode=ll.prototype.Ia,ll.prototype.getStatus=ll.prototype.da,ll.prototype.getResponseJson=ll.prototype.Wa,ll.prototype.getResponseText=ll.prototype.ja,ll.prototype.send=ll.prototype.ha,ll.prototype.setWithCredentials=ll.prototype.Oa,Wl.prototype.digest=Wl.prototype.l,Wl.prototype.reset=Wl.prototype.reset,Wl.prototype.update=Wl.prototype.j,Yl.prototype.add=Yl.prototype.add,Yl.prototype.multiply=Yl.prototype.R,Yl.prototype.modulo=Yl.prototype.gb,Yl.prototype.compare=Yl.prototype.X,Yl.prototype.toNumber=Yl.prototype.ea,Yl.prototype.toString=Yl.prototype.toString,Yl.prototype.getBits=Yl.prototype.D,Yl.fromNumber=Zl,Yl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return sc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Zl(Math.pow(n,8)),i=ec,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Zl(Math.pow(n,o)),i=i.R(o).add(Zl(a))):i=(i=i.R(r)).add(Zl(a))}return i};var dc=is.createWebChannelTransport=function(){return new Ul},fc=is.getStatEventTarget=function(){return jo()},pc=is.ErrorCode=Qo,gc=is.EventType=Wo,mc=is.Event=Fo,yc=is.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vc=(is.FetchXmlHttpFactory=tl,is.WebChannel=Xo),wc=is.XhrIo=ll,bc=is.Md5=Wl,_c=is.Integer=Yl;const Sc="@firebase/firestore";class Ec{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ec.UNAUTHENTICATED=new Ec(null),Ec.GOOGLE_CREDENTIALS=new Ec("google-credentials-uid"),Ec.FIRST_PARTY=new Ec("first-party-uid"),Ec.MOCK_USER=new Ec("mock-user");let Ic="10.8.1";const Tc=new dn("@firebase/firestore");function xc(){return Tc.logLevel}function kc(e){if(Tc.logLevel<=an.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Tc.debug("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Cc(e){if(Tc.logLevel<=an.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Tc.error("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Ac(e){if(Tc.logLevel<=an.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Tc.warn("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Nc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ic,") INTERNAL ASSERTION FAILED: ")+e;throw Cc(t),new Error(t)}function Pc(e,t){e||Dc()}function Oc(e,t){return e}const Rc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mc extends zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Lc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Vc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ec.UNAUTHENTICATED)))}shutdown(){}}class jc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zc{constructor(e){this.t=e,this.currentUser=Ec.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Lc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{kc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(kc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(kc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pc("string"==typeof t.accessToken),new Fc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pc(null===e||"string"==typeof e),new Ec(e)}}class Bc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ec.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Uc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Bc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ec.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&kc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,kc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{kc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):kc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pc("string"==typeof e.token),this.R=e.token,new qc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Qc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Gc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Wc(e,t){return e<t?-1:e>t?1:0}function Hc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Yc(e){return e+"\0"}class Xc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mc(Rc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mc(Rc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Mc(Rc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mc(Rc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xc.fromMillis(Date.now())}static fromDate(e){return Xc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wc(this.nanoseconds,e.nanoseconds):Wc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jc(e)}static min(){return new Jc(new Xc(0,0))}static max(){return new Jc(new Xc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Dc(),void 0===n?n=e.length-t:n>e.length-t&&Dc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $c extends Zc{construct(e,t,n){return new $c(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new $c(e)}static emptyPath(){return new $c([])}}const eu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tu extends Zc{construct(e,t,n){return new tu(e,t,n)}static isValidIdentifier(e){return eu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Mc(Rc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Mc(Rc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Mc(Rc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tu(t)}static emptyPath(){return new tu([])}}class nu{constructor(e){this.path=e}static fromPath(e){return new nu($c.fromString(e))}static fromName(e){return new nu($c.fromString(e).popFirst(5))}static empty(){return new nu($c.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$c.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $c.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nu(new $c(e.slice()))}}class ru{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function iu(e){return e.fields.find((e=>2===e.kind))}function su(e){return e.fields.filter((e=>2!==e.kind))}ru.UNKNOWN_ID=-1;class ou{constructor(e,t){this.fieldPath=e,this.kind=t}}class au{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new au(0,uu.min())}}function lu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jc.fromTimestamp(1e9===r?new Xc(n+1,0):new Xc(n,r));return new uu(i,nu.empty(),t)}function cu(e){return new uu(e.readTime,e.key,-1)}class uu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new uu(Jc.min(),nu.empty(),-1)}static max(){return new uu(Jc.max(),nu.empty(),-1)}}function hu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=nu.comparator(e.documentKey,t.documentKey),0!==n?n:Wc(e.largestBatchId,t.largestBatchId))}const du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pu(e){if(e.code!==Rc.FAILED_PRECONDITION||e.message!==du)throw e;kc("LocalStore","Unexpectedly lost primary lease")}class gu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof gu?t:gu.resolve(t)}catch(e){return gu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):gu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):gu.reject(t)}static resolve(e){return new gu(((t,n)=>{t(e)}))}static reject(e){return new gu(((t,n)=>{n(e)}))}static waitFor(e){return new gu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=gu.resolve(!1);for(const n of e)t=t.next((e=>e?gu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new gu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new gu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class mu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Lc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new wu(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Iu(t.target.error);this.V.reject(new wu(e,n))}}static open(e,t,n,r){try{return new mu(t,e.transaction(r,n))}catch(e){throw new wu(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(kc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _u(t)}}class yu{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===yu.S(Rt())&&Cc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kc("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ft())return!1;if(yu.C())return!0;const e=Rt(),t=yu.S(e),n=0<t&&t<10,r=yu.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(kc("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Mc(Rc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Mc(Rc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new wu(e,r))},r.onupgradeneeded=e=>{kc("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{kc("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=mu.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),gu.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(kc("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class vu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Su(this.k.delete())}}class wu extends Mc{constructor(e,t){super(Rc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function bu(e){return"IndexedDbTransactionError"===e.name}class _u{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(kc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(kc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Su(n)}add(e){return kc("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}get(e){return Su(this.store.get(e)).next((t=>(void 0===t&&(t=null),kc("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return kc("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}count(){return kc("SimpleDb","COUNT",this.store.name),Su(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new gu(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new gu(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){kc("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new gu(((n,r)=>{t.onerror=e=>{const t=Iu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new gu(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new vu(i),o=t(i.primaryKey,i.value,s);if(o instanceof gu){const e=o.catch((e=>(s.done(),gu.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>gu.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Su(e){return new gu(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Iu(e.target.error);n(t)}}))}let Eu=!1;function Iu(e){const t=yu.S(Rt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Mc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Eu||(Eu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Tu{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){kc("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{kc("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){bu(e)?kc("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await pu(e)}await this.ee(6e4)}))}}class xu{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return gu.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return kc("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(kc("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=cu(t);hu(r,n)>0&&(n=r)})),new uu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ku{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Cu(e){return null==e}function Au(e){return 0===e&&1/e==-1/0}function Nu(e){return"number"==typeof e&&Number.isInteger(e)&&!Au(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Du(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ou(t)),t=Pu(e.get(n),t);return Ou(t)}function Pu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ou(e){return e+"\x01\x01"}function Ru(e){const t=e.length;if(Pc(t>=2),2===t)return Pc("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$c.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Dc(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Dc()}s=t+2}return new $c(r)}ku._e=-1;const Mu=["userId","batchId"];function Lu(e,t){return[e,Du(t)]}function Fu(e,t,n){return[e,Du(t),n]}const Vu={},ju=["prefixPath","collectionGroup","readTime","documentId"],zu=["prefixPath","collectionGroup","documentId"],Bu=["collectionGroup","readTime","prefixPath","documentId"],Uu=["canonicalId","targetId"],qu=["targetId","path"],Ku=["path","targetId"],Gu=["collectionId","parent"],Qu=["indexId","uid"],Wu=["uid","sequenceNumber"],Hu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yu=["indexId","uid","orderedDocumentKey"],Xu=["userId","collectionPath","documentId"],Ju=["userId","collectionPath","largestBatchId"],Zu=["userId","collectionGroup","largestBatchId"],$u=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eh=[...$u,"documentOverlays"],th=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nh=th,rh=[...nh,"indexConfiguration","indexState","indexEntries"];class ih extends fu{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function sh(e,t){const n=Oc(e);return yu.M(n.ae,t)}function oh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ah(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ch{constructor(e,t){this.comparator=e,this.root=t||hh.EMPTY}insert(e,t){return new ch(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hh.BLACK,null,null))}remove(e){return new ch(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:hh.RED,this.left=null!=r?r:hh.EMPTY,this.right=null!=i?i:hh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new hh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dc();if(this.right.isRed())throw Dc();const e=this.left.check();if(e!==this.right.check())throw Dc();return e+(this.isRed()?0:1)}}hh.EMPTY=null,hh.RED=!0,hh.BLACK=!1,hh.EMPTY=new class{constructor(){this.size=0}get key(){throw Dc()}get value(){throw Dc()}get color(){throw Dc()}get left(){throw Dc()}get right(){throw Dc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new hh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dh{constructor(e){this.comparator=e,this.data=new ch(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fh(this.data.getIterator())}getIteratorFrom(e){return new fh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof dh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dh(this.comparator);return t.data=e,t}}class fh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ph(e){return e.hasNext()?e.getNext():void 0}class gh{constructor(e){this.fields=e,e.sort(tu.comparator)}static empty(){return new gh([])}unionWith(e){let t=new dh(tu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class mh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new mh("Invalid base64 string: "+e):e}}(e);return new yh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yh.EMPTY_BYTE_STRING=new yh("");const vh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wh(e){if(Pc(!!e),"string"==typeof e){let t=0;const n=vh.exec(e);if(Pc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bh(e.seconds),nanos:bh(e.nanos)}}function bh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _h(e){return"string"==typeof e?yh.fromBase64String(e):yh.fromUint8Array(e)}function Sh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Eh(e){const t=e.mapValue.fields.__previous_value__;return Sh(t)?Eh(t):t}function Ih(e){const t=wh(e.mapValue.fields.__local_write_time__.timestampValue);return new Xc(t.seconds,t.nanos)}class Th{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class xh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}const kh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ch={nullValue:"NULL_VALUE"};function Ah(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sh(e)?4:qh(e)?9007199254740991:10:Dc()}function Nh(e,t){if(e===t)return!0;const n=Ah(e);if(n!==Ah(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ih(e).isEqual(Ih(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wh(e.timestampValue),r=wh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _h(e.bytesValue).isEqual(_h(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bh(e.geoPointValue.latitude)===bh(t.geoPointValue.latitude)&&bh(e.geoPointValue.longitude)===bh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bh(e.integerValue)===bh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bh(e.doubleValue),r=bh(t.doubleValue);return n===r?Au(n)===Au(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hc(e.arrayValue.values||[],t.arrayValue.values||[],Nh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(oh(n)!==oh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Nh(n[i],r[i])))return!1;return!0}(e,t);default:return Dc()}}function Dh(e,t){return void 0!==(e.values||[]).find((e=>Nh(e,t)))}function Ph(e,t){if(e===t)return 0;const n=Ah(e),r=Ah(t);if(n!==r)return Wc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bh(e.integerValue||e.doubleValue),r=bh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Oh(e.timestampValue,t.timestampValue);case 4:return Oh(Ih(e),Ih(t));case 5:return Wc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_h(e),r=_h(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wc(n[i],r[i]);if(0!==e)return e}return Wc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wc(bh(e.latitude),bh(t.latitude));return 0!==n?n:Wc(bh(e.longitude),bh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ph(n[i],r[i]);if(e)return e}return Wc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kh.mapValue&&t===kh.mapValue)return 0;if(e===kh.mapValue)return 1;if(t===kh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Wc(r[o],s[o]);if(0!==e)return e;const t=Ph(n[r[o]],i[s[o]]);if(0!==t)return t}return Wc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Dc()}}function Oh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wc(e,t);const n=wh(e),r=wh(t),i=Wc(n.seconds,r.seconds);return 0!==i?i:Wc(n.nanos,r.nanos)}function Rh(e){return Mh(e)}function Mh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return _h(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return nu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Mh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Mh(e.fields[i]));return n+"}"}(e.mapValue):Dc()}function Lh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Fh(e){return!!e&&"integerValue"in e}function Vh(e){return!!e&&"arrayValue"in e}function jh(e){return!!e&&"nullValue"in e}function zh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bh(e){return!!e&&"mapValue"in e}function Uh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ah(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Uh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Uh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kh(e){return"nullValue"in e?Ch:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Lh(xh.empty(),nu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Dc()}function Gh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Lh(xh.empty(),nu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?kh:Dc()}function Qh(e,t){const n=Ph(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wh(e,t){const n=Ph(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Hh{constructor(e){this.value=e}static empty(){return new Hh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uh(t)}setAll(e){let t=tu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Uh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Bh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ah(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Hh(Uh(this.value))}}function Yh(e){const t=[];return ah(e.fields,((e,n)=>{const r=new tu([e]);if(Bh(n)){const e=Yh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new gh(t)}class Xh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Xh(e,0,Jc.min(),Jc.min(),Jc.min(),Hh.empty(),0)}static newFoundDocument(e,t,n,r){return new Xh(e,1,t,Jc.min(),n,r,0)}static newNoDocument(e,t){return new Xh(e,2,t,Jc.min(),Jc.min(),Hh.empty(),0)}static newUnknownDocument(e,t){return new Xh(e,3,t,Jc.min(),Jc.min(),Hh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Jh{constructor(e,t){this.position=e,this.inclusive=t}}function Zh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?nu.comparator(nu.fromName(o.referenceValue),n.key):Ph(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $h(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nh(e.position[n],t.position[n]))return!1;return!0}class ed{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function td(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nd{}class rd extends nd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new fd(e,t,n):"array-contains"===t?new yd(e,n):"in"===t?new vd(e,n):"not-in"===t?new wd(e,n):"array-contains-any"===t?new bd(e,n):new rd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new pd(e,n):new gd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ph(t,this.value)):null!==t&&Ah(this.value)===Ah(t)&&this.matchesComparison(Ph(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class id extends nd{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new id(e,t)}matches(e){return sd(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function sd(e){return"and"===e.op}function od(e){return"or"===e.op}function ad(e){return ld(e)&&sd(e)}function ld(e){for(const t of e.filters)if(t instanceof id)return!1;return!0}function cd(e){if(e instanceof rd)return e.field.canonicalString()+e.op.toString()+Rh(e.value);if(ad(e))return e.filters.map((e=>cd(e))).join(",");{const t=e.filters.map((e=>cd(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ud(e,t){return e instanceof rd?function(e,t){return t instanceof rd&&e.op===t.op&&e.field.isEqual(t.field)&&Nh(e.value,t.value)}(e,t):e instanceof id?function(e,t){return t instanceof id&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ud(n,t.filters[r])),!0)}(e,t):void Dc()}function hd(e,t){const n=e.filters.concat(t);return id.create(n,e.op)}function dd(e){return e instanceof rd?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rh(e.value))}(e):e instanceof id?function(e){return e.op.toString()+" {"+e.getFilters().map(dd).join(" ,")+"}"}(e):"Filter"}class fd extends rd{constructor(e,t,n){super(e,t,n),this.key=nu.fromName(n.referenceValue)}matches(e){const t=nu.comparator(e.key,this.key);return this.matchesComparison(t)}}class pd extends rd{constructor(e,t){super(e,"in",t),this.keys=md("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gd extends rd{constructor(e,t){super(e,"not-in",t),this.keys=md("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function md(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>nu.fromName(e.referenceValue)))}class yd extends rd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vh(t)&&Dh(t.arrayValue,this.value)}}class vd extends rd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dh(this.value.arrayValue,t)}}class wd extends rd{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dh(this.value.arrayValue,t)}}class bd extends rd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Dh(this.value.arrayValue,e)))}}class _d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Sd(e){return new _d(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ed(e){const t=Oc(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Cu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Rh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Rh(e))).join(",")),t.ce=e}return t.ce}function Id(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!td(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ud(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$h(e.startAt,t.startAt)&&$h(e.endAt,t.endAt)}function Td(e){return nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xd(e,t){return e.filters.filter((e=>e instanceof rd&&e.field.isEqual(t)))}function kd(e,t,n){let r=Ch,i=!0;for(const s of xd(e,t)){let e=Ch,t=!0;switch(s.op){case"<":case"<=":e=Kh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ch}Qh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Qh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Cd(e,t,n){let r=kh,i=!0;for(const s of xd(e,t)){let e=kh,t=!0;switch(s.op){case">=":case">":e=Gh(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=kh}Wh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Ad{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Nd(e,t,n,r,i,s,o,a){return new Ad(e,t,n,r,i,s,o,a)}function Dd(e){return new Ad(e)}function Pd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Od(e){return null!==e.collectionGroup}function Rd(e){const t=Oc(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new dh(tu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ed(r,n))})),e.has(tu.keyField().canonicalString())||t.le.push(new ed(tu.keyField(),n))}return t.le}function Md(e){const t=Oc(e);return t.he||(t.he=Ld(t,Rd(e))),t.he}function Ld(e,t){if("F"===e.limitType)return Sd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ed(e.field,t)}));const n=e.endAt?new Jh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Jh(e.startAt.position,e.startAt.inclusive):null;return Sd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fd(e,t){const n=e.filters.concat([t]);return new Ad(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vd(e,t,n){return new Ad(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jd(e,t){return Id(Md(e),Md(t))&&e.limitType===t.limitType}function zd(e){return"".concat(Ed(Md(e)),"|lt:").concat(e.limitType)}function Bd(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>dd(e))).join(", "),"]")),Cu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Rh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Rh(e))).join(",")),"Target(".concat(t,")")}(Md(e)),"; limitType=").concat(e.limitType,")")}function Ud(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):nu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Rd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rd(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rd(e),t))}(e,t)}function qd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kd(e){return(t,n)=>{let r=!1;for(const i of Rd(e)){const e=Gd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Gd(e,t,n){const r=e.field.isKeyField()?nu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ph(r,i):Dc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dc()}}class Qd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ah(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return lh(this.inner)}size(){return this.innerSize}}const Wd=new ch(nu.comparator);function Hd(){return Wd}const Yd=new ch(nu.comparator);function Xd(){let e=Yd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Jd(e){let t=Yd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Zd(){return ef()}function $d(){return ef()}function ef(){return new Qd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const tf=new ch(nu.comparator),nf=new dh(nu.comparator);function rf(){let e=nf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const sf=new dh(Wc);function of(){return sf}function af(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(t)?"-0":t}}function lf(e){return{integerValue:""+e}}function cf(e,t){return Nu(t)?lf(t):af(e,t)}class uf{constructor(){this._=void 0}}function hf(e,t,n){return e instanceof pf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sh(t)&&(t=Eh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gf?mf(e,t):e instanceof yf?vf(e,t):function(e,t){const n=ff(e,t),r=bf(n)+bf(e.Ie);return Fh(n)&&Fh(e.Ie)?lf(r):af(e.serializer,r)}(e,t)}function df(e,t,n){return e instanceof gf?mf(e,t):e instanceof yf?vf(e,t):n}function ff(e,t){return e instanceof wf?function(e){return Fh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class pf extends uf{}class gf extends uf{constructor(e){super(),this.elements=e}}function mf(e,t){const n=_f(t);for(const r of e.elements)n.some((e=>Nh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class yf extends uf{constructor(e){super(),this.elements=e}}function vf(e,t){let n=_f(t);for(const r of e.elements)n=n.filter((e=>!Nh(e,r)));return{arrayValue:{values:n}}}class wf extends uf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function bf(e){return bh(e.integerValue||e.doubleValue)}function _f(e){return Vh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sf{constructor(e,t){this.field=e,this.transform=t}}class Ef{constructor(e,t){this.version=e,this.transformResults=t}}class If{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new If}static exists(e){return new If(void 0,e)}static updateTime(e){return new If(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xf{}function kf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ff(e.key,If.none()):new Pf(e.key,e.data,If.none());{const n=e.data,r=Hh.empty();let i=new dh(tu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Of(e.key,r,new gh(i.toArray()),If.none())}}function Cf(e,t,n){e instanceof Pf?function(e,t,n){const r=e.value.clone(),i=Mf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Of?function(e,t,n){if(!Tf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Rf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Af(e,t,n,r){return e instanceof Pf?function(e,t,n,r){if(!Tf(e.precondition,t))return n;const i=e.value.clone(),s=Lf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Of?function(e,t,n,r){if(!Tf(e.precondition,t))return n;const i=Lf(e.fieldTransforms,r,t),s=t.data;return s.setAll(Rf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Tf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ff(r.transform,e||null);null!=i&&(null===n&&(n=Hh.empty()),n.set(r.field,i))}return n||null}function Df(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gf&&t instanceof gf||e instanceof yf&&t instanceof yf?Hc(e.elements,t.elements,Nh):e instanceof wf&&t instanceof wf?Nh(e.Ie,t.Ie):e instanceof pf&&t instanceof pf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Pf extends xf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Of extends xf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Rf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Mf(e,t,n){const r=new Map;Pc(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,df(o,a,n[i]))}return r}function Lf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,hf(e,s,t))}return r}class Ff extends xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vf extends xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Af(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Af(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$d();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=kf(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Jc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rf())}isEqual(e){return this.batchId===e.batchId&&Hc(this.mutations,e.mutations,((e,t)=>Df(e,t)))&&Hc(this.baseMutations,e.baseMutations,((e,t)=>Df(e,t)))}}class zf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pc(e.mutations.length===n.length);let r=tf;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new zf(e,t,n,r)}}class Bf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Uf{constructor(e,t){this.count=e,this.unchangedNames=t}}var qf,Kf;function Gf(e){switch(e){default:return Dc();case Rc.CANCELLED:case Rc.UNKNOWN:case Rc.DEADLINE_EXCEEDED:case Rc.RESOURCE_EXHAUSTED:case Rc.INTERNAL:case Rc.UNAVAILABLE:case Rc.UNAUTHENTICATED:return!1;case Rc.INVALID_ARGUMENT:case Rc.NOT_FOUND:case Rc.ALREADY_EXISTS:case Rc.PERMISSION_DENIED:case Rc.FAILED_PRECONDITION:case Rc.ABORTED:case Rc.OUT_OF_RANGE:case Rc.UNIMPLEMENTED:case Rc.DATA_LOSS:return!0}}function Qf(e){if(void 0===e)return Cc("GRPC error has no .code"),Rc.UNKNOWN;switch(e){case qf.OK:return Rc.OK;case qf.CANCELLED:return Rc.CANCELLED;case qf.UNKNOWN:return Rc.UNKNOWN;case qf.DEADLINE_EXCEEDED:return Rc.DEADLINE_EXCEEDED;case qf.RESOURCE_EXHAUSTED:return Rc.RESOURCE_EXHAUSTED;case qf.INTERNAL:return Rc.INTERNAL;case qf.UNAVAILABLE:return Rc.UNAVAILABLE;case qf.UNAUTHENTICATED:return Rc.UNAUTHENTICATED;case qf.INVALID_ARGUMENT:return Rc.INVALID_ARGUMENT;case qf.NOT_FOUND:return Rc.NOT_FOUND;case qf.ALREADY_EXISTS:return Rc.ALREADY_EXISTS;case qf.PERMISSION_DENIED:return Rc.PERMISSION_DENIED;case qf.FAILED_PRECONDITION:return Rc.FAILED_PRECONDITION;case qf.ABORTED:return Rc.ABORTED;case qf.OUT_OF_RANGE:return Rc.OUT_OF_RANGE;case qf.UNIMPLEMENTED:return Rc.UNIMPLEMENTED;case qf.DATA_LOSS:return Rc.DATA_LOSS;default:return Dc()}}(Kf=qf||(qf={}))[Kf.OK=0]="OK",Kf[Kf.CANCELLED=1]="CANCELLED",Kf[Kf.UNKNOWN=2]="UNKNOWN",Kf[Kf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kf[Kf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kf[Kf.NOT_FOUND=5]="NOT_FOUND",Kf[Kf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kf[Kf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kf[Kf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kf[Kf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kf[Kf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kf[Kf.ABORTED=10]="ABORTED",Kf[Kf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kf[Kf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kf[Kf.INTERNAL=13]="INTERNAL",Kf[Kf.UNAVAILABLE=14]="UNAVAILABLE",Kf[Kf.DATA_LOSS=15]="DATA_LOSS";let Wf=null;function Hf(){return new TextEncoder}const Yf=new _c([4294967295,4294967295],0);function Xf(e){const t=Hf().encode(e),n=new bc;return n.update(t),new Uint8Array(n.digest())}function Jf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new _c([n,r],0),new _c([i,s],0)]}class Zf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $f("Invalid padding: ".concat(t));if(n<0)throw new $f("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new $f("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new $f("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=_c.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(_c.fromNumber(n)));return 1===r.compare(Yf)&&(r=new _c([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Xf(e),[n,r]=Jf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Zf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Xf(e),[n,r]=Jf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ep{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,tp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ep(Jc.min(),r,new ch(Wc),Hd(),rf())}}class tp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new tp(n,t,rf(),rf(),rf())}}class np{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class rp{constructor(e,t){this.targetId=e,this.fe=t}}class ip{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class sp{constructor(){this.ge=0,this.pe=lp(),this.ye=yh.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=rf(),t=rf(),n=rf();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dc()}})),new tp(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=lp()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Pc(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class op{constructor(e){this.Le=e,this.ke=new Map,this.qe=Hd(),this.Qe=ap(),this.Ke=new ch(Wc)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Dc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Td(i))if(0===n){const e=new nu(i.path);this.We(t,e,Xh.newNoDocument(e,Jc.min()))}else Pc(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Wf||Wf.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=_h(n).toUint8Array()}catch(e){if(e instanceof mh)return Ac("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Zf(s,r,i)}catch(e){return Ac(e instanceof $f?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Td(i.target)){const t=new nu(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Xh.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=rf();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new ep(e,t,this.Ke,this.qe,n);return this.qe=Hd(),this.Qe=ap(),this.Ke=new ch(Wc),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new sp,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new dh(Wc),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||kc("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new sp),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ap(){return new ch(nu.comparator)}function lp(){return new ch(nu.comparator)}const cp={asc:"ASCENDING",desc:"DESCENDING"},up={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hp={and:"AND",or:"OR"};class dp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fp(e,t){return e.useProto3Json||Cu(t)?t:{value:t}}function pp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mp(e,t){return pp(e,t.toTimestamp())}function yp(e){return Pc(!!e),Jc.fromTimestamp(function(e){const t=wh(e);return new Xc(t.seconds,t.nanos)}(e))}function vp(e,t){return wp(e,t).canonicalString()}function wp(e,t){const n=function(e){return new $c(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bp(e){const t=$c.fromString(e);return Pc(Up(t)),t}function _p(e,t){return vp(e.databaseId,t.path)}function Sp(e,t){const n=bp(t);if(n.get(1)!==e.databaseId.projectId)throw new Mc(Rc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mc(Rc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nu(xp(n))}function Ep(e,t){return vp(e.databaseId,t)}function Ip(e){const t=bp(e);return 4===t.length?$c.emptyPath():xp(t)}function Tp(e){return new $c(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xp(e){return Pc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kp(e,t,n){return{name:_p(e,t),fields:n.value.mapValue.fields}}function Cp(e,t,n){const r=Sp(e,t.name),i=yp(t.updateTime),s=t.createTime?yp(t.createTime):Jc.min(),o=new Hh({mapValue:{fields:t.fields}}),a=Xh.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ap(e,t){let n;if(t instanceof Pf)n={update:kp(e,t.key,t.value)};else if(t instanceof Ff)n={delete:_p(e,t.key)};else if(t instanceof Of)n={update:kp(e,t.key,t.data),updateMask:Bp(t.fieldMask)};else{if(!(t instanceof Vf))return Dc();n={verify:_p(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof pf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Dc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dc()}(e,t.precondition)),n}function Np(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?If.updateTime(yp(e.updateTime)):void 0!==e.exists?If.exists(e.exists):If.none()}(t.currentDocument):If.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Pc("REQUEST_TIME"===t.setToServerValue),n=new pf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new gf(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yf(e)}else"increment"in t?n=new wf(e,t.increment):Dc();const r=tu.fromServerFormat(t.fieldPath);return new Sf(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Sp(e,t.update.name),s=new Hh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new gh(t.map((e=>tu.fromServerFormat(e))))}(t.updateMask);return new Of(i,s,e,n,r)}return new Pf(i,s,n,r)}if(t.delete){const r=Sp(e,t.delete);return new Ff(r,n)}if(t.verify){const r=Sp(e,t.verify);return new Vf(r,n)}return Dc()}function Dp(e,t){return{documents:[Ep(e,t.path)]}}function Pp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ep(e,i);const s=function(e){if(0!==e.length)return zp(id.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Vp(e.field),direction:Mp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Op(e){let t=Ip(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Rp(e);return t instanceof id&&ad(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ed(jp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Cu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Jh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Jh(n,t)}(n.endAt)),Nd(t,i,o,s,a,"F",l,c)}function Rp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=jp(e.unaryFilter.field);return rd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=jp(e.unaryFilter.field);return rd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jp(e.unaryFilter.field);return rd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jp(e.unaryFilter.field);return rd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dc()}}(e):void 0!==e.fieldFilter?function(e){return rd.create(jp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return id.create(e.compositeFilter.filters.map((e=>Rp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dc()}}(e.compositeFilter.op))}(e):Dc()}function Mp(e){return cp[e]}function Lp(e){return up[e]}function Fp(e){return hp[e]}function Vp(e){return{fieldPath:e.canonicalString()}}function jp(e){return tu.fromServerFormat(e.fieldPath)}function zp(e){return e instanceof rd?function(e){if("=="===e.op){if(zh(e.value))return{unaryFilter:{field:Vp(e.field),op:"IS_NAN"}};if(jh(e.value))return{unaryFilter:{field:Vp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zh(e.value))return{unaryFilter:{field:Vp(e.field),op:"IS_NOT_NAN"}};if(jh(e.value))return{unaryFilter:{field:Vp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vp(e.field),op:Lp(e.op),value:e.value}}}(e):e instanceof id?function(e){const t=e.getFilters().map((e=>zp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Fp(e.op),filters:t}}}(e):Dc()}function Bp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Up(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jc.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Kp{constructor(e){this.ct=e}}function Gp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_p(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pp(e,t.version.toTimestamp()),createTime:pp(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wp(t.version)};else{if(!t.isUnknownDocument())return Dc();r.unknownDocument={path:n.path.toArray(),version:Wp(t.version)}}return r}function Qp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Hp(e){const t=new Xc(e.seconds,e.nanoseconds);return Jc.fromTimestamp(t)}function Yp(e,t){const n=(t.baseMutations||[]).map((t=>Np(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Np(e.ct,t))),i=Xc.fromMillis(t.localWriteTimeMs);return new jf(t.batchId,i,n,r)}function Xp(e){const t=Hp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Hp(e.lastLimboFreeSnapshotVersion):Jc.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Pc(1===e.documents.length),Md(Dd(Ip(e.documents[0])))}(e.query):function(e){return Md(Op(e))}(e.query),new qp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,yh.fromBase64String(e.resumeToken))}function Jp(e,t){const n=Wp(t.snapshotVersion),r=Wp(t.lastLimboFreeSnapshotVersion);let i;i=Td(t.target)?Dp(e.ct,t.target):Pp(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ed(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zp(e){const t=Op({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vd(t,t.limit,"L"):t}function $p(e,t){return new Bf(t.largestBatchId,Np(e.ct,t.overlayMutation))}function eg(e,t){const n=t.path.lastSegment();return[e,Du(t.path.popLast()),n]}function tg(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Wp(r.readTime),documentKey:Du(r.documentKey.path),largestBatchId:r.largestBatchId}}class ng{getBundleMetadata(e,t){return rg(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Hp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return rg(e).put(function(e){return{bundleId:e.id,createTime:Wp(yp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return ig(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Zp(e.bundledQuery),readTime:Hp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return ig(e).put(function(e){return{name:e.name,readTime:Wp(yp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function rg(e){return sh(e,"bundles")}function ig(e){return sh(e,"namedQueries")}class sg{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new sg(e,n)}getOverlay(e,t){return og(e).get(eg(this.userId,t)).next((e=>e?$p(this.serializer,e):null))}getOverlays(e,t){const n=Zd();return gu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Bf(t,i);r.push(this.ht(e,s))})),gu.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Du(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(og(e).H("collectionPathOverlayIndex",r))})),gu.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Zd(),i=Du(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return og(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=$p(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Zd();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return og(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=$p(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return og(e).put(function(e,t,n){const[r,i,s]=eg(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ap(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function og(e){return sh(e,"documentOverlays")}class ag{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(bh(e.integerValue));else if("doubleValue"in e){const n=bh(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Au(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(_h(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?qh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Dc()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),nu.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function lg(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cg(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=lg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ag.bt=new ag;class ug{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=cg(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=cg(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class hg{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class dg{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class fg{constructor(){this.Gt=new ug,this.zt=new hg(this.Gt),this.jt=new dg(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class pg{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new pg(this.indexId,this.documentKey,this.arrayValue,n)}}function gg(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=mg(e.arrayValue,t.arrayValue),0!==n?n:(n=mg(e.directionalValue,t.directionalValue),0!==n?n:nu.comparator(e.documentKey,t.documentKey)))}function mg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class yg{constructor(e){this.Yt=new dh(((e,t)=>tu.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Pc(e.collectionGroup===this.collectionId),this.en)return!1;const t=iu(e);if(void 0!==t&&!this.nn(t))return!1;const n=su(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new dh(tu.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ou(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ou(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ou(n.field,"asc"===n.dir?0:1)));return new ru(ru.UNKNOWN_ID,this.collectionId,t,au.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vg(e){var t,n;if(Pc(e instanceof rd||e instanceof id),e instanceof rd){if(e instanceof vd){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>rd.create(e.field,"==",t))))||[];return id.create(r,"or")}return e}const r=e.filters.map((e=>vg(e)));return id.create(r,e.op)}function wg(e){if(0===e.getFilters().length)return[];const t=Eg(vg(e));return Pc(Sg(t)),bg(t)||_g(t)?[t]:t.getFilters()}function bg(e){return e instanceof rd}function _g(e){return e instanceof id&&ad(e)}function Sg(e){return bg(e)||_g(e)||function(e){if(e instanceof id&&od(e)){for(const t of e.getFilters())if(!bg(t)&&!_g(t))return!1;return!0}return!1}(e)}function Eg(e){if(Pc(e instanceof rd||e instanceof id),e instanceof rd)return e;if(1===e.filters.length)return Eg(e.filters[0]);const t=e.filters.map((e=>Eg(e)));let n=id.create(t,e.op);return n=xg(n),Sg(n)?n:(Pc(n instanceof id),Pc(sd(n)),Pc(n.filters.length>1),n.filters.reduce(((e,t)=>Ig(e,t))))}function Ig(e,t){let n;return Pc(e instanceof rd||e instanceof id),Pc(t instanceof rd||t instanceof id),n=e instanceof rd?t instanceof rd?function(e,t){return id.create([e,t],"and")}(e,t):Tg(e,t):t instanceof rd?Tg(t,e):function(e,t){if(Pc(e.filters.length>0&&t.filters.length>0),sd(e)&&sd(t))return hd(e,t.getFilters());const n=od(e)?e:t,r=od(e)?t:e,i=n.filters.map((e=>Ig(e,r)));return id.create(i,"or")}(e,t),xg(n)}function Tg(e,t){if(sd(t))return hd(t,e.getFilters());{const n=t.filters.map((t=>Ig(e,t)));return id.create(n,"or")}}function xg(e){if(Pc(e instanceof rd||e instanceof id),e instanceof rd)return e;const t=e.getFilters();if(1===t.length)return xg(t[0]);if(ld(e))return e;const n=t.map((e=>xg(e))),r=[];return n.forEach((t=>{t instanceof rd?r.push(t):t instanceof id&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:id.create(r,e.op)}class kg{constructor(){this._n=new Cg}addToCollectionParentIndex(e,t){return this._n.add(t),gu.resolve()}getCollectionParents(e,t){return gu.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return gu.resolve()}deleteFieldIndex(e,t){return gu.resolve()}deleteAllFieldIndexes(e){return gu.resolve()}createTargetIndexes(e,t){return gu.resolve()}getDocumentsMatchingTarget(e,t){return gu.resolve(null)}getIndexType(e,t){return gu.resolve(0)}getFieldIndexes(e,t){return gu.resolve([])}getNextCollectionGroupToUpdate(e){return gu.resolve(null)}getMinOffset(e,t){return gu.resolve(uu.min())}getMinOffsetFromCollectionGroup(e,t){return gu.resolve(uu.min())}updateCollectionGroup(e,t,n){return gu.resolve()}updateIndexEntries(e,t){return gu.resolve()}}class Cg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new dh($c.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new dh($c.comparator)).toArray()}}const Ag=new Uint8Array(0);class Ng{constructor(e,t){this.databaseId=t,this.an=new Cg,this.un=new Qd((e=>Ed(e)),((e,t)=>Id(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Du(r)};return Dg(e).put(i)}return gu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Yc(t),""],!1,!0);return Dg(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ru(r.parent))}return n}))}addFieldIndex(e,t){const n=Og(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Rg(e);return i.next((e=>{n.put(tg(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Og(e),r=Rg(e),i=Pg(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Og(e),n=Pg(e),r=Rg(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return gu.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new yg(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Pg(e);let r=!0;const i=new Map;return gu.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=rf();const r=[];return gu.forEach(i,((i,s)=>{kc("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Ed(t)));const o=function(e,t){const n=iu(t);if(void 0===n)return null;for(const r of xd(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of su(t))for(const t of xd(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of su(t)){const t=0===i.kind?kd(e,i.fieldPath,e.startAt):Cd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Jh(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of su(t)){const t=0===i.kind?Cd(e,i.fieldPath,e.endAt):kd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Jh(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return gu.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=nu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return gu.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wg(id.create(e.filters,"and")).map((t=>Sd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Ag,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new pg(e,nu.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new pg(e,nu.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new yg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return gu.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new dh(tu.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new fg;for(const r of su(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);ag.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new fg;return ag.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new fg;return ag.bt.Pt(Lh(this.databaseId,t),n.Ht(function(e){const t=su(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new fg);let i=0;for(const s of su(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Vh(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);ag.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new fg;n.seed(e.Wt()),ag.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof rd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Og(e),r=Rg(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return gu.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new au(t.sequenceNumber,new uu(Hp(t.readTime),new nu(Ru(t.documentKey)),t.largestBatchId)):au.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ou(tu.fromServerFormat(t),n)}));return new ru(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Wc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Og(e),i=Rg(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>gu.forEach(t,(t=>i.put(tg(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return gu.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?gu.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),gu.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?gu.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Pg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Pg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Pg(e);let i=new dh(gg);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new pg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new dh(gg);const r=this.An(t,e);if(null==r)return n;const i=iu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Vh(s))for(const i of s.arrayValue.values||[])n=n.add(new pg(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new pg(t.indexId,e.key,Ag,r));return n}wn(e,t,n,r,i){kc("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ph(s),l=ph(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ph(o)):t?(i(a),a=ph(s)):(a=ph(s),l=ph(o))}}(r,i,gg,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),gu.waitFor(s)}gn(e){let t=1;return Rg(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>gg(e,t))).filter(((e,t,n)=>!t||0!==gg(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=gg(s,e),i=gg(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ag,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ag,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return gg(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mg)}getMinOffset(e,t){return gu.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Dc())))).next(Mg)}}function Dg(e){return sh(e,"collectionParents")}function Pg(e){return sh(e,"indexEntries")}function Og(e){return sh(e,"indexConfiguration")}function Rg(e){return sh(e,"indexState")}function Mg(e){Pc(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;hu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new uu(t.readTime,t.documentKey,n)}const Lg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fg(e,Fg.DEFAULT_COLLECTION_PERCENTILE,Fg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vg(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Pc(1===a)})));const c=[];for(const u of n.mutations){const e=Fu(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return gu.waitFor(s).next((()=>c))}function jg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Dc();t=e.noDocument}return JSON.stringify(t).length}Fg.DEFAULT_COLLECTION_PERCENTILE=10,Fg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fg.DEFAULT=new Fg(41943040,Fg.DEFAULT_COLLECTION_PERCENTILE,Fg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fg.DISABLED=new Fg(-1,0,0);class zg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Pc(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new zg(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ug(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=qg(e),s=Ug(e);return s.add({}).next((o=>{Pc("number"==typeof o);const a=new jf(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ap(e.ct,t))),i=n.mutations.map((t=>Ap(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new dh(((e,t)=>Wc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Fu(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Vu))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),gu.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Ug(e).get(t).next((e=>e?(Pc(e.userId===this.userId),Yp(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?gu.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ug(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Pc(t.batchId>=n),i=Yp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ug(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ug(e).W("userMutationsIndex",t).next((e=>e.map((e=>Yp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Lu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return qg(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Ru(a);if(o===this.userId&&t.path.isEqual(c))return Ug(e).get(l).next((e=>{if(!e)throw Dc();Pc(e.userId===this.userId),i.push(Yp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new dh(Wc);const r=[];return t.forEach((t=>{const i=Lu(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=qg(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Ru(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),gu.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Lu(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new dh(Wc);return qg(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Ru(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ug(e).get(t).next((e=>{if(null===e)throw Dc();Pc(e.userId===this.userId),n.push(Yp(this.serializer,e))})))})),gu.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Vg(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),gu.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return gu.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return qg(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ru(e[1]);r.push(t)}else n.done()})).next((()=>{Pc(0===r.length)}))}))}containsKey(e,t){return Bg(e,this.userId,t)}xn(e){return Kg(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Bg(e,t,n){const r=Lu(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return qg(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ug(e){return sh(e,"mutations")}function qg(e){return sh(e,"documentMutations")}function Kg(e){return sh(e,"mutationQueues")}class Gg{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Gg(0)}static Bn(){return new Gg(-1)}}class Qg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Gg(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Jc.fromTimestamp(new Xc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wg(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Pc(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Wg(e).Y(((s,o)=>{const a=Xp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>gu.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Wg(e).Y(((e,n)=>{const r=Xp(n);t(r)}))}Ln(e){return Hg(e).get("targetGlobalKey").next((e=>(Pc(null!==e),e)))}kn(e,t){return Hg(e).put("targetGlobalKey",t)}qn(e,t){return Wg(e).put(Jp(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ed(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wg(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Xp(n);Id(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Yg(e);return t.forEach((t=>{const s=Du(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),gu.waitFor(r)}removeMatchingKeys(e,t,n){const r=Yg(e);return gu.forEach(t,(t=>{const i=Du(t.path);return gu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Yg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Yg(e);let i=rf();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ru(e[1]),s=new nu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Du(t.path),r=IDBKeyRange.bound([n],[Yc(n)],!1,!0);let i=0;return Yg(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Wg(e).get(t).next((e=>e?Xp(e):null))}}function Wg(e){return sh(e,"targets")}function Hg(e){return sh(e,"targetGlobal")}function Yg(e){return sh(e,"targetDocuments")}function Xg(e,t){let[n,r]=e,[i,s]=t;const o=Wc(n,i);return 0===o?Wc(r,s):o}class Jg{constructor(e){this.Kn=e,this.buffer=new dh(Xg),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Xg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Zg{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){kc("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){bu(e)?kc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await pu(e)}await this.zn(3e5)}))}}class $g{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return gu.resolve(ku._e);const n=new Jg(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(kc("LruGarbageCollector","Garbage collection skipped; disabled"),gu.resolve(Lg)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(kc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Lg):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(kc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),xc()<=an.DEBUG&&kc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),gu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function em(e,t){return new $g(e,t)}class tm{constructor(e,t){this.db=e,this.garbageCollector=em(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return nm(e,n)}removeReference(e,t,n){return nm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return nm(e,t)}er(e,t){return function(e,t){let n=!1;return Kg(e).Z((r=>Bg(e,r,t).next((e=>(e&&(n=!0),gu.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Jc.min()),Yg(e).delete(function(e){return[0,Du(e.path)]}(s)))))}));r.push(t)}})).next((()=>gu.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return nm(e,t)}Xn(e,t){const n=Yg(e);let r,i=ku._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==ku._e&&t(new nu(Ru(r)),i),i=l,r=a):i=ku._e})).next((()=>{i!==ku._e&&t(new nu(Ru(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nm(e,t){return Yg(e).put(function(e,t){return{targetId:0,path:Du(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class rm{constructor(){this.changes=new Qd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class im{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lm(e).put(n)}removeEntry(e,t,n){return lm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Qp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Xh.newInvalidDocument(t);return lm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cm(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Xh.newInvalidDocument(t)};return lm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cm(t))},((e,r)=>{n={document:this.nr(t,r),size:jg(r)}})).next((()=>n))}getEntries(e,t){let n=Hd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Hd(),r=new ch(nu.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,jg(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return gu.resolve();let r=new dh(hm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cm(r.first()),cm(r.last())),s=r.getIterator();let o=s.getNext();return lm(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=nu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&hm(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(cm(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Qp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lm(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Hd();for(const i of e){const e=this.nr(nu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ud(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Hd();const s=um(t,n),o=um(t,uu.max());return lm(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(nu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new om(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return am(e).get("remoteDocumentGlobalKey").next((e=>(Pc(!!e),e)))}tr(e,t){return am(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Cp(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=nu.fromSegments(t.noDocument.path),r=Hp(t.noDocument.readTime);n=Xh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dc();{const e=nu.fromSegments(t.unknownDocument.path),r=Hp(t.unknownDocument.version);n=Xh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Xc(e[0],e[1]);return Jc.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Jc.min()))return e}return Xh.newInvalidDocument(e)}}function sm(e){return new im(e)}class om extends rm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Qd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new dh(((e,t)=>Wc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Gp(this.ar.serializer,s);r=r.add(i.path.popLast());const l=jg(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Gp(this.ar.serializer,s.convertToNoDocument(Jc.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),gu.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function am(e){return sh(e,"remoteDocumentGlobal")}function lm(e){return sh(e,"remoteDocumentsV14")}function cm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function um(e,t){const n=t.documentKey.path.toArray();return[e,Qp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Wc(n[s],r[s]),i)return i;return i=Wc(n.length,r.length),i||(i=Wc(n[n.length-2],r[r.length-2]),i||Wc(n[n.length-1],r[r.length-1]))}class dm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Af(n.mutation,e,gh.empty(),Xc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,rf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf();const r=Zd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Xd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Zd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,rf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Hd();const s=ef(),o=ef();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Of)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Af(o.mutation,t,o.mutation.getFieldMask(),Xc.now())):s.set(t.key,gh.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new dm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ef();let r=new ch(((e,t)=>e-t)),i=rf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||gh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||rf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=$d();l.forEach((e=>{if(!i.has(e)){const r=kf(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return gu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Od(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):gu.resolve(Zd());let o=-1,a=i;return s.next((t=>gu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?gu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,rf()))).next((e=>({batchId:o,changes:Jd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nu(t)).next((e=>{let t=Xd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Xd();return this.indexManager.getCollectionParents(e,i).next((o=>gu.forEach(o,(o=>{const a=function(e,t){return new Ad(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xh.newInvalidDocument(r)))}));let n=Xd();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Af(s.mutation,r,gh.empty(),Xc.now()),Ud(t,r)&&(n=n.insert(e,r))})),n}))}}class pm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return gu.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yp(e.createTime)}}(t)),gu.resolve()}getNamedQuery(e,t){return gu.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Zp(e.bundledQuery),readTime:yp(e.readTime)}}(t)),gu.resolve()}}class gm{constructor(){this.overlays=new ch(nu.comparator),this.hr=new Map}getOverlay(e,t){return gu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zd();return gu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),gu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),gu.resolve()}getOverlaysForCollection(e,t,n){const r=Zd(),i=t.length+1,s=new nu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return gu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ch(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Zd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Zd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return gu.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Bf(t,n));let i=this.hr.get(t);void 0===i&&(i=rf(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class mm{constructor(){this.Pr=new dh(ym.Ir),this.Tr=new dh(ym.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ym(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ym(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new nu(new $c([])),n=new ym(t,e),r=new ym(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new nu(new $c([])),n=new ym(t,e),r=new ym(t,e+1);let i=rf();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ym(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ym{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return nu.comparator(e.key,t.key)||Wc(e.pr,t.pr)}static Er(e,t){return Wc(e.pr,t.pr)||nu.comparator(e.key,t.key)}}class vm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new dh(ym.Ir)}checkEmpty(e){return gu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new jf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new ym(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return gu.resolve(s)}lookupMutationBatch(e,t){return gu.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return gu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return gu.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return gu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ym(t,0),r=new ym(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),gu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new dh(Wc);return t.forEach((e=>{const t=new ym(e,0),r=new ym(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),gu.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;nu.isDocumentKey(i)||(i=i.child(""));const s=new ym(new nu(i),0);let o=new dh(Wc);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),gu.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pc(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return gu.forEach(t.mutations,(r=>{const i=new ym(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ym(t,0),r=this.wr.firstAfterOrEqual(n);return gu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,gu.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wm{constructor(e){this.vr=e,this.docs=new ch(nu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gu.resolve(n?n.document.mutableCopy():Xh.newInvalidDocument(t))}getEntries(e,t){let n=Hd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xh.newInvalidDocument(e))})),gu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Hd();const s=t.path,o=new nu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||hu(cu(o),n)<=0||(r.has(o.key)||Ud(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return gu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Dc()}Fr(e,t){return gu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bm(this)}getSize(e){return gu.resolve(this.size)}}class bm extends rm{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),gu.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class _m{constructor(e){this.persistence=e,this.Mr=new Qd((e=>Ed(e)),Id),this.lastRemoteSnapshotVersion=Jc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new mm,this.targetCount=0,this.Br=Gg.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),gu.resolve()}getLastRemoteSnapshotVersion(e){return gu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gu.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),gu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),gu.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Gg(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,gu.resolve()}updateTargetData(e,t){return this.qn(t),gu.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,gu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),gu.waitFor(i).next((()=>r))}getTargetCount(e){return gu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return gu.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),gu.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),gu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),gu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return gu.resolve(n)}containsKey(e,t){return gu.resolve(this.Nr.containsKey(t))}}class Sm{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ku(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _m(this),this.indexManager=new kg,this.remoteDocumentCache=function(e){return new wm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Kp(t),this.$r=new pm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new vm(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){kc("MemoryPersistence","Starting transaction:",e);const r=new Em(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return gu.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Em extends fu{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.zr=new mm,this.jr=null}static Hr(e){return new Im(e)}get Jr(){if(this.jr)return this.jr;throw Dc()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),gu.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),gu.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),gu.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gu.forEach(this.Jr,(n=>{const r=nu.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Jc.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return gu.or([()=>gu.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Tm{constructor(e){this.serializer=e}N(e,t,n,r){const i=new mu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mu,{unique:!0}),e.createObjectStore("documentMutations")}(e),xm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=gu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jc.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return gu.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Xu});t.createIndex("collectionPathOverlayIndex",Ju,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Zu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ju});t.createIndex("documentKeyIndex",zu),t.createIndex("collectionGroupIndex",Bu)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qu}).createIndex("sequenceNumberIndex",Wu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Hu}).createIndex("documentKeyIndex",Yu,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=jg(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>gu.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>gu.forEach(n,(n=>{Pc(n.userId===t.userId);const r=Yp(this.serializer,n);return Vg(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new $c(n),o=function(e){return[0,Du(e)]}(s);r.push(t.get(o).next((n=>n?gu.resolve():(n=>t.put({targetId:0,path:Du(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>gu.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Gu});const n=t.store("collectionParents"),r=new Cg,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Du(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new $c(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Ru(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Xp(n),i=Jp(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new nu($c.fromString(e.document.name).popFirst(5)):e.noDocument?nu.fromSegments(e.noDocument.path):e.unknownDocument?nu.fromSegments(e.unknownDocument.path):Dc()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>gu.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=sm(this.serializer),i=new Sm(Im.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:rf();Yp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),gu.forEach(n,((e,n)=>{const s=new Ec(n),o=sg.lt(this.serializer,s),a=i.getIndexManager(s),l=zg.lt(s,this.serializer,a,i.referenceDelegate);return new fm(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new ih(t,ku._e),e).next()}))}))}}function xm(e){e.createObjectStore("targetDocuments",{keyPath:qu}).createIndex("documentTargetsIndex",Ku,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Uu,{unique:!0}),e.createObjectStore("targetGlobal")}const km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cm{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Cm.D())throw new Mc(Rc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tm(this,r),this.Ti=t+"main",this.serializer=new Kp(a),this.Ei=new yu(this.Ti,this.ui,new Tm(this.serializer)),this.Qr=new Qg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sm(this.serializer),this.$r=new ng,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Cc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mc(Rc.FAILED_PRECONDITION,km);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new ku(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Nm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(bu(e))return kc("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Am(e).get("owner").next((e=>gu.resolve(this.Si(e))))}bi(e){return Nm(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=sh(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return gu.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?gu.resolve(!0):Am(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Mc(Rc.FAILED_PRECONDITION,km);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nm(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&kc("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ih(e,ku._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Nm(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return zg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ng(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){kc("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?rh:14===e?nh:13===e?th:12===e?eh:11===e?$u:void Dc()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new ih(r,this.kr?this.kr.next():ku._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Cc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Mc(Rc.FAILED_PRECONDITION,du);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Am(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Mc(Rc.FAILED_PRECONDITION,km)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Am(e).put("owner",t)}static D(){return yu.D()}yi(e){const t=Am(e);return t.get("owner").next((e=>this.Si(e)?(kc("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):gu.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Cc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Lt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return kc("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Cc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Cc("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Am(e){return sh(e,"owner")}function Nm(e){return sh(e,"clientMetadata")}function Dm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Pm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=rf(),r=rf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pm(e,t.fromCache,n,r)}}class Om{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Rm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Lt()?8:yu.v(Rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Om;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(xc()<=an.DEBUG&&kc("QueryEngine","SDK will not create cache indexes for query:",Bd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),gu.resolve()):(xc()<=an.DEBUG&&kc("QueryEngine","Query:",Bd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(xc()<=an.DEBUG&&kc("QueryEngine","The SDK decides to create cache indexes for query:",Bd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Md(t))):gu.resolve())}ji(e,t){if(Pd(t))return gu.resolve(null);let n=Md(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Vd(t,null,"F"),n=Md(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=rf(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Vd(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Pd(t)||r.isEqual(Jc.min())?gu.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?gu.resolve(null):(xc()<=an.DEBUG&&kc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bd(t)),this.es(e,s,t,lu(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new dh(Kd(e));return t.forEach(((t,r)=>{Ud(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return xc()<=an.DEBUG&&kc("QueryEngine","Using full collection scan to execute query:",Bd(t)),this.zi.getDocumentsMatchingQuery(e,t,uu.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Mm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new ch(Wc),this.rs=new Qd((e=>Ed(e)),Id),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Lm(e,t,n,r){return new Mm(e,t,n,r)}async function Fm(e,t){const n=Oc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=rf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Vm(e){const t=Oc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function jm(e,t,n){let r=rf(),i=rf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Hd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Jc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):kc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function zm(e,t){const n=Oc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Bm(e,t){const n=Oc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,gu.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new qp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Um(e,t,n){const r=Oc(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!bu(e))throw e;kc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function qm(e,t,n){const r=Oc(e);let i=Jc.min(),s=rf();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Oc(e),i=r.rs.get(n);return void 0!==i?gu.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Md(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Jc.min(),n?s:rf()))).next((e=>(Qm(r,qd(t),e),{documents:e,hs:s})))))}function Km(e,t){const n=Oc(e),r=Oc(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Gm(e,t){const n=Oc(e),r=n.ss.get(t)||Jc.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,lu(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Qm(n,t,e),e)))}function Qm(e,t,n){let r=e.ss.get(t)||Jc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf();const r=await Bm(e,Md(Zp(t.bundledQuery))),i=Oc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=yp(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(yh.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Hm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ym(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Xm(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Jm{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Mc(r.error.code,r.error.message))),s?new Jm(e,t,r.state,i):(Cc("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Mc(n.error.code,n.error.message))),i?new Zm(e,n.state,r):(Cc("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $m{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=of();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Nu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new $m(e,i):(Cc("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ey{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ey(t.clientId,t.onlineState):(Cc("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class ty{constructor(){this.activeTargetIds=of()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ny{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ch(Wc),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Hm(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ty),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Hm(this.persistenceKey,n));if(e){const t=$m.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Xm(this.persistenceKey,e));if(n){const r=Zm.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xm(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return kc("SharedClientState","READ",e,t),t}setItem(e,t){kc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){kc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(kc("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Cc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=ku._e;if(null!=e)try{const n=JSON.parse(e);Pc("number"==typeof n),t=n}catch(e){Cc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ku._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Jm(this.currentUser,e,t,n),i=Ym(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Ym(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Xm(this.persistenceKey,e),i=new Zm(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return $m.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Jm.Es(new Ec(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Zm.Es(r,t)}xs(e){return ey.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);kc("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=of();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class ry{constructor(){this.no=new ty,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ty,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iy{io(e){}shutdown(){}}class sy{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){kc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oy=null;function ay(){return null===oy?oy=268435456+Math.round(2147483648*Math.random()):oy++,"0x"+oy.toString(16)}const ly={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cy{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const uy="WebChannelConnection";class hy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=ay(),o=this.bo(e,t.toUriEncodedString());kc("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(kc("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Ac("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ic,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=ly[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=ay();return new Promise(((s,o)=>{const a=new wc;a.setWithCredentials(!0),a.listenOnce(gc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case pc.NO_ERROR:const t=a.getResponseJson();kc(uy,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case pc.TIMEOUT:kc(uy,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Mc(Rc.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const n=a.getStatus();if(kc(uy,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rc).indexOf(t)>=0?t:Rc.UNKNOWN}(t.status);o(new Mc(e,t.message))}else o(new Mc(Rc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Mc(Rc.UNAVAILABLE,"Connection failed."));break;default:Dc()}}finally{kc(uy,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);kc(uy,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=ay(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dc(),o=fc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");kc(uy,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new cy({lo:t=>{d?kc(uy,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(kc(uy,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),kc(uy,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,vc.EventType.OPEN,(()=>{d||kc(uy,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,vc.EventType.CLOSE,(()=>{d||(d=!0,kc(uy,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,vc.EventType.ERROR,(t=>{d||(d=!0,Ac(uy,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Mc(Rc.UNAVAILABLE,"The operation could not be completed")))})),p(u,vc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Pc(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){kc(uy,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=qf[e];if(void 0!==t)return Qf(t)}(t),i=o.message;void 0===n&&(n=Rc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Mc(n,i)),u.close()}else kc(uy,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,mc.STAT_EVENT,(t=>{t.stat===yc.PROXY?kc(uy,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===yc.NOPROXY&&kc(uy,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function dy(){return"undefined"!=typeof window?window:null}function fy(){return"undefined"!=typeof document?document:null}function py(e){return new dp(e,!0)}class gy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&kc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class my{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new gy(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Rc.RESOURCE_EXHAUSTED?(Cc(t.toString()),Cc("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Rc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Mc(Rc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return kc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(kc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yy extends my{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pc(void 0===t||"string"==typeof t),yh.fromBase64String(t||"")):(Pc(void 0===t||t instanceof Uint8Array),yh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Rc.UNKNOWN:Qf(e.code);return new Mc(t,e.message||"")}(o);n=new ip(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sp(e,r.document.name),s=yp(r.document.updateTime),o=r.document.createTime?yp(r.document.createTime):Jc.min(),a=new Hh({mapValue:{fields:r.document.fields}}),l=Xh.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new np(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sp(e,r.document),s=r.readTime?yp(r.readTime):Jc.min(),o=Xh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new np([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sp(e,r.document),s=r.removedTargetIds||[];n=new np([],s,i,null)}else{if(!("filter"in t))return Dc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Uf(r,i),o=e.targetId;n=new rp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Jc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Jc.min():t.readTime?yp(t.readTime):Jc.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Td(r)?{documents:Dp(e,r)}:{query:Pp(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gp(e,t.resumeToken);const r=fp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Jc.min())>0){n.readTime=pp(e,t.snapshotVersion.toTimestamp());const r=fp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.t_(t)}}class vy extends my{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Pc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Pc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?yp(e.updateTime):yp(t);return n.isEqual(Jc.min())&&(n=yp(t)),new Ef(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=yp(e.commitTime);return this.listener.T_(n,t)}return Pc(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Tp(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ap(this.serializer,e)))};this.t_(t)}}class wy extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Mc(Rc.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,wp(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mc(Rc.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,wp(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mc(Rc.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class by{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Cc(t),this.g_=!1):kc("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class _y{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Ny(this)&&(kc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Oc(e);t.v_.add(4),await Ey(t),t.x_.set("Unknown"),t.v_.delete(4),await Sy(t)}(this))}))})),this.x_=new by(n,r)}}async function Sy(e){if(Ny(e))for(const t of e.F_)await t(!0)}async function Ey(e){for(const t of e.F_)await t(!1)}function Iy(e,t){const n=Oc(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Ay(n)?Cy(n):Hy(n).Jo()&&xy(n,t))}function Ty(e,t){const n=Oc(e),r=Hy(n);n.C_.delete(t),r.Jo()&&ky(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Ny(n)&&n.x_.set("Unknown"))}function xy(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hy(e).c_(t)}function ky(e,t){e.O_.Oe(t),Hy(e).l_(t)}function Cy(e){e.O_=new op({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Hy(e).start(),e.x_.p_()}function Ay(e){return Ny(e)&&!Hy(e).Ho()&&e.C_.size>0}function Ny(e){return 0===Oc(e).v_.size}function Dy(e){e.O_=void 0}async function Py(e){e.C_.forEach(((t,n)=>{xy(e,t)}))}async function Oy(e,t){Dy(e),Ay(e)?(e.x_.S_(t),Cy(e)):e.x_.set("Unknown")}async function Ry(e,t,n){if(e.x_.set("Online"),t instanceof ip&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){kc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await My(e,n)}else if(t instanceof np?e.O_.$e(t):t instanceof rp?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Jc.min()))try{const t=await Vm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(yh.EMPTY_BYTE_STRING,r.snapshotVersion)),ky(e,t);const i=new qp(r.target,t,n,r.sequenceNumber);xy(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){kc("RemoteStore","Failed to raise snapshot:",t),await My(e,t)}}async function My(e,t,n){if(!bu(t))throw t;e.v_.add(1),await Ey(e),e.x_.set("Offline"),n||(n=()=>Vm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{kc("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Sy(e)}))}function Ly(e,t){return t().catch((n=>My(e,n,t)))}async function Fy(e){const t=Oc(e),n=Yy(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Vy(t);)try{const e=await zm(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,jy(t,e)}catch(e){await My(t,e)}zy(t)&&By(t)}function Vy(e){return Ny(e)&&e.D_.length<10}function jy(e,t){e.D_.push(t);const n=Yy(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function zy(e){return Ny(e)&&!Yy(e).Ho()&&e.D_.length>0}function By(e){Yy(e).start()}async function Uy(e){Yy(e).d_()}async function qy(e){const t=Yy(e);for(const n of e.D_)t.I_(n.mutations)}async function Ky(e,t,n){const r=e.D_.shift(),i=zf.from(r,t,n);await Ly(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Fy(e)}async function Gy(e,t){t&&Yy(e).P_&&await async function(e,t){if(function(e){return Gf(e)&&e!==Rc.ABORTED}(t.code)){const n=e.D_.shift();Yy(e).Zo(),await Ly(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fy(e)}}(e,t),zy(e)&&By(e)}async function Qy(e,t){const n=Oc(e);n.asyncQueue.verifyOperationInProgress(),kc("RemoteStore","RemoteStore received new credentials");const r=Ny(n);n.v_.add(3),await Ey(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Sy(n)}async function Wy(e,t){const n=Oc(e);t?(n.v_.delete(2),await Sy(n)):t||(n.v_.add(2),await Ey(n),n.x_.set("Unknown"))}function Hy(e){return e.N_||(e.N_=function(e,t,n){const r=Oc(e);return r.R_(),new yy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Py.bind(null,e),To:Oy.bind(null,e),u_:Ry.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Ay(e)?Cy(e):e.x_.set("Unknown")):(await e.N_.stop(),Dy(e))}))),e.N_}function Yy(e){return e.B_||(e.B_=function(e,t,n){const r=Oc(e);return r.R_(),new vy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Uy.bind(null,e),To:Gy.bind(null,e),E_:qy.bind(null,e),T_:Ky.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Fy(e)):(await e.B_.stop(),e.D_.length>0&&(kc("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Xy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Xy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mc(Rc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(e,t){if(Cc("AsyncQueue","".concat(t,": ").concat(e)),bu(e))return new Mc(Rc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Zy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||nu.comparator(t.key,n.key):(e,t)=>nu.comparator(e.key,t.key),this.keyedMap=Xd(),this.sortedSet=new ch(this.comparator)}static emptySet(e){return new Zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $y{constructor(){this.L_=new ch(nu.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Dc():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ev{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new ev(e,t,Zy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class tv{constructor(){this.q_=void 0,this.Q_=[]}}class nv{constructor(){this.queries=new Qd((e=>zd(e)),jd),this.onlineState="Unknown",this.K_=new Set}}async function rv(e,t){const n=Oc(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tv),i)try{s.q_=await n.onListen(r)}catch(e){const n=Jy(e,"Initialization of query '".concat(Bd(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&av(n)}async function iv(e,t){const n=Oc(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function sv(e,t){const n=Oc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&av(n)}function ov(e,t,n){const r=Oc(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function av(e){e.K_.forEach((e=>{e.next()}))}class lv{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ev(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class cv{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class uv{constructor(e){this.serializer=e}Ps(e){return Sp(this.serializer,e)}Is(e){return e.metadata.exists?Cp(this.serializer,e.document,!1):Xh.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return yp(e)}}class hv{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dv(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=$c.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new uv(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||rf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Oc(e);let s=rf(),o=Hd();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Bm(i,function(e){return Md(Dd($c.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>jm(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new uv(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Wm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function dv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class fv{constructor(e){this.key=e}}class pv{constructor(e){this.key=e}}class gv{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=rf(),this.mutatedKeys=rf(),this.ua=Kd(e),this.ca=new Zy(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new $y,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Ud(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||l&&this.ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dc()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new ev(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new $y,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=rf(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new pv(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new fv(n))})),t}Ra(e){this.oa=e.hs,this.aa=rf();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return ev.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class mv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yv{constructor(e){this.key=e,this.ma=!1}}class vv{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Qd((e=>zd(e)),jd),this.pa=new Map,this.ya=new Set,this.wa=new ch(nu.comparator),this.Sa=new Map,this.ba=new mm,this.Da={},this.Ca=new Map,this.va=Gg.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function wv(e,t){const n=Gv(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Bm(n.localStore,Md(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await bv(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Iy(n.remoteStore,e)}return i}async function bv(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await qm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Dv(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await qm(e.localStore,t,!0),o=new gv(t,s.hs),a=o.ha(s.documents),l=tp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Dv(e,n,c.da);const u=new mv(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function _v(e,t){const n=Oc(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!jd(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Um(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ty(n.remoteStore,r.targetId),Av(n,r.targetId)})).catch(pu)):(Av(n,r.targetId),await Um(n.localStore,r.targetId,!0))}async function Sv(e,t){const n=Oc(e);try{const e=await function(e,t){const n=Oc(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(yh.EMPTY_BYTE_STRING,Jc.min()).withLastLimboFreeSnapshotVersion(Jc.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=Hd(),l=rf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(jm(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Jc.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return gu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Pc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Pc(r.ma):e.removedDocuments.size>0&&(Pc(r.ma),r.ma=!1))})),await Rv(n,e,t)}catch(e){await pu(e)}}function Ev(e,t,n){const r=Oc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Oc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&av(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Iv(e,t,n){const r=Oc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new ch(nu.comparator);e=e.insert(s,Xh.newNoDocument(s,Jc.min()));const n=rf().add(s),i=new ep(Jc.min(),new Map,new ch(Wc),e,n);await Sv(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Ov(r)}else await Um(r.localStore,t,!1).then((()=>Av(r,t,n))).catch(pu)}async function Tv(e,t){const n=Oc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=gu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Pc(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Cv(n,r,null),kv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rv(n,e)}catch(e){await pu(e)}}async function xv(e,t,n){const r=Oc(e);try{const e=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Cv(r,t,n),kv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rv(r,e)}catch(n){await pu(n)}}function kv(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Cv(e,t,n){const r=Oc(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Av(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Nv(e,t)}))}function Nv(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Ty(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Ov(e))}function Dv(e,t,n){for(const r of n)r instanceof fv?(e.ba.addReference(r.key,t),Pv(e,r)):r instanceof pv?(kc("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Nv(e,r.key)):Dc()}function Pv(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(kc("SyncEngine","New document in limbo: "+n),e.ya.add(r),Ov(e))}function Ov(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new nu($c.fromString(t)),r=e.va.next();e.Sa.set(r,new yv(n)),e.wa=e.wa.insert(n,r),Iy(e.remoteStore,new qp(Md(Dd(n.path)),r,"TargetPurposeLimboResolution",ku._e))}}async function Rv(e,t,n){const r=Oc(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Pm.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Oc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>gu.forEach(t,(t=>gu.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>gu.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!bu(e))throw e;kc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Mv(e,t){const n=Oc(e);if(!n.currentUser.isEqual(t)){kc("SyncEngine","User change. New user:",t.toKey());const e=await Fm(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Mc(Rc.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Rv(n,e.us)}}function Lv(e,t){const n=Oc(e),r=n.Sa.get(t);if(r&&r.ma)return rf().add(r.key);{let e=rf();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Fv(e,t){const n=Oc(e),r=await qm(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Dv(n,t.targetId,i.da),i}async function Vv(e,t){const n=Oc(e);return Gm(n.localStore,t).then((e=>Rv(n,e)))}async function jv(e,t,n,r){const i=Oc(e),s=await function(e,t){const n=Oc(e),r=Oc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):gu.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Fy(i.remoteStore):"acknowledged"===n||"rejected"===n?(Cv(i,t,r||null),kv(i,t),function(e,t){Oc(Oc(e).mutationQueue).Mn(t)}(i.localStore,t)):Dc(),await Rv(i,s)):kc("SyncEngine","Cannot apply mutation batch with id: "+t)}async function zv(e,t,n){const r=Oc(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Bm(r.localStore,Md(t[0]));for(const e of t){const t=r.ga.get(e),n=await Fv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Km(r.localStore,o);e=await Bm(r.localStore,t),await bv(r,Bv(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Bv(e){return Nd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Uv(e){return function(e){return Oc(Oc(e).persistence).Li()}(Oc(e).localStore)}async function qv(e,t,n,r){const i=Oc(e);if(i.Fa)return void kc("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Gm(i.localStore,qd(s[0])),r=ep.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,yh.EMPTY_BYTE_STRING);await Rv(i,e,r);break}case"rejected":await Um(i.localStore,t,!0),Av(i,t,r);break;default:Dc()}}async function Kv(e,t,n){const r=Gv(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){kc("SyncEngine","Adding an already active target "+e);continue}const t=await Km(r.localStore,e),n=await Bm(r.localStore,t);await bv(r,Bv(t),n.targetId,!1,n.resumeToken),Iy(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Um(r.localStore,e,!1).then((()=>{Ty(r.remoteStore,e),Av(r,e)})).catch(pu)}}function Gv(e){const t=Oc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Iv.bind(null,t),t.fa.u_=sv.bind(null,t.eventManager),t.fa.xa=ov.bind(null,t.eventManager),t}function Qv(e){const t=Oc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xv.bind(null,t),t}class Wv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=py(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Lm(this.persistence,new Rm,e.initialUser,this.serializer)}createPersistence(e){return new Sm(Im.Hr,this.serializer)}createSharedClientState(e){return new ry}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hv extends Wv{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Qv(this.Na.syncEngine),await Fy(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Lm(this.persistence,new Rm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Zg(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new xu(t,this.persistence);return new Tu(e.asyncQueue,n)}createPersistence(e){const t=Dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fg.withCacheSize(this.cacheSizeBytes):Fg.DEFAULT;return new Cm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dy(),fy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ry}}class Yv extends Hv{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof ny&&(this.sharedClientState.syncEngine={Zs:jv.bind(null,t),Xs:qv.bind(null,t),eo:Kv.bind(null,t),Li:Uv.bind(null,t),Ys:Vv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Oc(e);if(Gv(n),Qv(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await zv(n,e.toArray());n.Fa=!0,await Wy(n.remoteStore,!0);for(const r of t)Iy(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Av(n,i),Um(n.localStore,i,!0)))),Ty(n.remoteStore,i)})),await t,await zv(n,e),function(e){const t=Oc(e);t.Sa.forEach(((e,n)=>{Ty(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new ch(nu.comparator)}(n),n.Fa=!1,await Wy(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=dy();if(!ny.D(t))throw new Mc(Rc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ny(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Xv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ev(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mv.bind(null,this.syncEngine),await Wy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nv}createDatastore(e){const t=py(e.databaseInfo.databaseId),n=function(e){return new hy(e)}(e.databaseInfo);return function(e,t,n,r){return new wy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _y(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ev(this.syncEngine,e,0)),sy.D()?new sy:new iy)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new vv(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Oc(e);kc("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Ey(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Jv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Cc("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class $v{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Lc,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new cv(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class ew{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Mc(Rc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Oc(e),r={documents:t.map((e=>_p(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,$c.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Pc(!!t.found),t.found.name,t.found.updateTime;const n=Sp(e,t.found.name),r=yp(t.found.updateTime),i=t.found.createTime?yp(t.found.createTime):Jc.min(),s=new Hh({mapValue:{fields:t.found.fields}});return Xh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Pc(!!t.missing),Pc(!!t.readTime);const n=Sp(e,t.missing),r=yp(t.readTime);return Xh.newNoDocument(n,r)}(e,t):Dc()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Pc(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ff(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=nu.fromPath(t);this.mutations.push(new Vf(n,this.precondition(n)))})),await async function(e,t){const n=Oc(e),r={writes:t.map((e=>Ap(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,$c.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dc();t=Jc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Mc(Rc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jc.min())?If.exists(!1):If.updateTime(t):If.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jc.min()))throw new Mc(Rc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return If.updateTime(t)}return If.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new gy(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new ew(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Cu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Gf(t)}return!1}}class nw{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ec.UNAUTHENTICATED,this.clientId=Qc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{kc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(kc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mc(Rc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Jy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function rw(e,t){e.asyncQueue.verifyOperationInProgress(),kc("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Fm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function iw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ow(e);kc("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Qy(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Qy(t.remoteStore,n))),e._onlineComponents=t}function sw(e){return"FirebaseError"===e.name?e.code===Rc.FAILED_PRECONDITION||e.code===Rc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ow(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kc("FirestoreClient","Using user provided OfflineComponentProvider");try{await rw(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!sw(n))throw n;Ac("Error using user provided cache. Falling back to memory cache: "+n),await rw(e,new Wv)}}else kc("FirestoreClient","Using default OfflineComponentProvider"),await rw(e,new Wv);return e._offlineComponents}async function aw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kc("FirestoreClient","Using user provided OnlineComponentProvider"),await iw(e,e._uninitializedComponentsProvider._online)):(kc("FirestoreClient","Using default OnlineComponentProvider"),await iw(e,new Xv))),e._onlineComponents}function lw(e){return ow(e).then((e=>e.persistence))}function cw(e){return ow(e).then((e=>e.localStore))}function uw(e){return aw(e).then((e=>e.remoteStore))}function hw(e){return aw(e).then((e=>e.syncEngine))}function dw(e){return aw(e).then((e=>e.datastore))}async function fw(e){const t=await aw(e),n=t.eventManager;return n.onListen=wv.bind(null,t.syncEngine),n.onUnlisten=_v.bind(null,t.syncEngine),n}function pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Zv({next:s=>{t.enqueueAndForget((()=>iv(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Mc(Rc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Mc(Rc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new lv(Dd(n.path),s,{includeMetadataChanges:!0,Z_:!0});return rv(e,o)}(await fw(e),e.asyncQueue,t,n,r))),r.promise}function gw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Zv({next:n=>{t.enqueueAndForget((()=>iv(e,o))),n.fromCache&&"server"===r.source?i.reject(new Mc(Rc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new lv(n,s,{includeMetadataChanges:!0,Z_:!0});return rv(e,o)}(await fw(e),e.asyncQueue,t,n,r))),r.promise}function mw(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Hf().encode(e):e,function(e,t){return new $v(e,t)}(function(e,t){if(e instanceof Uint8Array)return Jv(e,t);if(e instanceof ArrayBuffer)return Jv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,py(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Oc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Oc(e),r=yp(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(dv(r));const i=new hv(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await Rv(e,o.sa,void 0),await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return Ac("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await hw(e),i,r)}))}function yw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const vw=new Map;function ww(e,t,n){if(!n)throw new Mc(Rc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bw(e,t,n,r){if(!0===t&&!0===r)throw new Mc(Rc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _w(e){if(!nu.isDocumentKey(e))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sw(e){if(nu.isDocumentKey(e))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ew(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Dc()}function Iw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mc(Rc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ew(e);throw new Mc(Rc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Tw(e,t){if(t<=0)throw new Mc(Rc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class xw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Mc(Rc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Mc(Rc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Mc(Rc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Mc(Rc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Mc(Rc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mc(Rc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Mc(Rc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vc;switch(e.type){case"firstParty":return new Uc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mc(Rc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vw.get(e);t&&(kc("ComponentProvider","Removing Datastore"),vw.delete(e),t.terminate())}(this),Promise.resolve()}}function Cw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Iw(e,kw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ec.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[kt(JSON.stringify({alg:"none",type:"JWT"})),kt(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Mc(Rc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ec(s)}e._authCredentials=new jc(new Fc(t,n))}}class Aw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Aw(this.firestore,e,this._query)}}class Nw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nw(this.firestore,e,this._key)}}class Dw extends Aw{constructor(e,t,n){super(e,t,Dd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nw(this.firestore,null,new nu(e))}withConverter(e){return new Dw(this.firestore,e,this._path)}}function Pw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=en(e),ww("collection","path",t),e instanceof kw){const n=$c.fromString(t,...r);return Sw(n),new Dw(e,null,n)}{if(!(e instanceof Nw||e instanceof Dw))throw new Mc(Rc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($c.fromString(t,...r));return Sw(n),new Dw(e.firestore,null,n)}}function Ow(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=en(e),1===arguments.length&&(t=Qc.newId()),ww("doc","path",t),e instanceof kw){const n=$c.fromString(t,...r);return _w(n),new Nw(e,null,new nu(n))}{if(!(e instanceof Nw||e instanceof Dw))throw new Mc(Rc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($c.fromString(t,...r));return _w(n),new Nw(e.firestore,e instanceof Dw?e.converter:null,new nu(n))}}function Rw(e,t){return e=en(e),t=en(t),(e instanceof Nw||e instanceof Dw)&&(t instanceof Nw||t instanceof Dw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Mw(e,t){return e=en(e),t=en(t),e instanceof Aw&&t instanceof Aw&&e.firestore===t.firestore&&jd(e._query,t._query)&&e.converter===t.converter}class Lw{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new gy(this,"async_queue_retry"),this._u=()=>{const e=fy();e&&kc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=fy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=fy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Lc;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!bu(e))throw e;kc("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Xy.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Dc()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Fw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Vw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jw extends kw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bw(this),this._firestoreClient.terminate()}}function zw(e){return e._firestoreClient||Bw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bw(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Th(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yw(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new nw(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Uw(e,t,n){const r=new Lc;return e.asyncQueue.enqueue((async()=>{try{await rw(e,n),await iw(e,t),r.resolve()}catch(e){const n=e;if(!sw(n))throw n;Ac("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function qw(e){return function(e){const t=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Oc(e);Ny(n.remoteStore)||kc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Oc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Jy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await hw(e),t))),t.promise}(zw(e=Iw(e,jw)))}function Kw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lw(e),n=await uw(e);return t.setNetworkEnabled(!0),function(e){const t=Oc(e);return t.v_.delete(0),Sy(t)}(n)}))}(zw(e=Iw(e,jw)))}function Gw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lw(e),n=await uw(e);return t.setNetworkEnabled(!1),async function(e){const t=Oc(e);t.v_.add(0),await Ey(t),t.x_.set("Offline")}(n)}))}(zw(e=Iw(e,jw)))}function Qw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Oc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await cw(e),t)))}(zw(e=Iw(e,jw)),t).then((t=>t?new Aw(e,null,t.query):null))}function Ww(e){if(e._initialized||e._terminated)throw new Mc(Rc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hw(yh.fromBase64String(e))}catch(e){throw new Mc(Rc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hw(yh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xw{constructor(e){this._methodName=e}}class Jw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mc(Rc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mc(Rc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wc(this._lat,e._lat)||Wc(this._long,e._long)}}const Zw=/^__.*__$/;class $w{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Of(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pf(e,this.data,t,this.fieldTransforms)}}class eb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Of(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dc()}}class nb{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new nb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Sb(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(tb(this.du)&&Zw.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class rb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||py(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new nb({du:e,methodName:t,wu:n,path:tu.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ib(e){const t=e._freezeSettings(),n=py(e._databaseId);return new rb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sb(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);vb("Data must be an object, but it was:",o,r);const a=mb(r,o);let l,c;if(s.merge)l=new gh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=wb(t,r,n);if(!o.contains(i))throw new Mc(Rc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Eb(e,i)||e.push(i)}l=new gh(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new $w(new Hh(a),l,c)}class ob extends Xw{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ob}}function ab(e,t,n){return new nb({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lb extends Xw{_toFieldTransform(e){return new Sf(e.path,new pf)}isEqual(e){return e instanceof lb}}class cb extends Xw{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=ab(this,e,!0),n=this.bu.map((e=>gb(e,t))),r=new gf(n);return new Sf(e.path,r)}isEqual(e){return e instanceof cb&&Kt(this.bu,e.bu)}}class ub extends Xw{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=ab(this,e,!0),n=this.bu.map((e=>gb(e,t))),r=new yf(n);return new Sf(e.path,r)}isEqual(e){return e instanceof ub&&Kt(this.bu,e.bu)}}class hb extends Xw{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new wf(e.serializer,cf(e.serializer,this.Du));return new Sf(e.path,t)}isEqual(e){return e instanceof hb&&this.Du===e.Du}}function db(e,t,n,r){const i=e.Su(1,t,n);vb("Data must be an object, but it was:",i,r);const s=[],o=Hh.empty();ah(r,((e,r)=>{const a=_b(t,e,n);r=en(r);const l=i.fu(a);if(r instanceof ob)s.push(a);else{const e=gb(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new gh(s);return new eb(o,a,i.fieldTransforms)}function fb(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[wb(t,r,n)],l=[i];if(s.length%2!=0)throw new Mc(Rc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(wb(t,s[d])),l.push(s[d+1]);const c=[],u=Hh.empty();for(let d=a.length-1;d>=0;--d)if(!Eb(c,a[d])){const e=a[d];let t=l[d];t=en(t);const n=o.fu(e);if(t instanceof ob)c.push(e);else{const r=gb(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new gh(c);return new eb(u,h,o.fieldTransforms)}function pb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gb(n,e.Su(r?4:3,t))}function gb(e,t){if(yb(e=en(e)))return vb("Unsupported field value:",t,e),mb(e,t);if(e instanceof Xw)return function(e,t){if(!tb(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gb(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=en(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xc.fromDate(e);return{timestampValue:pp(t.serializer,n)}}if(e instanceof Xc){const n=new Xc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pp(t.serializer,n)}}if(e instanceof Jw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hw)return{bytesValue:gp(t.serializer,e._byteString)};if(e instanceof Nw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:vp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Ew(e)))}(e,t)}function mb(e,t){const n={};return lh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ah(e,((e,r)=>{const i=gb(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xc||e instanceof Jw||e instanceof Hw||e instanceof Nw||e instanceof Xw)}function vb(e,t,n){if(!yb(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ew(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function wb(e,t,n){if((t=en(t))instanceof Yw)return t._internalPath;if("string"==typeof t)return _b(e,t);throw Sb("Field path arguments must be of type string or ",e,!1,void 0,n)}const bb=new RegExp("[~\\*/\\[\\]]");function _b(e,t,n){if(t.search(bb)>=0)throw Sb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Yw(...t.split("."))._internalPath}catch(gs){throw Sb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sb(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Mc(Rc.INVALID_ARGUMENT,a+e+l)}function Eb(e,t){return e.some((e=>e.isEqual(t)))}class Ib{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tb extends Ib{data(){return super.data()}}function xb(e,t){return"string"==typeof t?_b(e,t):t instanceof Yw?t._internalPath:t._delegate._internalPath}function kb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Mc(Rc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cb{}class Ab extends Cb{}function Nb(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Cb&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Pb)).length,n=e.filter((e=>e instanceof Db)).length;if(t>1||t>0&&n>0)throw new Mc(Rc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Db extends Ab{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Db(e,t,n)}_apply(e){const t=this._parse(e);return zb(e._query,t),new Aw(e.firestore,e.converter,Fd(e._query,t))}_parse(e){const t=ib(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){jb(o,s);const t=[];for(const n of o)t.push(Vb(r,e,n));a={arrayValue:{values:t}}}else a=Vb(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||jb(o,s),a=pb(n,t,o,"in"===s||"not-in"===s);return rd.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Pb extends Cb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pb(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:id.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)zb(n,i),n=Fd(n,i)}(e._query,t),new Aw(e.firestore,e.converter,Fd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ob extends Ab{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ob(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(t,n)}(e._query,this._field,this._direction);return new Aw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ad(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Rb extends Ab{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Rb(e,t,n)}_apply(e){return new Aw(e.firestore,e.converter,Vd(e._query,this._limit,this._limitType))}}class Mb extends Ab{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Mb(e,t,n)}_apply(e){const t=Fb(e,this.type,this._docOrFields,this._inclusive);return new Aw(e.firestore,e.converter,function(e,t){return new Ad(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Lb extends Ab{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Lb(e,t,n)}_apply(e){const t=Fb(e,this.type,this._docOrFields,this._inclusive);return new Aw(e.firestore,e.converter,function(e,t){return new Ad(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Fb(e,t,n,r){if(n[0]=en(n[0]),n[0]instanceof Ib)return function(e,t,n,r,i){if(!r)throw new Mc(Rc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Rd(e))if(o.field.isKeyField())s.push(Lh(t,r.key));else{const e=r.data.field(o.field);if(Sh(e))throw new Mc(Rc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Jh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ib(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Mc(Rc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Od(e)&&-1!==s.indexOf("/"))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child($c.fromString(s));if(!nu.isDocumentKey(n))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new nu(n);a.push(Lh(t,i))}else{const e=pb(n,r,s);a.push(e)}}return new Jh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Vb(e,t,n){if("string"==typeof(n=en(n))){if(""===n)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Od(t)&&-1!==n.indexOf("/"))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child($c.fromString(n));if(!nu.isDocumentKey(r))throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Lh(e,new nu(r))}if(n instanceof Nw)return Lh(e,n._key);throw new Mc(Rc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ew(n),"."))}function jb(e,t){if(!Array.isArray(e)||0===e.length)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function zb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Mc(Rc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Mc(Rc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Bb{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_h(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ah(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Jw(bh(e.latitude),bh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Eh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ih(e));default:return null}}convertTimestamp(e){const t=wh(e);return new Xc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$c.fromString(e);Pc(Up(n));const r=new xh(n.get(1),n.get(3)),i=new nu(n.popFirst(5));return r.isEqual(t)||Cc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ub(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qb extends Bb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nw(this.firestore,null,t)}}class Kb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gb extends Ib{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Qb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Qb extends Gb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Wb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Kb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Qb(this._firestore,this._userDataWriter,n.key,n,new Kb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mc(Rc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Qb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Kb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Qb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Hb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dc()}}function Yb(e,t){return e instanceof Gb&&t instanceof Gb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wb&&t instanceof Wb&&e._firestore===t._firestore&&Mw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Xb extends Bb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nw(this.firestore,null,t)}}function Jb(e){e=Iw(e,Nw);const t=Iw(e.firestore,jw),n=zw(t),r=new Xb(t);return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Mc(Rc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Jy(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await cw(e),t,n))),n.promise}(n,e._key).then((n=>new Gb(t,r,e._key,n,new Kb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Zb(e){e=Iw(e,Aw);const t=Iw(e.firestore,jw),n=zw(t),r=new Xb(t);return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await qm(e,t,!0),i=new gv(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Jy(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await cw(e),t,n))),n.promise}(n,e._query).then((n=>new Wb(t,r,e,n)))}function $b(e,t,n){e=Iw(e,Nw);const r=Iw(e.firestore,jw),i=Ub(e.converter,t,n);return r_(r,[sb(ib(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,If.none())])}function e_(e,t,n){e=Iw(e,Nw);const r=Iw(e.firestore,jw),i=ib(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=en(t))||t instanceof Yw?fb(i,"updateDoc",e._key,t,n,a):db(i,"updateDoc",e._key,t),r_(r,[s.toMutation(e._key,If.exists(!0))])}function t_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=en(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Fw(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Fw(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Nw)h=Iw(e.firestore,jw),d=Dd(e._key.path),u={next:t=>{n[l]&&n[l](i_(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Iw(e,Aw);h=Iw(t.firestore,jw),d=t._query;const r=new Xb(h);u={next:e=>{n[l]&&n[l](new Wb(h,r,t,e))},error:n[l+1],complete:n[l+2]},kb(e._query)}return function(e,t,n,r){const i=new Zv(r),s=new lv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>rv(await fw(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>iv(await fw(e),s)))}}(zw(h),d,c,u)}function n_(e,t){return function(e,t){const n=new Zv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oc(e).K_.add(t),t.next()}(await fw(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oc(e).K_.delete(t)}(await fw(e),n)))}}(zw(e=Iw(e,jw)),Fw(t)?t:{next:t})}function r_(e,t){return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Qv(e);try{const e=await function(e,t){const n=Oc(e),r=Xc.now(),i=t.reduce(((e,t)=>e.add(t.key)),rf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Hd(),l=rf();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Nf(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Of(e.key,t,Yh(t.value.mapValue),If.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Jd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new ch(Wc)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Rv(r,e.changes),await Fy(r.remoteStore)}catch(e){const t=Jy(e,"Failed to persist write");n.reject(t)}}(await hw(e),t,n))),n.promise}(zw(e),t)}function i_(e,t,n){const r=n.docs.get(t._key),i=new Xb(e);return new Gb(e,i,t._key,r,new Kb(n.hasPendingWrites,n.fromCache),t.converter)}const s_={maxAttempts:5};class o_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ib(e)}set(e,t,n){this._verifyNotCommitted();const r=a_(e,this._firestore),i=Ub(r.converter,t,n),s=sb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,If.none())),this}update(e,t,n){this._verifyNotCommitted();const r=a_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=en(t))||t instanceof Yw?fb(this._dataReader,"WriteBatch.update",r._key,t,n,o):db(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,If.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=a_(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(t._key,If.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mc(Rc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function a_(e,t){if((e=en(e)).firestore!==t)throw new Mc(Rc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class l_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ib(e)}get(e){const t=a_(e,this._firestore),n=new qb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Dc();const r=e[0];if(r.isFoundDocument())return new Ib(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ib(this._firestore,n,t._key,null,t.converter);throw Dc()}))}set(e,t,n){const r=a_(e,this._firestore),i=Ub(r.converter,t,n),s=sb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=a_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=en(t))||t instanceof Yw?fb(this._dataReader,"Transaction.update",r._key,t,n,o):db(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=a_(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=a_(e,this._firestore),n=new Xb(this._firestore);return super.get(e).then((e=>new Gb(this._firestore,n,t._key,e._document,new Kb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ic=e}(Wn),Bn(new tn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new jw(new zc(e.getProvider("auth-internal")),new Kc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mc(Rc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zn(Sc,"4.4.3",e),Zn(Sc,"4.4.3","esm2017")}();function c_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function u_(){if("undefined"===typeof Uint8Array)throw new Mc("unimplemented","Uint8Arrays are not available in this environment.")}function h_(){if("undefined"==typeof atob)throw new Mc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class d_{constructor(e){this._delegate=e}static fromBase64String(e){return h_(),new d_(Hw.fromBase64String(e))}static fromUint8Array(e){return u_(),new d_(Hw.fromUint8Array(e))}toBase64(){return h_(),this._delegate.toBase64()}toUint8Array(){return u_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function f_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class p_{enableIndexedDbPersistence(e,t){return function(e,t){Ww(e=Iw(e,jw));const n=zw(e);if(n._uninitializedComponentsProvider)throw new Mc(Rc.FAILED_PRECONDITION,"SDK cache is already specified.");Ac("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Xv;return Uw(n,i,new Hv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Ww(e=Iw(e,jw));const t=zw(e);if(t._uninitializedComponentsProvider)throw new Mc(Rc.FAILED_PRECONDITION,"SDK cache is already specified.");Ac("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Xv;return Uw(t,r,new Yv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Mc(Rc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Lc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!yu.D())return Promise.resolve();const t=e+"main";await yu.delete(t)}(Dm(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class g_{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof xh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ac("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cw(this._delegate,e,t,n)}enableNetwork(){return Kw(this._delegate)}disableNetwork(){return Gw(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,bw("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qw(this._delegate)}onSnapshotsInSync(e){return n_(this._delegate,e)}get app(){if(!this._appCompat)throw new Mc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new A_(this,Pw(this._delegate,e))}catch(t){throw __(t,"collection()","Firestore.collection()")}}doc(e){try{return new b_(this,Ow(this._delegate,e))}catch(t){throw __(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new x_(this,function(e,t){if(e=Iw(e,kw),ww("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mc(Rc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Aw(e,null,function(e){return new Ad($c.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw __(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Iw(e,jw);const r=Object.assign(Object.assign({},s_),n);return function(e){if(e.maxAttempts<1)throw new Mc(Rc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await dw(e);new tw(e.asyncQueue,i,n,t,r).ja()})),r.promise}(zw(e),(n=>t(new l_(e,n))),r)}(this._delegate,(t=>e(new y_(this,t))))}batch(){return zw(this._delegate),new v_(new o_(this._delegate,(e=>r_(this._delegate,e))))}loadBundle(e){return function(e,t){const n=zw(e=Iw(e,jw)),r=new Vw;return mw(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Qw(this._delegate,e).then((e=>e?new x_(this,e):null))}}class m_ extends Bb{constructor(e){super(),this.firestore=e}convertBytes(e){return new d_(new Hw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return b_.forKey(t,this.firestore,null)}}class y_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new m_(e)}get(e){const t=N_(e);return this._delegate.get(t).then((e=>new I_(this._firestore,new Gb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=N_(e);return n?(c_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=N_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=N_(e);return this._delegate.delete(t),this}}class v_{constructor(e){this._delegate=e}set(e,t,n){const r=N_(e);return n?(c_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=N_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=N_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class w_{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Qb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T_(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=w_.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new w_(e,new m_(e),t),r.set(t,i)),i}}w_.INSTANCES=new WeakMap;class b_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new m_(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Mc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new b_(t,new Nw(t._delegate,n,new nu(e)))}static forKey(e,t,n){return new b_(t,new Nw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new A_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new A_(this.firestore,Pw(this._delegate,e))}catch(t){throw __(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=en(e))instanceof Nw&&Rw(this._delegate,e)}set(e,t){t=c_("DocumentReference.set",t);try{return t?$b(this._delegate,e,t):$b(this._delegate,e)}catch(n){throw __(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?e_(this._delegate,e):e_(this._delegate,e,t,...r)}catch(s){throw __(s,"updateDoc()","DocumentReference.update()")}}delete(){return r_(Iw((e=this._delegate).firestore,jw),[new Ff(e._key,If.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=S_(t),i=E_(t,(e=>new I_(this.firestore,new Gb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return t_(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Jb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Iw(e,Nw);const t=Iw(e.firestore,jw);return pw(zw(t),e._key,{source:"server"}).then((n=>i_(t,e,n)))}(this._delegate):function(e){e=Iw(e,Nw);const t=Iw(e.firestore,jw);return pw(zw(t),e._key).then((n=>i_(t,e,n)))}(this._delegate),t.then((e=>new I_(this.firestore,new Gb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new b_(this.firestore,e?this._delegate.withConverter(w_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function __(e,t,n){return e.message=e.message.replace(t,n),e}function S_(e){for(const t of e)if("object"===typeof t&&!f_(t))return t;return{}}function E_(e,t){var n,r;let i;return i=f_(e[0])?e[0]:f_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class I_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new b_(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yb(this._delegate,e._delegate)}}class T_ extends I_{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Dc(),t}}class x_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new m_(e)}where(e,t,n){try{return new x_(this.firestore,Nb(this._delegate,function(e,t,n){const r=t,i=xb("where",e);return Db._create(i,r,n)}(e,t,n)))}catch(r){throw __(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new x_(this.firestore,Nb(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xb("orderBy",e);return Ob._create(n,t)}(e,t)))}catch(n){throw __(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new x_(this.firestore,Nb(this._delegate,(Tw("limit",t=e),Rb._create("limit",t,"F"))))}catch(t){throw __(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new x_(this.firestore,Nb(this._delegate,(Tw("limitToLast",t=e),Rb._create("limitToLast",t,"L"))))}catch(t){throw __(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new x_(this.firestore,Nb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mb._create("startAt",t,!0)}(...arguments)))}catch(e){throw __(e,"startAt()","Query.startAt()")}}startAfter(){try{return new x_(this.firestore,Nb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mb._create("startAfter",t,!1)}(...arguments)))}catch(e){throw __(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new x_(this.firestore,Nb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lb._create("endBefore",t,!1)}(...arguments)))}catch(e){throw __(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new x_(this.firestore,Nb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lb._create("endAt",t,!0)}(...arguments)))}catch(e){throw __(e,"endAt()","Query.endAt()")}}isEqual(e){return Mw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Zb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Iw(e,Aw);const t=Iw(e.firestore,jw),n=zw(t),r=new Xb(t);return gw(n,e._query,{source:"server"}).then((n=>new Wb(t,r,e,n)))}(this._delegate):function(e){e=Iw(e,Aw);const t=Iw(e.firestore,jw),n=zw(t),r=new Xb(t);return kb(e._query),gw(n,e._query).then((n=>new Wb(t,r,e,n)))}(this._delegate),t.then((e=>new C_(this.firestore,new Wb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=S_(t),i=E_(t,(e=>new C_(this.firestore,new Wb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return t_(this._delegate,r,i)}withConverter(e){return new x_(this.firestore,e?this._delegate.withConverter(w_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class k_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class C_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new x_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new T_(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new k_(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new T_(this._firestore,n))}))}isEqual(e){return Yb(this._delegate,e._delegate)}}class A_ extends x_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new b_(this.firestore,e):null}doc(e){try{return new b_(this.firestore,void 0===e?Ow(this._delegate):Ow(this._delegate,e))}catch(t){throw __(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Iw(e.firestore,jw),r=Ow(e),i=Ub(e.converter,t);return r_(n,[sb(ib(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,If.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new b_(this.firestore,e)))}isEqual(e){return Rw(this._delegate,e._delegate)}withConverter(e){return new A_(this.firestore,e?this._delegate.withConverter(w_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function N_(e){return Iw(e,Nw)}class D_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Yw(...t)}static documentId(){return new D_(tu.keyField().canonicalString())}isEqual(e){return(e=en(e))instanceof Yw&&this._delegate._internalPath.isEqual(e._internalPath)}}class P_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new lb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new P_(e)}static delete(){const e=new ob("deleteField");return e._methodName="FieldValue.delete",new P_(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cb("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new P_(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ub("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new P_(e)}static increment(e){const t=new hb("increment",e);return t._methodName="FieldValue.increment",new P_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const O_={Firestore:g_,GeoPoint:Jw,Timestamp:Xc,Blob:d_,Transaction:y_,WriteBatch:v_,DocumentReference:b_,DocumentSnapshot:I_,Query:x_,QueryDocumentSnapshot:T_,QuerySnapshot:C_,CollectionReference:A_,FieldPath:D_,FieldValue:P_,setLogLevel:function(e){var t;t=e,Tc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var R_;(function(e,t){e.INTERNAL.registerComponent(new tn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},O_)))})(R_=yr,((e,t)=>new g_(e,t,new p_))),R_.registerVersion("@firebase/firestore-compat","0.3.26");const M_=yr.initializeApp({apiKey:"AIzaSyCPYZS7BZ56en6ijZcmOyg28BhWJ-GOkYw",authDomain:"train-to-cloud-city-5.firebaseapp.com",projectId:"train-to-cloud-city-5",storageBucket:"train-to-cloud-city-5.appspot.com",messagingSenderId:"1016980810684",appId:"1:1016980810684:web:c70a094fff44ef39ca19b9",measurementId:"G-TN9ZESGEWG"}),L_={app:M_,analytics:yr.analytics(M_),db:yr.firestore()},F_=ot("getWorldState",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";const t=L_.db.collection(e),n=await t.get();let r={};return n.docs.forEach((e=>r[e.id]=e.data())),{state:r}})),V_=ot("getServices",(async()=>{const e=L_.db.collection("services"),t=await e.get().then((e=>{let t=[];return e.docs.forEach((e=>t.push("".concat(e.id)))),t}));return{services:t}})),j_=ot("getPatterns",(async()=>{const e=L_.db.collection("patterns"),t=await e.get().then((e=>{let t=[];return e.docs.forEach((e=>t.push(e.data()))),t}));return{patterns:t}})),z_=(ot("updateCargo",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("cargo");try{await n.update({actual_cargo:e})}catch(r){console.error(r)}})),ot("stopMission",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";const t=L_.db.collection(e).doc("cargo"),n=L_.db.collection(e).doc("proposal");return Promise.all([t.update({actual_cargo:[]}),n.update({pattern_slug:""})])}))),B_=async e=>{const t=L_.db.collection("global").doc("input_mailbox");try{await t.update({input:e})}catch(n){console.error(n)}},U_={services:[],patterns:[],worldState:[]},q_=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new Ge;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(ze):s.push(Be(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!Me(n))throw new Error(Et(1));a=Fe(n)}l="function"===typeof r?r(t):t();let c=Ve;i&&(c=Ue({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(De(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=Ve(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=Je(u);let d="function"===typeof o?o(h):h();return Le(a,s,c(...d))}({reducer:{coreReducer:ht({name:"core",initialState:U_,extraReducers:e=>{e.addCase(F_.fulfilled,((e,t)=>{var n;return e.worldState=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.state,e})).addCase(V_.fulfilled,((e,t)=>{var n;return e.services=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.services,e})).addCase(j_.fulfilled,((e,t)=>{var n;return e.patterns=null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.patterns,e})).addDefaultCase(((e,t)=>U_))}}).reducer},middleware:e=>e()}),K_=q_;var G_=n(184);const Q_=e=>{const{cargo:t,proposalResult:n,trainMailbox:r}=e;return(0,G_.jsx)("div",{className:"controlPanelContainer",children:(0,G_.jsx)("div",{className:"controlPanelWrapper",children:(0,G_.jsxs)("div",{className:"controlPanel",children:[(0,G_.jsxs)("div",{className:"sessionMailbox",children:[(0,G_.jsx)("h3",{children:" Current Train Cloud Cargo: "}),null!==t&&void 0!==t&&t.actual_cargo.length?(0,G_.jsx)("p",{children:JSON.stringify(null===t||void 0===t?void 0:t.actual_cargo)}):"Waiting for cargo to be loaded..."]}),(0,G_.jsxs)("div",{className:"sessionMailbox",children:[(0,G_.jsx)("h3",{children:" Proposal Result: "}),n?(0,G_.jsx)("p",{children:JSON.stringify(null===n||void 0===n?void 0:n.reason)}):"Waiting to process cargo ..."]}),(0,G_.jsxs)("div",{className:"trainMailbox",children:[(0,G_.jsx)("h3",{children:" Train: "}),null!==r&&void 0!==r&&r.input?(0,G_.jsx)("p",{children:null===r||void 0===r?void 0:r.input}):"Waiting for train events ..."]})]})})})};const W_=n.p+"static/media/signal-green.6db668a038c003788a6a8a76d3ded8ff.svg";const H_=n.p+"static/media/signal-off.7f2315b233ff01c4ea24f672ae935e3b.svg";const Y_=n.p+"static/media/signal-red.8b1665df96da36dd66fe087fff9cd6b4.svg",X_=e=>{const{isStation:t,trainLocation:n,signal:r,showTrainLocation:i=!0}=e,{slug:s,target_state:o}=r||{},a=t?"station":s,l="four"===s?"circle":"circle connector",c=n===a?l.concat(" here"):l;let u;switch(o){case"stop":u=(0,G_.jsx)("img",{alt:"SignalRed",src:Y_});break;case"clear":u=(0,G_.jsx)("img",{alt:"SignalGreen",src:W_});break;default:u=(0,G_.jsx)("img",{alt:"SignalOff",src:H_})}return(0,G_.jsxs)("div",{className:"signalContainer",children:[(0,G_.jsx)("div",{className:"signal ".concat(a),children:t?(0,G_.jsx)("img",{alt:"Station",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC3pJREFUeNrsWw1MVNkVPvMHCIPgH78KuLJIiqsssK5LVdDo2sS1poa1mqJgbDdp0qRNs01jQqMmmJhYd7dNaZuaTVi3u02xdZPWpt1dg6ihK7oqi1IFFfkTGPEHGIbfGab3uzN35s3jPZhhlBkiJ3l599173p1zzj3n3HPOu6OhAENpaWnxwMBAUXd3dyaek5OTa9nto5KSkvJA0qUJoECiBwcHz1VVVWXevHnTY2zFihWUn59fO2fOnA1MQD2BoE8bKMEwLfmsoqIiMzo6murq6qinp4eO/6aMt9GHMeAEij5doMzn4sWLP4uLi6M16zZSTvarFGk0Mv3V0OLERGo3PaFBSx81Nzen7N+/v6WysrKWXgRggvksJibGzoRjN5v7+SUA7Y7OLj4GHOAGgkZ9gGQTPTw8TOGRUWTu76f4uFj68KNP+MD+oh+Q0RjB+4AD3BkrmIyMjHx2O+ct/sOHD8f1xTFBCPjX52fpem2dwM1n89u9nbu+vl4zYzXGYrFQVFQUdba3Uj/TGMDWLZv4vbPL5GhbhzkOcF+YXampqYlvyQcOHKDbDY3cbC5Uf8XH+vst9GnF3/kYcID7wvgYmNKaNWuot7eXfvfBcTKGGajXMkQpSxLpyuVLdPToUZo7dy7Fx8fTpUuXZm6A56uPEZCVlUWjo6N09epVl99hOxFlZ2eTwWCga9eu+UzLjPYxAsD4vHnzuCAgEKFN7e3t9PTp04CGFAEVDAACCLQQnospmTbl5DeOjhV9NTxWHAwMFRn1h9mtKvbs11WB1pj8NIO2mF3BstgHnXe/BKOlWZgVTECdry42nnRxCWTr6qAxSz8ZlqW5xsb6zWQzdbr6Rr65Shpj5IQ4eLbea+TtkFXZfF6M69m4nY3x32S/N8pwxHPQCSY0N48i9r7DGQZjlo9PUMSeH5EWhLM+CK3v2GFXX+/Bd0nLBKOEE/bmW2RggrCc/BMXzPw/fsLnDXH2hX47n4/3//44RR3+NT0u/C7ZnqFgnrkpQQPsTFMGTv+Frza/s1Ue+uIMjdRd46sNHDAUvmO3Kg7aog/CgDb0/+E9fuE94PCVTV3O7+I5KAUDhs1staHuc39xkK/08H/Pu5NHttIwAeCBOay4Eo4cIDxoFP+NCCM3UQCEppeYYdAKBrYedegYZ1owa/zxzznx4g61B5jZymsZkxCgHEfaxp0Lr7qKmxNMVQgY5qYkyGAJ8A5JYodggcMswDs0u13PxjEzK46pYrlScrDlSgH3MVFRUVOqxTxP6O3t1QSDxjQvWLCgfMmSJeM0ZuPGja46ixwqKyv5GMqXSoCvk6jNYA4lwBjmkENnZ2c5KoN+CyYjIyOF3f0yA5Qh8fVQDjt27KBr+nTeXrVQS6YBO3Wxa0uSjhejIJT5uW+7+r55NMbbwI2OruDCeaPgHd4v5kA7LlxDa/tuKVb4QIfBYDjkp1zKoTEp/m63KE+qQYvZwVTKXA1nGs9DNvcHUGmfaAPXZRYjdo85HG0tJaj8Xl9f37PwdVWzu9J0Zddy2JtucDjpEKLlzNqgGbHhbo2ACYk+0QZuh3N85QItJUdqXXOgHcYUrrtphgvm/AOboo8RIPyK3Me4TdGu6GMSZrrGTLePeWaCYdteUVhYmF+T2O32oPENAwMDcMB+zTE0NFSkZ0xlarX++WCNRj2ecvsHDTMBRxYSJjmVE8f9jaNPtIErfAza0jnQ5nh96rT4yw9kotm+fbtfkavVanV9mJfD0qVLKSIiQnHs/v37fEwtAEQAhw/6mEMJMIY55BAeHk4hISH+Kt4GDx+za9cuxQgVgZicARF5Qii1tcoHntT6fYHq6mqf38nPz1eNvEE3LnnELY+kPQTzxtbv08nbo5SXqKPmPoffiGHR57LXNrAI1lFCxBh2mqzkBj6R0Wik3NxcSkpKCgof09ra6moLugXNANAd01JPI5kFLocu5UdRMIglEHeImAPQKPpfMnjEEt1NDr+i1+spMjKSWK7kFeGxsbG0fPlyODhqaGggtbwmLS2NcEYPhxYbGxs5vjcAEzObzW5+XjK4aAaAbrMzfgKE6jz5URQM4gy5xoj+f98e9dQYq+870bZt28ie4FDhGEZQ2ppNVFd1hp/UFIAdsmB3IbXQQkqL1lKNyUaFeZvpn6dPkelBq2/VRSfdHhrjpPvzVpunxsj48RBMd1M9R9B2EiU63qPrbAUGTM2U5TwJhrEsK/E+X2D16tXUFZ1BNfetnNBeHvxZaefarVxrWlpaON7mzZvpfN8CFq/Y+EoioGt4qqW9O96mP58o81pz+NbtpFvQLPrgTzJYEsr5sSjzo79z507mokWL+MO7P/2J4g9cv359ytu1gKRlaVRhso3r/6LNRq8zsxGCCV2yglruWj3jCvZazWM9Ny+pdikBNgOYH6Dsg+OqeKdPn1Ydwyl1/YMHD95nl18OD/4lJydnUrVWgp5hO/c7LrxBNTy2/UdPfoDz7t271NbW5q8Pf1/PVHeDiGN27tw5DuPcuXM4MaW47VVVOSqI2Jkmg+hQDeXN13kEfXmJom7hGRCKfjhNmJ0I7vq6J+cIC5Senu7atpXoZhrBeVLjZ1wcs/o7BeO36/p6WpqdR1d1aR7ON3tJo3SiSQGacb7H5iEQ4RD3xnjmVqIfQpK2l/q47IJuqfMF3TFtt2jwle95OF85Px6CESsEIqJCHIJpEqsdq/NYUb3Jt7LqdGnMuN+M1XnMCbotzkzdhaPAj4dghplQoSkQitQnDLGdqt2pQRgDzmJr8CSOqsmgk25BM0DQLeVPiZ9pO4MXCFPyq+yANF3A8UO/dFToZckenJVIBsVYDeIb57uIfieNeBGFJrujZ6lJ0RM3nrRiJyJxHvgxi2r0wpQQE4nDjh/jRAVLKmukmwmjGdHxIpl/RP+jR4/cgrly5YqrHnPjxo0pSTchIUH1M4iLYKYxNZJqnqjecQ2aQ4oVO4TtQmNQapjjBS0dHR38Aty7d8+/eoxO59/flrypf9RVnyXXAoj3nPcvJdHsjf986u7/2o2D49EicJuMFn/54fWYgoICv+oxIo5JTU0NCoeLAE+tPjTleszzBvybBDmTiHSRNStl2MnJybRy5UqOj/8sIV1AKuBLnhT0xXAB69evp1dWr6ULHSw5XKTj2W1KxmLak7uOLlR+yRmHqSEDD41/mWfVeQzvPMNb9Woq/ZAJ9NQplmGbTIEVDBJLpAgiwWxubuaETeX/Q9CStOy1dKJ+lCeEqxbq+LbcYoYD1tGeN9/iWgO8wfmp9FdnieP1WIE3xnaqCCosLKSysrIpaQ521eLiYhc/2GnLy8tV+VH0mikpKVR69Bi1xq0lY9K3+PV42RZ677dlqjXcCQXDtAKpxpBNOb75x30bMV9HMckvs7ZVcQ4I5/ITA61bt87n34cwQLuUH7TRJwTllWAg2b+1hbi+5wjCznSE8jFfAP6ieTBEUSjSuXvHQumyaWzCuWq6bHw+X2Hfvn2K/KAPY14LBhJVKhNgsqSMHJ8Jw0ezSWMHm+Pj22Q40hKFtwCalfhBnxo/erXwXUSf4huQeJ6KKUmTOHlyKO1D4Cf9CqmEN1VQ4yegu5I0/5HnQNI+RLxSdVfCW58wPf+h16upviBQfGeWP88kgAn6yo+iYKSfReWqFzbz5MJp9pUfvVqBR9h6qPNF+bMvIM2Y5VmztE+cj5kIbyoAmn3lRz+ZTxAMyZ998zHujFmeNUv7xPmYifD2pvvuFntHyGd+psWUpD5L2LX0WfSJ8zET4U2XKc2ewfNlV7K03aKFww6Vbh9x2OLCAc/nmeRj2u/+bxz9k/HzTP7VXlpaqlrTQQiftHG3h68Asydvj8p8h4HjSE1HCe9Xr4XQkSNHJqyllJSUVAVL2QGlNVViEJTJAzMwKAclx6qE5wUtfsP/BRgAFFQsTW5wgHEAAAAASUVORK5CYII="}):u}),i&&(0,G_.jsx)("div",{className:c})]})};const J_=n.p+"static/media/conductor-success.fbd676f290938fbe81c08ab572d40cec.svg";const Z_=n.p+"static/media/conductor-try-again.9740c93e5898ce6023f92c04ce4ff9f6.svg",$_=n.p+"static/media/qrcode-extras.b125e2c2f4cf1d90364a.png",eS=e=>{var n,r,i;const{proposal:s,train:o}=e,{pattern_slug:a,proposal_result:l}=s,c=m((e=>e)),u=x();(0,t.useEffect)((()=>{u(j_())}),[u]);const h=(null===l||void 0===l?void 0:l.clear)&&(null===l||void 0===l?void 0:l.reason),d=!(null!==l&&void 0!==l&&l.clear)&&(null===l||void 0===l?void 0:l.reason),{patterns:f}=c.coreReducer,p=null===f||void 0===f||null===(n=f.filter((e=>e.slug===a)))||void 0===n?void 0:n[0],g=null===l||void 0===l?void 0:l.checkpoint_results;return 0===(null===p||void 0===p||null===(r=p.checkpoints)||void 0===r?void 0:r.length)?(0,G_.jsx)("h3",{children:"No checkpoints available."}):(0,G_.jsxs)("div",{className:"cargoResultContainer",children:[(0,G_.jsxs)("p",{children:[(0,G_.jsx)("b",{children:"Goal: "})," ",null===p||void 0===p?void 0:p.description]}),null===p||void 0===p||null===(i=p.checkpoints)||void 0===i?void 0:i.map(((e,t)=>{var n,r,i,s;return(0,G_.jsxs)("div",{className:"stepWrapper",children:[(0,G_.jsx)("div",{className:"stepResults",children:(0,G_.jsx)(X_,{trainLocation:null===o||void 0===o?void 0:o.actual_location,signal:{target_state:null!==g&&void 0!==g&&null!==(n=g[t])&&void 0!==n&&n.clear?"clear":"stop"},showTrainLocation:!1})}),(0,G_.jsxs)("div",{className:"step",children:[(0,G_.jsx)("b",{children:"Step ".concat(t+1,": ")}),e.description,(0,G_.jsxs)("p",{className:null!==g&&void 0!==g&&null!==(r=g[t])&&void 0!==r&&r.clear?"resultSuccess":"resultError",children:[(0,G_.jsx)("span",{children:null===g||void 0===g||null===(i=g[t])||void 0===i?void 0:i.clear}),(0,G_.jsx)("span",{children:null===g||void 0===g||null===(s=g[t])||void 0===s?void 0:s.reason})]})]})]})})),d&&(0,G_.jsxs)("div",{className:"resultContainer",children:[(0,G_.jsx)("h3",{children:"Oh no!"}),(0,G_.jsx)("div",{className:"tryAgainState",children:(0,G_.jsx)("img",{alt:"try again",src:Z_})}),(0,G_.jsx)("p",{children:null===l||void 0===l?void 0:l.reason})]}),h&&(0,G_.jsxs)("div",{className:"resultContainer",children:[(0,G_.jsx)("div",{className:"successState",children:(0,G_.jsx)("img",{alt:"success",src:J_})}),(0,G_.jsx)("div",{children:"Huzzah!"}),(0,G_.jsx)("div",{children:null===l||void 0===l?void 0:l.reason}),(0,G_.jsx)("img",{alt:"Extras",src:$_,className:"qrcode"})]})]})},tS=e=>{const{name:t}=e;return(0,G_.jsx)("div",{className:"trainCoachContainer",children:(0,G_.jsx)("div",{className:"trainCoachWrapper",children:(0,G_.jsx)("div",{className:"coach",children:"front"===t?(0,G_.jsx)("img",{alt:"FrontCar",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAyCAYAAADhna1TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABz9JREFUeNrsml1sVEUUx89ud7fb7ra7/aC0pZQWGpJaTEoVCE1QajTBQBTjgyA8FHnVxD4Q9UWiPqgPBhokMTHQ+sCDD9JGAQmibX2ooUEokSoq2IaW7lr6cbfb7mf3rvOf3lm2t3e729IPXPYkk7u9d+bMmd8958zc6ehIEefzT9vZ5Sgr1fT/lz5WOgovX21eqAIdK234cWFLZVmNzVJGySUA9AoD1D3fhnpWdqL4ZDnZoEAwpjYWDdULAZPsghTRtJBQCvNQunCBduzYkcyAGrKyso6nPGa2HHO73fUpMLHhJJRvDLEe3JsI0W/DQf77yXwjrbGmxVQy6pN5Xe9UmNdD/cUU6IV+9JNr1nP9GQadph1dzsCc+SYYCrcd/vbu5lMvlfbNG0zL3x7qGPBH/r7Y66XXKy20tdCkCfDz625uvBDAObIle9GgQD/6EQIo0A9I0VA+/MWVaDJuYXDqGBxpXqGkRb3L4ddUIDxFDeu2NLUoYKArGoqApbYRYOYhCKeWeecY9UCTVHYyr2lKJV9tqWdw6lNgtKWJwdm7bGC0Zo1HWD/gVMcFs6s8Y9a9rUXpmhq1ps4Ku2HO6X0+Aj1qXZiN1DMk7j0ELMxUmMbtcT8JomcWDD56apxrnQEoKIst0A+bAAn6F7iOmVNKrGnd28tzNz9u30qJSh37pmpPJd94K9/A6ZPku3Q2RUQNRu69TSHp3xSR1DomBebhQilZxOEPksMXjPncpNfRugwTZRnSHh8wHSNu+mvSF7fery4d7SmwU57JkPxgbrq9HMpGi5m251i5Z8TyqEv3XXRuSKL9xXkx6yVNjunz+nl4PJuXFXOwkKJ0IwcXkMM06A8kf/JFXrEaEhuOyC+jgdD8QsmxqpzOP/MG9a6p4n8/8U8XvfrDCTL7J2fV9aVb6Mdtr9G1yjr+u+h+Lz135WveZqUEtsB+2BMt5fd66OC5T4j8MXc06cu7949+tHFdnybiM7vfiUCB/L5+K33zwlsxjeis3hMxAlDP7HmXxrILVgyMFhQIxgR748jOIye81zXBaA3Kq9GR8BgtkVYITG/Jppg28Ze8YVtC2xBJt8DTCvdoyYjzPGlXvshxOeNDMZ9X3rnyeK58IQfOf0o/sQlBHf7rB25SzR9t5FgoGGTv6OQ7lwtquS7u4c2tpNccwOyzQPFM6No1wWBqBnEBB6B2/3xaU0lt9zme7DBzYUbCNI175gRj+VGTjDR968n3zIc0wSBGASdRwboFJRnk4Jq8xsLLV6XUtkNqP+YR3o9xh2Q66wlRV0hP/XojGQwGGh8fp1u3btHU1MxDABaLhSoqKvjVGAxQJU3RtjSZXrSakgtMu9tHHzjHKWicHpjP56PMzEzKzc2lqqoq6unpicABDNyTZZmcTie/7zCb6RK7toyE6bOSHMpKm+ns2FvBF3Mi4penT0ZofHRKLL+0L1soAcr7YwGyFRVTQUEBLyUlJfwZBg4QRUVFD5YL5eWRZ4CHuvn5+VRYWEjOnFX0psPNvU+9nTASmIq7UQV411yeSBuVtC6bx2AAH4/6KH/V9LdTIBDgnmBmHoDBDg0N8XACmP7+fg4pOzubhoeH+RVFeBhCD8Vlz6NTYy56O//BAu4pm4VvQmEXD5tWsfZkAA9wsG+j2t7EWeCGaDDcdcx6fRlNn4tdVPnO5SWdxTrtp5LECwQDRhjZ7XYaHR3lf9tsNu4hkImJCSotLeW/BwcHOVAIvA11Wn1hOsygi5ACCGxXAspcG1DF6SbalJ2h9hYwwEFpKRoM/w6vsVkiR+bvyLpqjxy2I7ZNJhN/w8Iw3kh5cyInWA1p0gZ9eMbpa3eY7HfD+urz4z4y5WZF3nrEpRV90D8j6RmmnRgepdfrZ9QVvwEG5fvJIFVZM6hKL7cLODW2TKqhzETfWwegiLyimXwVWtyVamtrm5gB9cPDEhUXF3MwAwNOfoUg5jEAPLdarWwQxu7Ozs4ZGx1MB45VXHfKOspmg0F9QBBwBJDoQc/YzoiCiLpqkHj+BfYHmF5130u5jrkhPAUG4M0BEJKfgAJv8Xg8wtBZZ/WZsbgnARzCAoLQgQ4U/BbhpYSP5HK5MMBD+AP3kHv4S1PawAbch13QqbRrXc4FXjMMhfFIjgHljcO9BRTcx3PF3Rtj6GkEGNRHMhUhgiKg4BnqKANsZwkYfbdDN8AAPvpAG/GyoAtQlJfSuBRgNP/rxIzzrV279k+j0biPFW4IPCcYDHJjx8bGeNJUBtTAvOOilh6mA16zi800hZOTk7wdQHi9XhoZGeGDXL16NQaOevvRr9LuBru3j8Ewo294RygU4le0AyTF45pZ30sCZs4jSCxP1LPLMYSyOuYVTwGU43F08HO12EsFFJGwRQJXwrCO6ZE0chTalYkpXtX3cdamYamWGXHPZikDA6CXVXN+IzOsL9GOmJ69ig6xJEDbDqajOU7fop09qu+vlBy2ZPKfAAMAX8JWZcvlwUgAAAAASUVORK5CYII="}):(0,G_.jsx)("img",{alt:"Car",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAyCAYAAADhna1TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABv9JREFUeNrsW21sU1UYfm9Xun6t3dZ9tKN1W2REA8kQjGYkC8OPkBgSDImCiUYwJv5RUX+7iBExRg1T+SEmyvxhgktUTIhIIGGEZIMEBjMuCEy2uTK67qtdv7uu9TxnvaNj9961dZ3E9k1OenvvOed9zvN+nXvWCZSU0ace3cM+trBWR/kjg6wNseZh7Xj1mUuD4gM1a2dbG+yl7HMD5bcc2muv6jzqdM8T07LRZKCCEFVo1C3itapAh7TAY0h7oI0Mzc15T8aqgweJ0AoeIy8FYpRCSU4uTwj0t1+gCi3RJkuc9OqlJxwPC3xcMEa00ZKgWmMiLSD3my5J9VB08PciGmKDRdGrVfThxlk2mbzy86Mq+vr6XSf8ie0Qtq2O04sPxhWBvtuTuS4srq2vKGe6JENpKCAsGCySdX5UUFQq9fzUbeVovebNTpfUvMupq5BjCsm3QEyBmBUnptawuPShpDVXK5dDqeeoFErysDk7XVLzLqcuyXKNzgdYCct0b9FcHefKM91bZKNrE5v70GOzOdOlXko5WkZvqGw/sG11ImPXvd90FXKM0itB9JvDFD71Y96TEbvQs5CY+EA/zXpG856YhNtVCKXCPiYXxw65lGg8QTf8YYomlKtDg0FLJWpVfhAzEY3RiVEvJ2fJsxNPkLZYSmitsfj/T8zpMR//3F5tJpt2lWy/O+EZOjfhp+4pP++3kp6z4j6Kxfpis9RUZlQkBYLnWyxG7llDwUh+JN90rS+St1QuWrFQ6l73DJ1oeoUmTFbSR/z0RE8Hbe/+VnGybMagP9q9stZ5hd7peENxbO+aZupo2Tevr6nvV3qu84uMMMqNwaHp/t01FeTQ3U1uzsoG+nLnZxQqNvLvM2oN3XA8QpZpFznGbkoqTHeMPxanG4EIS6Zaipbb6asdH0knaJNtfmyPN0g1zHNSQw/PP37hyAJ9A7Z1fLH1d/rSxpg6pmvKx5tsKAW1RhmwVllLZDNmwmxVrl5ZjA0WGzPGKDWmsMG7H3e+DvdN7sZysqH/fP7tfCE6RgoSbMfWNxc9a+o7SXaZfPafEWPxuiQ7IxnKiT4sbXlUFyXB4peqPsuFMZMxklUJ7o1qMG2w8EFo27uP8tImJ6bg5KIxz7MyuG7w4oJ+qVWpRF2UFglSVQkYQXqouITrhj542ZNsiyBrPIkxqetKrUqyodTI4rsxwxjPZsy/kbXDV3jLxZhCVSoQswJVycteAr9nb729pgpyJwSKRqMUj8/9TUej0VBJkYo2JaL09GyQ1pfocwZ+OBylYzNF1KvWUYC9SoXD4Tlrq1QcR70qQY9HfLTLrM09MSDlpT+dlHignuKRGRofH+f3tVotxWIxDs5kMlGgtJR+cE/Q2/4Q7bJZFs3jY0nYloY+9JMSJMnWyQiZbDU07Z0mj8fDMYCQYDDIDRWuqKABrYmOXbtF7Q02MqeZ7LMKpZ2Xr1O4uoYrdrlcnISamhoqLy+nqqoqstvtHNjk5CTZbDZqdU7SH77g3dKoUZNGJfBKI7fo1FO+02PT/LpWp1ngKa9dd86RMj1Nfr+fY4D+UmYQXFcwUtxuN/fmiHU17esbyNxj4AXpyMkxDw3EBWo0GLhSgDAajZwkABBd2Gq1ktPp5KRVVlbSp7dGqL1xzVyoMVJwFnNuwkfHbk8qnsngpA/krDfpOKGifMLmM1RWcb3wFBChVqu5x6IBA7wH5MBAwHNxVsUNlG5oQ1vnX8FwWj+AvuTxX2VWQd86hAwsBIHngBgIQAAUCIPnwJNO9vcvLJnGYn4eg/2MT8Eo2LvgzLdOr1lw/zf3FDkesvL59Xo9JwV4gEPMMfBcPAMxIMtsNg9e8PhBTJ2cvtBs/CrN/UqcE7P1g5tOer3W+ha7LlUiprXB3t4T1Oxhl+/BKvMunyQFAoBirAMQQEPgNdlIr88vmecc7DN1fjHxQkQPBg7Rk1hYf/eqPtrJHrfIqBo8PORqX5R8q89caksH6ObNmxcBAQkiOQAjkgVQkUhk3v2XvaQmPSVVr3hf/C6GVnKNIKYzV+X6ODwGborEhzyC8EnNMbCYmBATiQT6f77cpLCFv8wI2IMcg8WDCIRPKhEINZAEXEyuZjK/kA0o5jVXGIANIyMjPIcgn4gCYEjMAIpnCNWurq7O5SaGYUCuGIABYCDkOzGsRI/GVgL3GVGDDEN9JvMXZQPK4XBcZFbYrdPptF6vlwObmZkhXMOCIKqsrAxd2xigIznZ3A0PexgOgS26RRAEboxQKMQ9d2pqigKBgEgKNw7r78q5xyQthir2MyrUvTvfpOu+z0jZn+utO8OBonEoNe+JIU1z/4+0NxuPFZYBGKpU6j+AnWOtnYEZXKn3mmRYPcvajuQtlNxfkA8ZDk82c/4jwADNq6pGK4SsDAAAAABJRU5ErkJggg=="})})})})},nS=e=>{var t;const{train:n,cargo:r}=e;return(0,G_.jsxs)("div",{className:"trainContainer",children:[(0,G_.jsx)("div",{className:"cloudTrain"}),(0,G_.jsx)("div",{className:"container",children:(0,G_.jsxs)("div",{className:"content",children:[(0,G_.jsxs)("div",{className:"train ".concat(null===n||void 0===n?void 0:n.actual_location),children:[null===r||void 0===r||null===(t=r.actual_cargo)||void 0===t?void 0:t.map(((e,t)=>(0,G_.jsx)(tS,{cargo:e},t))),(0,G_.jsx)(tS,{name:"front"})]}),(0,G_.jsx)("div",{className:"track"})]})})]})},rS=()=>(0,G_.jsx)("div",{className:"ribbonContainer",children:(0,G_.jsxs)("div",{className:"ribbon",children:[(0,G_.jsx)("div",{className:"blue"}),(0,G_.jsx)("div",{className:"red"}),(0,G_.jsx)("div",{className:"yellow"}),(0,G_.jsx)("div",{className:"green"})]})}),iS=e=>{var t,n;const r=x(),{signals:i,cargo:s,train:o,proposal:a,trainMailbox:l}=e||{};return(0,G_.jsxs)("div",{className:"dashboardContainer",children:[(0,G_.jsxs)("div",{className:"dashboardWrapper",children:[(0,G_.jsxs)("div",{className:"dashboardPanel",children:[(0,G_.jsx)("div",{className:"missionTitle",children:(0,G_.jsx)("h3",{children:"Your Mission: ".concat(null===a||void 0===a||null===(t=a.pattern_slug)||void 0===t||null===(n=t.split("_"))||void 0===n?void 0:n.join(" "))})}),(0,G_.jsx)(eS,{train:o,signals:i,proposal:a})]}),(0,G_.jsxs)("div",{className:"dashboardPanel",children:[(0,G_.jsx)("div",{className:"dashboardSignals",children:(0,G_.jsxs)("div",{className:"columns",children:[(0,G_.jsx)("p",{children:"Loaded cargo ..."}),(0,G_.jsx)(X_,{isStation:!0,trainLocation:null===o||void 0===o?void 0:o.actual_location}),(0,G_.jsx)(X_,{trainLocation:null===o||void 0===o?void 0:o.actual_location,signal:null===i||void 0===i?void 0:i.one}),(0,G_.jsx)(X_,{trainLocation:null===o||void 0===o?void 0:o.actual_location,signal:null===i||void 0===i?void 0:i.two}),(0,G_.jsx)(X_,{trainLocation:null===o||void 0===o?void 0:o.actual_location,signal:null===i||void 0===i?void 0:i.three}),(0,G_.jsx)(X_,{trainLocation:null===o||void 0===o?void 0:o.actual_location,signal:null===i||void 0===i?void 0:i.four})]})}),(0,G_.jsx)(nS,{train:o,cargo:s}),(0,G_.jsx)(Q_,{cargo:s,proposalResult:null===a||void 0===a?void 0:a.proposal_result,trainMailbox:l})]})]}),(0,G_.jsx)("div",{className:"actionPanel",children:(0,G_.jsx)("button",{className:"stop",onClick:async e=>{r(z_()),await B_("reset"),window.location.replace("/")},children:"Stop Mission"})}),(0,G_.jsx)(rS,{})]})};const sS=n.p+"static/media/conductor-wave.fbd676f290938fbe81c08ab572d40cec.svg",oS=e=>{var n;const r=m((e=>e)),i=x(),[s,o]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)({}),[h,d]=(0,t.useState)({}),[f,p]=(0,t.useState)({}),[g,y]=(0,t.useState)({}),[v,w]=(0,t.useState)({});(0,t.useEffect)((()=>{const e=a?"global_simulation":"global";!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("proposal");try{await n.onSnapshot((t=>e(t.data())))}catch(r){console.error(r)}}((e=>{o(!!e.pattern_slug),e.pattern_slug?y(e):(y({}),(async()=>{try{await B_("reset"),Promise.all([i(V_()),i(j_())])}catch(e){console.log(e)}})())}),e),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("signals");try{await n.onSnapshot((t=>e(t.data())))}catch(r){console.error(r)}}((e=>u(e)),e),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("train");try{await n.onSnapshot((t=>e(t.data())))}catch(r){console.error(r)}}((e=>p(e)),e),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("cargo");try{await n.onSnapshot((t=>e(t.data())))}catch(r){console.error(r)}}((e=>d(e)),e),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";const n=L_.db.collection(t).doc("train_mailbox");try{await n.onSnapshot((t=>e(t.data())))}catch(r){console.error(r)}}((e=>w(e)),e)}),[a,i]);return(0,G_.jsx)("div",{className:"mainContainer",children:(0,G_.jsxs)("div",{className:"mainWrapper",children:[g&&!g.pattern_slug&&(0,G_.jsxs)("div",{className:"mainHeader",children:[(0,G_.jsx)("div",{className:"welcomeImage",children:(0,G_.jsx)("img",{alt:"welcome-wave",src:sS})}),(0,G_.jsxs)("div",{className:"mainContent",children:[(0,G_.jsx)("h2",{children:"Choose your adventure"}),(0,G_.jsx)("p",{children:"Pick a mission wand and wave it over the center RFID reader to select!"}),(0,G_.jsx)("div",{className:"section",children:null===(n=r.coreReducer.patterns)||void 0===n?void 0:n.map(((e,t)=>(0,G_.jsxs)("div",{className:"buttonStyle",children:[(0,G_.jsx)("b",{children:e.name}),(0,G_.jsx)("br",{}),"("," ".concat(e.complexity.split("_").join(" ")),")"]},t)))})]})]}),s?(0,G_.jsx)(iS,{proposal:g,train:f,cargo:h,signals:c,trainMailbox:v}):(0,G_.jsx)("button",{onClick:async e=>{o(!a),l(!a),null===i||void 0===i||i(F_(a?"global_simulation":"global"))},children:"Turn on simulator"})]})})},aS=()=>(0,G_.jsxs)("div",{className:"headerContainer",children:[(0,G_.jsx)("div",{className:"headerBanner"}),(0,G_.jsx)(rS,{})]});const lS=function(){return(0,G_.jsxs)(_,{store:K_,children:[(0,G_.jsx)(aS,{}),(0,G_.jsx)(oS,{})]})};r.createRoot(document.getElementById("root")).render((0,G_.jsx)(t.StrictMode,{children:(0,G_.jsx)(lS,{})}))})()})();
//# sourceMappingURL=main.f0561422.js.map